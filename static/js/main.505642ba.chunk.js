(this["webpackJsonpmy-editor"]=this["webpackJsonpmy-editor"]||[]).push([[0],{207:function(e,t,n){},315:function(e,t,n){},316:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n(36),i=n.n(o),c=n(31),l=n(13),s=n(2),d=n(1),u=n(15),h=n(111);!function(e){e.EDITOR="editor",e.NUMBER_LIST="ol",e.NORMAL_LIST="ul",e.LIST_ITEM="li",e.DIV="div",e.Block="block",e.P="p",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.IMG="img",e.LINK="link",e.TABLE="table",e.TBODY="tbody",e.TR="tr",e.TD="td",e.TODOLIST="todo"}(r||(r={}));var f,b=[r.DIV,r.H1,r.H2,r.H3,r.H4,r.P],v=[r.IMG,r.LINK];!function(e){e.BOLD="bold",e.ITALIC="italic",e.FontSize="fontSize",e.Underline="underline",e.LineThrough="line-through",e.Color="color",e.BGColor="backgroundColor",e.TextAlign="textAlign"}(f||(f={}));var j=n(10),p=n(17),O=n(32),g=n.n(O),m=n(26),y={toggleList:function(e,t){var n=d.a.nodes(e,{mode:"lowest",match:function(t){return d.g.isText(t)||d.a.isInline(e,t)}}),a=Object(s.a)(n,1)[0];if(a){var o=d.a.parent(e,a[1]);if(o){var i=d.a.parent(e,o[1]),c=y.isListItem(i[0])&&i,l=c&&T.getParent(e,c[1]),u=c&&l&&d.b.isElement(l[0])&&(null===l||void 0===l?void 0:l[0].type)==t,h=c&&!u,f=!c;c&&u?d.h.unwrapNodes(e,{match:function(e){return y.isListItem(e)}}):h?d.a.withoutNormalizing(e,(function(){var n,r=new Set,a=d.a.nodes(e,{mode:"lowest",match:function(e){return y.isListItem(e)}}),o=Object(j.a)(a);try{for(o.s();!(n=o.n()).done;){var i=Object(s.a)(n.value,2)[1],c=T.getParent(e,i);null!=c[0]&&r.add(c[1].join("-"))}}catch(l){o.e(l)}finally{o.f()}r.forEach((function(n){var r=n.split("-").map((function(e){return+e}));d.h.setNodes(e,{type:t},{at:r,hanging:!0})}))})):f&&d.a.withoutNormalizing(e,(function(){for(var n=0,a=Array.from(d.a.nodes(e,{reverse:!0,mode:"lowest",match:function(e){return T.isTextWrapper(e)}}));n<a.length;n++){var o=Object(s.a)(a[n],2)[1];if(0!=o.length){var i=T.getParent(e,o),c=Object(s.a)(i,1)[0];y.isListItem(c)||(d.h.wrapNodes(e,{type:r.LIST_ITEM,children:[]},{at:o}),y.isOrderList(c)||d.h.wrapNodes(e,{type:t,children:[]},{at:o}))}}}))}}},isInLi:function(e){return!(!e.selection||!d.f.isCollapsed(e.selection))&&T.getFirstAboveElementType(e)==r.LIST_ITEM},isListItem:function(e){return d.b.isElement(e)&&[r.LIST_ITEM].includes(e.type)},isOrderList:function(e){return d.b.isElement(e)&&[r.NUMBER_LIST,r.NORMAL_LIST].includes(e.type)},normalizeList:function(e,t){var n=Object(s.a)(t,2),a=n[0],o=n[1];if(y.isListItem(a)){var i=T.getParent(e,o);if(0==i.length||!y.isOrderList(i[0]))return d.h.unwrapNodes(e,{at:o}),!0;if(0==a.children.length||1==a.children.length&&d.g.isText(d.c.child(a,0)))return d.h.removeNodes(e,{at:o}),!0;if(a.children.length>1){var c=o.concat([1]);return d.h.wrapNodes(e,{type:r.LIST_ITEM,children:[]},{at:c}),d.h.liftNodes(e,{at:c}),!0}var l,u=new Set,h=Object(j.a)(d.c.texts(a));try{for(h.s();!(l=h.n()).done;){var b=Object(s.a)(l.value,1)[0];u.add(b[f.Color])}}catch(P){h.e(P)}finally{h.f()}if(1==u.size){var v=Array.from(u).pop();return void(v&&d.h.setNodes(e,{liColor:v},{at:o}))}}if(y.isOrderList(a)){var p=T.getPath(o,"pre"),O=T.getNodeByPath(e,p),g=Object(s.a)(O,1)[0];if(y.isOrderList(g)&&g.type!=a.type)return d.h.setNodes(e,{type:a.type},{at:p}),!0;if(y.isOrderList(g)&&g.type==a.type)return d.h.mergeNodes(e,{at:o}),!0;var m=T.getPath(o,"next"),w=T.getNodeByPath(e,m),x=Object(s.a)(w,1)[0];if(y.isOrderList(x)&&x.type!=a.type)return d.h.setNodes(e,{type:x.type},{at:m}),!0;if(y.isOrderList(x)&&x.type==a.type)return d.h.mergeNodes(e,{at:m}),!0;if(1==a.children.length){var S=d.c.first(a,[0]),E=Object(s.a)(S,1)[0];if(y.isOrderList(E)&&E.type!=a.type)return d.h.setNodes(e,{type:E.type},{at:o}),!0}var A,N=Object(j.a)(d.c.children(e,o,{reverse:!0}));try{for(N.s();!(A=N.n()).done;){var D=Object(s.a)(A.value,2),C=D[0],I=D[1];if(!y.isListItem(C)&&!y.isOrderList(C))return d.h.liftNodes(e,{at:I}),!0}}catch(P){N.e(P)}finally{N.f()}var L,M=0,k=Object(j.a)(d.c.children(e,o,{reverse:!0}));try{for(k.s();!(L=k.n()).done;){var B=Object(s.a)(L.value,1)[0];(y.isOrderList(B)||y.isListItem(B))&&M++}}catch(P){k.e(P)}finally{k.f()}if(0==M)return d.h.removeNodes(e,{at:o}),!0}return!1},tabEvent:function(e){d.a.withoutNormalizing(e,(function(){var t,n=d.a.nodes(e,{universal:!0,mode:"lowest",match:function(e){return y.isListItem(e)}}),r=Object(j.a)(n);try{for(r.s();!(t=r.n()).done;){var a=Object(s.a)(t.value,2),o=a[0],i=a[1];y.indentLi(e,[o,i])}}catch(c){r.e(c)}finally{r.f()}}))},indentLi:function(e,t){d.a.withoutNormalizing(e,(function(){var n=Object(s.a)(t,1)[0],r=u.b.findPath(e,n),a=T.getNodeByPath(e,T.getPath(r,"next")),o=T.getParent(e,r);a.length>0&&y.isOrderList(null===a||void 0===a?void 0:a[0])?d.h.wrapNodes(e,{type:a[0].type,children:[]},{at:r}):o.length>0&&y.isOrderList(null===o||void 0===o?void 0:o[0])&&d.h.wrapNodes(e,{type:o[0].type,children:[]},{at:r})}))},shiftTabEvent:function(e){d.a.withoutNormalizing(e,(function(){var t,n=d.a.nodes(e,{universal:!0,reverse:!0,mode:"lowest",match:function(e){return y.isListItem(e)}}),r=Object(j.a)(n);try{for(r.s();!(t=r.n()).done;){var a=Object(s.a)(t.value,2),o=a[0],i=a[1];y.liftLi(e,[o,i])}}catch(c){r.e(c)}finally{r.f()}}))},liftLi:function(e,t){var n=Object(s.a)(t,2)[1],r=T.getParent(e,n),a=Object(s.a)(r,2),o=a[0],i=a[1],c=o&&T.getParent(e,i),l=Object(s.a)(c,1)[0];y.isOrderList(l)&&d.h.liftNodes(e,{at:n})}},T={encodeSlateContent:function(e){var t;return null===(t=window)||void 0===t?void 0:t.btoa(encodeURIComponent(JSON.stringify(e)))},decodeContentToSlateData:function(e){return JSON.parse(decodeURIComponent(window.atob(e)))},removeRangeElement:function(e){var t=e.selection;if(t&&!d.f.isCollapsed(t)){var n,a=d.a.nodes(e,{at:t,match:function(e){return W.isTable(e)}}),o=Object(j.a)(a);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i){var c=d.a.range(e,i[1]),l=d.f.intersection(t,c);if(l&&d.f.equals(c,l))return d.h.removeNodes(e,{at:i[1]}),void T.removeRangeElement(e)}}}catch(M){o.e(M)}finally{o.f()}var u,h=d.a.nodes(e,{at:t,match:function(e){return y.isOrderList(e)}}),f=Object(j.a)(h);try{for(f.s();!(u=f.n()).done;){var b=u.value;if(b){var v=d.a.range(e,b[1]),p=d.f.intersection(t,v);if(p&&d.f.equals(v,p))return d.h.removeNodes(e,{at:b[1]}),void T.removeRangeElement(e)}}}catch(M){f.e(M)}finally{f.f()}for(var O=Array.from(d.a.nodes(e,{reverse:!0,match:function(t,n){return d.g.isText(t)||d.a.isInline(e,t)}})),g=0,m=O;g<m.length;g++){var w=Object(s.a)(m[g],2)[1],x=T.getParent(e,w);if(d.b.isElement(x[0])&&x[0].type===r.TODOLIST){var S=x,E=d.a.range(e,S[1]),A=e.selection&&d.f.intersection(e.selection,E);if(!A)continue;d.f.equals(A,E)?d.h.removeNodes(e,{at:S[1]}):d.h.delete(e,{at:A,reverse:!0,unit:"character",hanging:!0})}else if(x.length>0&&T.isTextWrapper(x[0])){var N=d.a.range(e,x[1]),D=e.selection&&d.f.intersection(e.selection,N);if(!D)continue;var C=T.getParent(e,x[1]),I=Object(s.a)(C,1)[0],L=W.isTd(I);if(!d.f.equals(D,N)||L&&1==I.children.length||d.e.equals(O[0][1],w)){if(d.f.isCollapsed(D))continue;d.h.delete(e,{at:D,reverse:!0,unit:"character",hanging:!0})}else d.h.removeNodes(e,{at:x[1]})}}d.h.collapse(e,{edge:"start"})}},isTextWrapper:function(e){return d.b.isElement(e)&&b.includes(e.type)},getFirstAboveElementType:function(e){if(e.selection){var t=T.getParent(e,e.selection.anchor.path);if(!t[0])return null;var n=T.getParent(e,t[1]);return n[0]?d.b.isElement(n[0])&&n[0].type||d.a.isEditor(n[0])&&r.EDITOR:null}},getPath:function(e,t){var n=e.slice(0,e.length-1),r=e[e.length-1];return"parent"==t?n:[].concat(Object(p.a)(n),["pre"==t?r-1:r+1])},getNodeByPath:function(e,t){try{return d.a.node(e,t)}catch(n){return[]}},getParent:function(e,t){return this.getNodeByPath(e,this.getPath(t,"parent"))}},w={selectedTds:new Set,editingTdsPath:new Set,preSelectedTdPos:{row:0,col:0},copyedCellsPath:null,copyedAreaHeight:0,copyedAreaWidth:0,copyedCells:null,copyedContent:null},x=function(e){w.copyedContent=e},S=function(e){w.copyedCells=e},E=function(){return w.copyedCells},A=function(e){w.copyedAreaHeight=e.copyedAreaHeight,w.copyedAreaWidth=e.copyedAreaWidth},N=function(e){w.preSelectedTdPos=e},D=function(e){return I(e,w.selectedTds),w.selectedTds},C=function(e){w.selectedTds=e},I=function e(t,n){var r,a=Object(j.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.split(",").map((function(e){return+e}));if(!d.a.hasPath(t,i))return n.delete(o),void e(t,n)}}catch(c){a.e(c)}finally{a.f()}},L=function(e){return I(e,w.editingTdsPath),w.editingTdsPath},M=function(e){w.editingTdsPath=e},k=n(3),B=100,P=30,R=function(e){var t=e.attributes,n=e.element,o=e.children,i=Object(u.g)(),c=Object(u.d)();Object(a.useEffect)((function(){var e=u.b.findPath(i,n);return null!=n.width&&null!=n.height||d.h.setNodes(i,{width:n.width||B,height:n.height||P},{at:e}),function(){var e=u.b.findPath(i,n).join(","),t=D(i),r=L(i);t.delete(e),r.delete(e)}}),[]),Object(a.useEffect)((function(){var e=u.b.findPath(i,n).join(","),t=D(i),r=L(i),a=n.canTdEdit,o=n.selected;!0===a?r.add(e):r.delete(e),!0===o?t.add(e):t.delete(e)}));var h={contentEditable:!1};return!0===n.canTdEdit&&delete h.contentEditable,Object(k.jsxs)("td",Object(l.a)(Object(l.a)(Object(l.a)({},t),{},{colSpan:n.colSpan,rowSpan:n.rowSpan,style:{minWidth:n.width||B,maxWidth:n.width||B,width:n.width||B,height:n.height||P,cursor:n.canTdEdit||c?"inherit":"cell",color:n[f.Color]||"unset",backgroundColor:n.selected&&!c?"rgba(180,215,255,.7)":n[f.BGColor]||"unset",userSelect:n.canTdEdit||c?"unset":"none",textAlign:n[f.TextAlign]||"unset",fontSize:n[f.FontSize]||"unset",fontWeight:n[f.BOLD]?"bold":"unset",fontStyle:n[f.ITALIC]?"italic":"unset",textDecoration:"".concat(n[f.Underline]?"underline":""," ").concat(n[f.LineThrough]?"line-through":"")}},h),{},{onDoubleClick:function(e){e.stopPropagation();var n=t.ref.current;if(n){var r=u.b.toSlateNode(i,n),a=u.b.findPath(i,r);z.editTd(i,[r,a])}},onMouseDown:function(e){if(!["resizer","columnSelector"].includes(e.target.className)&&!c){var n=t.ref.current;if(n){var r=u.b.toSlateNode(i,n),a=u.b.findPath(i,r);if(!d.b.isElement(r)||!r.canTdEdit){var o,l=e.target,s=u.b.toSlateNode(i,l),h=u.b.findPath(i,s);if(d.e.equals(h,a))o=[s,h];else{var f=d.a.above(i,{at:h,mode:"lowest",match:function(e){return W.isTd(e)}});if(!f)return;o=f}o&&z.chooseTd(i,o)}}}},children:[o,c?null:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("span",{className:"resizer",style:{position:"absolute",width:5,right:0,top:0,height:"100%",cursor:"col-resize",userSelect:"none"},contentEditable:!1,onMouseDown:function(e){for(var t=e.clientX,n=null,a=null,o=0,c=e.nativeEvent.path;o<c.length;o++){var l=c[o];if("TD"==l.tagName&&(n=l),"TABLE"==l.tagName){a=l;break}}if(null!=n&&null!=a){var h=u.b.toSlateNode(i,n),f=u.b.findPath(i,h),b=d.a.above(i,{at:f,match:function(e){return d.b.isElement(e)&&e.type==r.TBODY}});if(b){for(var v=z.getTdMap(b).tdMap,j=f.slice(f.length-2),O=Object(s.a)(j,2),g=O[0],m=O[1],y=-1,T=0;T<v.length;T++){for(var w=0;w<v[T].length;w++){var x=v[T][w];if(x.originCol==m&&x.originRow==g){y=x.col+x.colSpan-1;break}}if(-1!=y)break}if(-1!=y){for(var S=[],E=0;E<v.length;E++){var A=v[E][y],N=d.a.node(i,[].concat(Object(p.a)(b[1]),[A.originRow,A.originCol])),D=u.b.toDOMNode(i,N[0]);D.initX=D.offsetWidth,S.push(D)}var C=function(e){var n=e.clientX-t;S.forEach((function(e){e.style.maxWidth=e.style.width=e.style.minWidth=(e.initX+n<B?B:e.initX+n)+"px"}))};document.addEventListener("mousemove",C),document.addEventListener("mouseup",(function e(){Array.from(a.querySelectorAll(":scope>tbody>tr")).forEach((function(e,t){Array.from(e.querySelectorAll(":scope>td")).forEach((function(e,n){var r=parseInt(e.style.minWidth),a=u.b.toSlateNode(i,e);d.b.isElement(a)&&a.width!=r&&d.h.setNodes(i,{width:r},{at:[].concat(Object(p.a)(b[1]),[t,n])})}))})),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",e)}))}}}}}),Object(k.jsx)("span",{className:"resizer",style:{position:"absolute",width:"100%",height:5,left:0,bottom:0,cursor:"row-resize",userSelect:"none"},contentEditable:!1,onMouseDown:function(e){for(var t=e.clientY,n=null,a=null,o=null,c=0,l=e.nativeEvent.path;c<l.length;c++){var h=l[c];if("TD"==h.tagName&&(n=h),"TR"==h.tagName&&(a=h),"TABLE"==h.tagName){o=h;break}}if(null!=n&&null!=a&&null!=o){var f=u.b.toSlateNode(i,n),b=u.b.findPath(i,f),v=d.a.above(i,{at:b,match:function(e){return d.b.isElement(e)&&e.type==r.TBODY}});if(v){for(var j=z.getTdMap(v).tdMap,O=b.slice(b.length-2),g=Object(s.a)(O,2),m=g[0],y=g[1],T=-1,w=0;w<j.length;w++){for(var x=0;x<j[w].length;x++){var S=j[w][x];if(S.originCol==y&&S.originRow==m){T=S.row+S.rowSpan-1;break}}if(-1!=T)break}if(-1!=T){for(var E=[],A=0;A<j[0].length;A++){var N=j[T][A],D=d.a.node(i,[].concat(Object(p.a)(v[1]),[N.originRow,N.originCol])),C=u.b.toDOMNode(i,D[0]);C.initY=C.offsetHeight,E.push(C)}var I=function(e){e.preventDefault();var n=e.clientY-t;E.forEach((function(e){return e.style.minHeight=e.style.height=e.style.maxHeight=(e.initY+n<=P?P:e.initY+n)+"px"}))};document.addEventListener("mousemove",I),document.addEventListener("mouseup",(function e(){Array.from(o.querySelectorAll(":scope>tbody>tr")).forEach((function(e,t){Array.from(e.querySelectorAll(":scope>td")).forEach((function(e,n){var r=parseInt(e.style.height),a=u.b.toSlateNode(i,e);d.b.isElement(a)&&a.height!=r&&d.h.setNodes(i,{height:r},{at:[].concat(Object(p.a)(v[1]),[t,n])})}))})),document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",e)}))}}}}})]})]}))},z={editTd:function(e,t){z.deselectAllTd(e);var n=d.a.above(e,{at:t[1],mode:"highest",match:function(e){return W.isTd(e)}});d.h.setNodes(e,{canTdEdit:!0,start:!0},{at:d.a.range(e,n?n[1]:t[1]),mode:"all",hanging:!0,match:function(e){return W.isTd(e)}}),d.h.select(e,t[1]),N({row:t[1][t[1].length-2],col:t[1][t[1].length-1]})},getTdMap:function(e){for(var t=e[0].children,n=[],r=new Array(t.length).fill(0).map((function(){return[]})),a=0;a<t.length;a++)for(var o=t[a].children,i=0;i<o.length;i++){var c=o[i];if(W.isTd(c)){var s=r[a].findIndex((function(e){return null==e})),d=(s=-1==s?r[a].length:s)+(c.colSpan||1),u=a,h=u+(c.rowSpan||1),f=Object(l.a)(Object(l.a)({},c),{},{colSpan:c.colSpan||1,rowSpan:c.rowSpan||1,row:a,col:s,originRow:a,originCol:i});c.start&&n.push(f);for(var b=u;b<h;b++)for(var v=s;v<d;v++)r[b][v]=f}}return{tdMap:r,startPoins:n}},getSelectedTdInTdMap:function(e){var t=z.getTdMap(e),n=t.tdMap,r=t.startPoins;if(r.length<1)return null;if(1==r.length&&(r[1]=r[0]),!n)return null;var a=Object(s.a)(r,2),o=a[0],i=a[1],c=new Map([[o,1],[i,1]]);return function e(t,r){for(var a=t.colStart,o=t.colEnd,i=t.rowStart,c=t.rowEnd,l=i;l<c;l++)for(var s=a;s<o;s++){var d=n[l][s];if(!r.has(d))return r.set(d,1),void e({colStart:Math.min(d.col,a),colEnd:Math.max(o,d.col+d.colSpan),rowStart:Math.min(d.row,i),rowEnd:Math.max(d.row+d.rowSpan,c)},r)}}({colStart:Math.min(o.col,i.col),colEnd:Math.max(o.col+o.colSpan,i.col+i.colSpan),rowStart:Math.min(o.row,i.row),rowEnd:Math.max(o.row+o.rowSpan,i.row+i.rowSpan)},c),c},getEditingTd:function(e){var t=d.a.nodes(e,{at:[],match:function(e){return W.isTd(e)&&1==e.canTdEdit}});return Object(s.a)(t,1)[0]},deselectAllTd:function(e){var t,n=W.getSelectedTdsPath(e),r=Object(j.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;d.h.unsetNodes(e,["selected","start","canTdEdit"],{at:a})}}catch(s){r.e(s)}finally{r.f()}C(new Set);var o,i=W.getEditingTdsPath(e),c=Object(j.a)(i);try{for(c.s();!(o=c.n()).done;){var l=o.value.split(",").map((function(e){return+e}));d.h.unsetNodes(e,["selected","start","canTdEdit"],{at:l})}}catch(s){c.e(s)}finally{c.f()}M(new Set),N(null)},findTargetTd:function(e,t,n){if(t){var a=d.a.above(e,{at:t[1],mode:"lowest",match:function(e){return d.b.isElement(e)&&e.type==r.TBODY}});if(a&&d.b.isElement(a[0])){var o,i,c=z.getTdMap(a).tdMap,l=w.preSelectedTdPos;if(l)if(c.some((function(e,t){return e.some((function(e,n){return 1==e.start&&(o=t,i=n,!0)}))})),null!=o&&null!=i){var s=c[o][i];z.deselectAllTd(e);var u=l.col,h=l.row;if("left"==n)u=0==i?0==o?0:(h=l.row-1,c[0].length-1):i-1;else if("right"==n){var f=i+s.colSpan;u=f>=c[0].length?o==c.length-1?i:(h=l.row+1,0):f}else"up"==n?h=0==o?0:o-1:"down"==n&&(h=o+s.rowSpan>=c.length?o:o+s.rowSpan);var b=c[h][u];N({row:h,col:u}),d.h.setNodes(e,{selected:!0,start:!0},{at:[].concat(Object(p.a)(a[1]),[b.originRow,b.originCol])})}}}},chooseTd:function(e,t){z.deselectAllTd(e),d.h.deselect(e),d.h.setNodes(e,{selected:!0,start:!0,canTdEdit:!1},{at:t[1]}),N({row:t[1][t[1].length-2],col:t[1][t[1].length-1]})},clearTd:function(e){var t,n=W.getSelectedTds(e),r=Object(j.a)(n);try{for(r.s();!(t=r.n()).done;){var a,o=Object(s.a)(t.value,2)[1],i=Object(j.a)(d.c.children(e,o,{reverse:!0}));try{for(i.s();!(a=i.n()).done;){var c=Object(s.a)(a.value,2)[1];d.h.removeNodes(e,{at:c})}}catch(l){i.e(l)}finally{i.f()}d.h.unsetNodes(e,["selected","start"],{at:o})}}catch(l){r.e(l)}finally{r.f()}}},H=n(186),F=function(e){var t=e.attributes,n=e.children,o=e.element,i=Object(a.useRef)({isBeginSelectTd:!1,mouseDownStartPoint:null,initX:0,initY:0,lastSelectedPaths:[],preMouseOnTdPath:null,prePath:null}),c=Object(a.useContext)(nt),h=c.savedMarks,b=c.setSavedMarks,v=Object(u.g)(),O=Object(u.d)();Object(a.useEffect)((function(){!function(){var e=t.ref.current;if(e){var n=(null===e||void 0===e?void 0:e.offsetWidth)-2,r=o.wrapperWidthWhenCreated,a=e.querySelector(":scope>table");if(a&&null!=n&&null!=r&&r!=n){var i=u.b.toSlateNode(v,e);if(!i)return;var c=u.b.findPath(v,i);if(!c)return;Array.from(a.querySelectorAll(":scope>tbody>tr")).forEach((function(e,t){Array.from(e.querySelectorAll(":scope>td")).forEach((function(e,a){var o=u.b.toSlateNode(v,e);if(d.b.isElement(o)){var i=(o.width||B)/r*n;d.h.setNodes(v,{width:i},{at:[].concat(Object(p.a)(c),[0,t,a])})}}))})),d.h.setNodes(v,{wrapperWidthWhenCreated:n},{at:c})}}}();var e=u.b.findPath(v,o);null==i.current.prePath||d.e.equals(e,i.current.prePath)||W.resetSelectedTds(v),i.current.prePath=e}));var m=g.a.debounce((function(e,t){var n=d.c.common(v,e.path,t.path);if(n){var a=d.a.above(v,{at:t,mode:"lowest",match:function(e){return W.isTd(e)}});if(a){var o=i.current.preMouseOnTdPath;if(!o||!d.e.equals(o,a[1])){i.current.preMouseOnTdPath=a[1];var c=d.a.above(v,{at:e,mode:"lowest",match:function(e){return W.isTd(e)}});if(c){var l=function(){i.current.lastSelectedPaths.forEach((function(e){d.h.unsetNodes(v,["selected","start"],{at:e})})),i.current.lastSelectedPaths=[]};if(i.current.lastSelectedPaths.forEach((function(e){var t=d.a.node(v,e);t&&d.b.isElement(t[0])&&1==t[0].start&&d.h.unsetNodes(v,["start"],{at:e})})),d.e.equals(c[1],a[1]))return l(),void d.h.setNodes(v,{selected:!0,start:!0},{at:c[1]});if(!d.b.isElement(n[0])||n[0].type!=r.TBODY&&n[0].type!=r.TR)l();else{var s=d.a.above(v,{at:e,mode:"highest",match:function(e,t){return W.isTd(e)&&t.length>n[1].length}});if(s){d.h.setNodes(v,{start:!0,selected:!0},{at:s[1]});var u=d.a.above(v,{at:t,mode:"highest",match:function(e,t){return W.isTd(e)&&t.length>n[1].length}});if(u){d.h.setNodes(v,{start:!0,selected:!0},{at:u[1]});var h=d.a.above(v,{at:s[1],mode:"lowest",match:function(e){return d.b.isElement(e)&&e.type==r.TBODY}});if(h&&d.b.isElement(h[0])){var f=z.getSelectedTdInTdMap(h);if(null!=f){var b,O=Array.from(f.keys()).map((function(e){return[].concat(Object(p.a)(h[1]),[e.originRow,e.originCol])})),g=function(e,t){var n=new Set(e.map((function(e){return e.slice(e.length-2).join(",")}))),r=new Set(t.map((function(e){return e.slice(e.length-2).join(",")})));return{deselectedPath:t.filter((function(e){return!n.has(e.slice(e.length-2).join(","))})),newSelectedPath:e.filter((function(e){return!r.has(e.slice(e.length-2).join(","))}))}}(O,i.current.lastSelectedPaths),m=g.deselectedPath,y=g.newSelectedPath,T=Object(j.a)(y);try{for(T.s();!(b=T.n()).done;){var w=b.value;d.h.setNodes(v,{selected:!0},{at:w})}}catch(A){T.e(A)}finally{T.f()}var x,S=Object(j.a)(m);try{for(S.s();!(x=S.n()).done;){var E=x.value;d.h.unsetNodes(v,["selected","start"],{at:E})}}catch(A){S.e(A)}finally{S.f()}i.current.lastSelectedPaths=O}}}}}}}}}}),5),y=function(e){try{if(i.current.isBeginSelectTd&&(Math.abs(e.clientX-i.current.initX)>1||Math.abs(e.clientY-i.current.initY)>1)){var t=u.b.toSlateNode(v,e.target),n=u.b.findPath(v,t);m(d.a.point(v,i.current.mouseDownStartPoint),d.a.point(v,n))}}catch(r){}},T=function(e){i.current.isBeginSelectTd=!1,window.onmousemove=function(){},window.onmousedown=function(){},window.onmouseup=function(){}};return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{style:{display:"inline-block",position:"relative",width:"100%",overflowX:"auto",overflowY:"hidden"},children:Object(k.jsx)("table",Object(l.a)(Object(l.a)({border:"1"},t),{},{style:{tableLayout:"auto",wordBreak:"break-all",overflowX:"auto",overflowY:"hidden",borderCollapse:"collapse"},onMouseDown:function(e){e.stopPropagation();try{var t=u.b.toSlateNode(v,e.target),n=u.b.findPath(v,t);i.current.initX=e.clientX,i.current.initY=e.clientY,i.current.preMouseOnTdPath=null,i.current.lastSelectedPaths=[];var r=e.nativeEvent.path.find((function(e){return"TD"==e.tagName}));if(!r)return;if(!O&&!["resizer","columnSelector"].includes(e.target.className)&&"false"===r.contentEditable){i.current.isBeginSelectTd=!0,i.current.mouseDownStartPoint=n;var a,o=Object(j.a)(d.a.nodes(v,{at:[],match:function(e){return W.isTd(e)&&(1==e.selected||1==e.start)}}));try{for(o.s();!(a=o.n()).done;){var c=Object(s.a)(a.value,2)[1];i.current.lastSelectedPaths.push(c)}}catch(l){o.e(l)}finally{o.f()}i.current.preMouseOnTdPath=n,window.onmousemove=y,window.onmouseup=T}}catch(h){}},onMouseUp:function(){if(h){for(var e={},t=W.getSelectedTdsSize(v),n=0,r=Object.values(f);n<r.length;n++){var a=r[n];e[a]=h[a]}if(t>0){var o,i=W.getSelectedTdsPath(v),c=Object(j.a)(i);try{for(c.s();!(o=c.n()).done;){var l=o.value;d.h.setNodes(v,e,{at:l})}}catch(s){c.e(s)}finally{c.f()}return void b(null)}}},children:n}))}))},U=function(e){var t,n=W.getFirstSelectedTd(e);return n?t=d.a.above(e,{mode:"lowest",at:n[1],match:function(e){return W.isTable(e)}}):e.selection&&(t=d.a.above(e,{mode:"lowest",match:function(e){return W.isTable(e)}})),t},W={model:[{type:r.TABLE,children:[{type:r.TBODY,children:new Array(100).fill(0).map((function(e,t){return{type:r.TR,children:new Array(10).fill(0).map((function(e,n){return{type:r.TD,width:100,height:50,children:[{type:r.DIV,children:[{text:"string".concat(t,"-").concat(n)}]}]}}))}}))}]},{type:r.DIV,children:[{text:"1"}]}],isSelectedTd:function(e){return W.isTd(e)&&1==e.selected},isTable:function(e){return d.b.isElement(e)&&r.TABLE==e.type},isTd:function(e){return d.b.isElement(e)&&[r.TD].includes(e.type)},isInTd:function(e){return!(!e.selection||!d.f.isCollapsed(e.selection))&&T.getFirstAboveElementType(e)==r.TD},normalizeTable:function(e,t){var n=Object(s.a)(t,2),a=n[0],o=n[1];if(d.b.isElement(a)&&[r.TABLE].includes(a.type)){var i,c=Object(j.a)(d.c.children(e,o,{reverse:!0}));try{for(c.s();!(i=c.n()).done;){var l=Object(s.a)(i.value,2),u=l[0],h=l[1];if(u.type!=r.TBODY)return void d.h.removeNodes(e,{at:h})}}catch(R){c.e(R)}finally{c.f()}}if(d.b.isElement(a)&&[r.TBODY].includes(a.type)){var f=T.getParent(e,o),b=Object(s.a)(f,1)[0];if(!d.b.isElement(b)||b.type!=r.TABLE)return d.h.removeNodes(e,{at:o}),!0;var v,O=Object(j.a)(d.c.children(e,o,{reverse:!0}));try{for(O.s();!(v=O.n()).done;){var g=Object(s.a)(v.value,2),m=g[0],y=g[1];if(m.type!=r.TR)return void d.h.removeNodes(e,{at:y})}}catch(R){O.e(R)}finally{O.f()}}if(d.b.isElement(a)&&r.TR==a.type){var w=T.getParent(e,o),x=Object(s.a)(w,1)[0];if(!d.b.isElement(x)||![r.TBODY].includes(x.type))return d.h.removeNodes(e,{at:o}),!0;var S,E=Object(j.a)(d.c.children(e,o,{reverse:!0}));try{for(E.s();!(S=E.n()).done;){var A=Object(s.a)(S.value,2),N=A[0],D=A[1];if(N.type!=r.TD)return void d.h.removeNodes(e,{at:D})}}catch(R){E.e(R)}finally{E.f()}if(1==a.children.length&&d.c.child(a,0).type!=r.TD)return d.h.setNodes(e,{shouldEmpty:!0},{at:o}),!0;if(a.children.length>1){var C,I=Object(j.a)(d.c.children(e,o,{reverse:!0}));try{for(I.s();!(C=I.n()).done;){var L=Object(s.a)(C.value,2),M=L[0],k=L[1];if(d.g.isText(M))return d.h.removeNodes(e,{at:k}),!0}}catch(R){I.e(R)}finally{I.f()}}return d.h.setNodes(e,{shouldEmpty:!1},{at:o}),!0}if(d.b.isElement(a)&&r.TD==a.type){var B=T.getParent(e,o),P=Object(s.a)(B,1)[0];if(!d.b.isElement(P)||![r.TR].includes(P.type))return d.h.removeNodes(e,{at:o}),!0;if(1==a.children.length&&d.g.isText(d.c.child(a,0))&&""==d.a.string(e,o,{voids:!0}))return d.h.wrapNodes(e,{type:r.DIV,children:[{text:""}]},{at:[].concat(Object(p.a)(o),[0])}),!0}},tabEvent:function(e){var t=z.getEditingTd(e);t&&(d.h.deselect(e),z.findTargetTd(e,t,"right"))},shiftTabEvent:function(e){var t=z.getEditingTd(e);t&&(d.h.deselect(e),z.findTargetTd(e,t,"left"))},deleteRow:function(e){var t,n=[1/0,-1/0],a=W.getFirstSelectedTd(e);if(a){var o=d.a.above(e,{at:a[1],match:function(e){return d.b.isElement(e)&&e.type==r.TBODY}});if(o){var i=z.getTdMap(o).tdMap;if(i){var c=Array.from((null===(t=z.getSelectedTdInTdMap(o))||void 0===t?void 0:t.keys())||[]);if(0!=c.length)if(c.forEach((function(e){n[0]=Math.min(n[0],e.row),n[1]=Math.max(n[1],e.row+e.rowSpan)})),n[1]-n[0]!=i.length){for(var l=[],s=n[0];s<n[1];s++){l.unshift([].concat(Object(p.a)(o[1]),[s]));for(var u=0;u<i[s].length;u++){var h=i[s][u];h.rowSpan--;var f=[].concat(Object(p.a)(o[1]),[h.originRow,h.originCol]);0!=h.rowSpan&&d.h.setNodes(e,{rowSpan:h.rowSpan},{at:f}),u+=h.colSpan-1}}for(var b=n[0];b<n[1];b++)for(var v=0;v<i[b].length;v++){var j=i[b][v];if(j.rowSpan>0&&j.row>=n[0]&&j.row==b&&j.col==v){var O=n[1],g=i[O][j.col-1];g?d.h.moveNodes(e,{at:[].concat(Object(p.a)(o[1]),[j.originRow,j.originCol]),to:[].concat(Object(p.a)(o[1]),[O,g.originCol+1])}):d.h.moveNodes(e,{at:[].concat(Object(p.a)(o[1]),[j.originRow,j.originCol]),to:[].concat(Object(p.a)(o[1]),[O,0])})}v+=j.colSpan-1}l.forEach((function(t){d.h.removeNodes(e,{at:t})})),W.resetSelectedTds(e)}else d.h.removeNodes(e,{at:d.e.parent(o[1])})}}}},deleteColumn:function(e){var t,n=[1/0,-1/0],a=W.getFirstSelectedTd(e);if(a){var o=d.a.above(e,{at:a[1],match:function(e){return d.b.isElement(e)&&e.type==r.TBODY}});if(o){var i=z.getTdMap(o).tdMap;if(i){var c=Array.from((null===(t=z.getSelectedTdInTdMap(o))||void 0===t?void 0:t.keys())||[]);if(0!=c.length)if(c.forEach((function(e){n[0]=Math.min(n[0],e.col),n[1]=Math.max(n[1],e.col+e.colSpan)})),n[1]-n[0]!=i[0].length){for(var l=[],s=n[0];s<n[1];s++)for(var u=0;u<i.length;u++){var h=i[u][s];h.colSpan--;var f=[].concat(Object(p.a)(o[1]),[h.originRow,h.originCol]);0==h.colSpan?l.push(f):d.h.setNodes(e,{colSpan:h.colSpan},{at:f}),u+=h.rowSpan-1}l.sort((function(e,t){var n=e[e.length-2],r=t[t.length-2],a=e[e.length-1],o=t[t.length-1];return n>r?-1:n==r?o-a:1})),l.forEach((function(t){d.h.removeNodes(e,{at:t})})),W.resetSelectedTds(e)}else d.h.removeNodes(e,{at:d.e.parent(o[1])})}}}},insertColumn:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=W.getFirstSelectedTd(e);if(!a&&e.selection){var o=d.a.nodes(e,{mode:"lowest",match:function(e){return W.isTd(e)}}),i=Object(s.a)(o,1);a=i[0]}if(a){var c=d.a.parent(e,a[1]);if(c){var l=d.a.parent(e,c[1]);if(l){var h=z.getTdMap(l),f=h.tdMap,b=z.getSelectedTdInTdMap(l);if(d.b.isElement(a[0])&&d.b.isElement(a[0])&&d.b.isElement(l[0])){var v,O=u.b.toDOMNode(e,e),m=function(){return g.a.cloneDeep(new Array(n).fill(0).map((function(){return g.a.cloneDeep({type:r.TD,width:O.offsetWidth/10,height:P,children:[{type:r.DIV,children:[{text:""}]}]})})))},y=a[1].slice(a[1].length-2),T=Object(s.a)(y,2),w=T[0],x=T[1];if(b&&b.size>0){v="after"==t?-1/0:1/0;var S,E=Object(j.a)(b.keys());try{for(E.s();!(S=E.n()).done;){var A=S.value;v="after"==t?Math.max(v,A.col+A.colSpan):Math.min(v,A.col)}}catch(H){E.e(H)}finally{E.f()}}else{v=-1;for(var N=0;N<f[w].length;N++){var D=f[w][N];if(D.originCol==x&&D.originRow==w){v=D.col+("after"==t?D.colSpan:0);break}}}if(null!=v&&Number.isFinite(v)){for(var C=0;C<f.length;C++){var I=f[C][v];if(I){var L=[].concat(Object(p.a)(l[1]),[I.originRow,I.originCol]);I.col==v?d.h.insertNodes(e,m(),{at:[].concat(Object(p.a)(l[1]),[C,I.originCol])}):(d.h.setNodes(e,{colSpan:I.colSpan+1},{at:L}),C+=I.rowSpan-1)}else{var M,k,B,R;d.h.insertNodes(e,m(),{at:[].concat(Object(p.a)(l[1]),[C,(null===(M=l[0])||void 0===M||null===(k=M.children)||void 0===k||null===(B=k[C])||void 0===B||null===(R=B.children)||void 0===R?void 0:R.length)||0])})}}W.resetSelectedTds(e)}}}}}},insertRow:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=W.getFirstSelectedTd(e);if(!a&&e.selection){var o=d.a.nodes(e,{mode:"lowest",match:function(e){return W.isTd(e)}}),i=Object(s.a)(o,1);a=i[0]}if(a){var c=d.a.parent(e,a[1]);if(c){var l=d.a.parent(e,c[1]);if(l){var h=z.getTdMap(l),f=h.tdMap,b=z.getSelectedTdInTdMap(l);if(d.b.isElement(a[0])&&d.b.isElement(a[0])&&d.b.isElement(l[0])){var v,O=u.b.toDOMNode(e,e),m={type:r.TD,width:O.offsetWidth/10,height:P,children:[{type:r.DIV,children:[{text:""}]}]},y=a[1].slice(a[1].length-2),T=Object(s.a)(y,2),w=T[0],x=T[1];if(b&&b.size>0){v="after"==t?-1/0:1/0;var S,E=Object(j.a)(b.keys());try{for(E.s();!(S=E.n()).done;){var A=S.value;v="after"==t?Math.max(v,A.row+A.rowSpan):Math.min(v,A.row)}}catch(k){E.e(k)}finally{E.f()}}else{v=-1;for(var N=0;N<f[w].length;N++){var D=f[w][N];if(D.originCol==x&&D.originRow==w){v=D.row+("after"==t?D.rowSpan:0);break}}}if(-1!=v&&Number.isFinite(v)){var C=function(e){return new Array(n).fill(0).map((function(){return g.a.cloneDeep({type:r.TR,children:new Array(e).fill(0).map((function(){return g.a.cloneDeep(m)}))})}))};if(null!=f[v]){for(var I=0,L=0;L<f[v].length;L++){var M=f[v][L];M.row==v?I++:(d.h.setNodes(e,{rowSpan:M.rowSpan+1},{at:[].concat(Object(p.a)(l[1]),[M.originRow,M.originCol])}),L+=M.colSpan-1)}d.h.insertNodes(e,C(I),{at:[].concat(Object(p.a)(l[1]),[v])}),W.resetSelectedTds(e)}else d.h.insertNodes(e,C(f[0].length),{at:[].concat(Object(p.a)(l[1]),[v])})}}}}}},splitTd:function(e){var t=d.a.nodes(e,{at:[],match:function(e){return W.isSelectedTd(e)}});if(t){var n,a=null,o=Object(j.a)(t);try{var i=function(){var t=Object(s.a)(n.value,2),o=t[0],i=t[1];if(!d.b.isElement(o))return"continue";if(d.h.setNodes(e,{colSpan:1,rowSpan:1},{at:i}),d.h.unsetNodes(e,["selected","start"],{at:i}),(!o.colSpan||o.colSpan<2)&&(!o.rowSpan||o.rowSpan<2))return"continue";if(!a&&!(a=d.a.above(e,{at:i,mode:"lowest",match:function(e){return d.b.isElement(e)&&e.type==r.TBODY}})))return"continue";for(var c=d.a.parent(e,i),l=i[i.length-1],u=i[i.length-2],h=o.colSpan||1,f=o.rowSpan||1,b=0,v=0;v<l;v++){var j,O,m;b+=(null===(j=c[0])||void 0===j||null===(O=j.children)||void 0===O||null===(m=O[v])||void 0===m?void 0:m.colSpan)||1}for(var y=function(e){for(var t=0,n=0;n<e[0].children.length;n++)if((t+=e[0].children[n].colSpan||1)==b)return n+1;return 0},T=u,w=0;w<f;w++,T++){var x=T==u,S=y(d.a.node(e,[].concat(Object(p.a)(a[1]),[T]))),E=h-(x?1:0);d.h.insertNodes(e,new Array(E).fill(0).map((function(){return g.a.cloneDeep({type:r.TD,children:[{type:r.DIV,children:[{text:""}]}]})})),{at:[].concat(Object(p.a)(a[1]),[T,S+(x?1:0)])})}return W.splitTd(e),W.resetSelectedTds(e),{v:void 0}};for(o.s();!(n=o.n()).done;){var c=i();if("continue"!==c&&"object"===typeof c)return c.v}}catch(l){o.e(l)}finally{o.f()}}},mergeTd:function(e){var t=1==W.getSelectedTdsSize(e),n=W.getFirstSelectedTd(e);if(n&&null!=t){var a=d.a.above(e,{at:n[1],mode:"lowest",match:function(e){return d.b.isElement(e)&&e.type==r.TBODY}});if(a){var o=z.getSelectedTdInTdMap(a);if(o){var i=a[1],c=Array.from(null===o||void 0===o?void 0:o.keys());c.sort((function(e,t){return e.row>t.row?1:e.row==t.row?e.col-t.col:-1}));var l=c[0],u=0,h=0;c.forEach((function(e){u=Math.max(u,e.colSpan+e.col-l.col),h=Math.max(h,e.rowSpan+e.row-l.row)}));var f=[].concat(Object(p.a)(i),[l.originRow,l.originCol]);d.h.setNodes(e,{colSpan:u,rowSpan:h},{at:f});var b=d.a.node(e,f);c.forEach((function(t){if(t.col!=l.col||t.row!=l.row){var n,r=[].concat(Object(p.a)(i),[t.originRow,t.originCol]),a=Object(j.a)(d.c.children(e,r,{reverse:!0}));try{for(a.s();!(n=a.n()).done;){var o=Object(s.a)(n.value,2)[1];""!=d.a.string(e,o,{voids:!0})&&d.h.moveNodes(e,{at:o,to:[].concat(Object(p.a)(b[1]),[b[0].children.length])})}}catch(c){a.e(c)}finally{a.f()}d.h.setNodes(e,{toBeDeleted:!0},{at:r})}})),d.h.removeNodes(e,{at:[],match:function(e){return W.isTd(e)&&1==e.toBeDeleted}}),W.resetSelectedTds(e)}}}},deleteTable:function(e){var t=U(e);t&&(d.h.removeNodes(e,{at:t[1]}),W.resetSelectedTds(e))},insertDivAfterTable:function(e){var t=U(e);if(t){var n=T.getPath(t[1],"next");d.h.insertNodes(e,{type:r.DIV,children:[{text:"write something..."}]},{at:n}),W.resetSelectedTds(e)}},insertDivBeforeTable:function(e){var t=U(e);t&&(d.h.insertNodes(e,{type:r.DIV,children:[{text:"write something..."}]},{at:t[1]}),W.resetSelectedTds(e))},getSelectedTdsPath:function(e){var t,n=D(e),r=[],a=Object(j.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value.split(",").map((function(e){return+e}));r.push(o)}}catch(i){a.e(i)}finally{a.f()}return r},getSelectedTds:function(e){var t,n=D(e),r=[],a=Object(j.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value.split(",").map((function(e){return+e})),i=d.a.node(e,o);r.push(i)}}catch(c){a.e(c)}finally{a.f()}return r},getFirstSelectedTd:function(e){var t=D(e),n=Array.from(t).sort((function(e,t){return e>t?1:e===t?0:-1}));if(0==n.length)return null;var r=n[0].split(",").map((function(e){return+e}));return d.a.node(e,r)},getEditingTds:function(e){var t,n=L(e),r=[],a=Object(j.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value.split(",").map((function(e){return+e}));r.push(d.a.node(e,o))}}catch(i){a.e(i)}finally{a.f()}return r},getEditingTdsPath:function(e){return L(e)},getSelectedTdsSize:function(e){return D(e).size},resetSelectedTds:function(e){var t=Array.from(d.a.nodes(e,{at:[],match:function(e){return W.isSelectedTd(e)}})).map((function(e){return e[1].join(",")}));C(new Set(t));var n=Array.from(d.a.nodes(e,{at:[],match:function(e){return W.isTd(e)&&1==e.canTdEdit}})).map((function(e){return e[1].join(",")}));M(new Set(n))},copyCells:function(e){var t,n=W.getSelectedTds(e);S(n.sort((function(e,t){var n=e[1].slice(e[1].length-2),r=Object(s.a)(n,2),a=r[0],o=r[1],i=t[1].slice(t[1].length-2),c=Object(s.a)(i,2),l=c[0],d=c[1];return a>l?1:a===l?o-d:-1})));var a=d.a.above(e,{at:n[0][1],mode:"lowest",match:function(e){return d.b.isElement(e)&&e.type===r.TBODY}});if(a){var o=Array.from((null===(t=z.getSelectedTdInTdMap(a))||void 0===t?void 0:t.keys())||[]),i=z.getTdMap(a).startPoins,c=0,l=0;o.forEach((function(e){var t=e.row,n=e.col;c=Math.max(n+(e.colSpan||1)-i[0].col,c),l=Math.max(t+(e.rowSpan||1)-i[0].row,l)})),A({copyedAreaWidth:c,copyedAreaHeight:l})}},pasteCells:function(e){var t=w.copyedContent;if(t){var n=Array.from(W.getSelectedTdsPath(e));z.clearTd(e);for(var a=0,o=n;a<o.length;a++){var i=o[a];d.h.insertNodes(e,g.a.cloneDeep(t),{at:[].concat(Object(p.a)(i),[0])}),d.h.removeNodes(e,{at:[].concat(Object(p.a)(i),[Array.from(d.c.children(e,i)).length-1])})}}else{var c=E();if(c){var u={copyedAreaHeight:w.copyedAreaHeight,copyedAreaWidth:w.copyedAreaWidth},h=u.copyedAreaWidth,f=u.copyedAreaHeight,b=Array.from(W.getSelectedTds(e)),v=d.a.above(e,{at:b[0][1],mode:"lowest",match:function(e){return d.b.isElement(e)&&e.type===r.TBODY}});if(v)if(1!=c.length){var O=z.getTdMap(v),m=O.tdMap,y=O.startPoins[0];if(y.row+f>m.length||y.col+h>m[0].length)return H.b.error("\u65e0\u6cd5\u5b8c\u6574\u8986\u76d6\u76ee\u6807\u533a\u57df"),!1;for(var T=[],x=y.row;x<m.length&&x<y.row+f;x++)for(var S=y.col;S<m[0].length&&S<y.col+h;S++){var A=m[x][S];if(T.unshift([A.originRow,A.originCol]),A.col<y.col||A.col+A.colSpan>y.col+h||A.row<y.row||A.row+A.rowSpan>y.row+f)return H.b.error("\u65e0\u6cd5\u5b8c\u6574\u8986\u76d6\u76ee\u6807\u533a\u57df"),!1}g.a.uniqWith(T,(function(e,t){return e.join(",")===t.join(",")})).forEach((function(t){d.h.removeNodes(e,{at:[].concat(Object(p.a)(v[1]),Object(p.a)(t))})}));for(var N=c.slice().reduce((function(e,t){return Math.min(e,t[1][t[1].length-2])}),1/0),D=function(t,n){var r=m[n][y.col],a=[];c.forEach((function(e){var n=e[1];n[n.length-2]===t&&a.push(Object(l.a)(Object(l.a)({},e[0]),{},{selected:!1,start:!1,canTdEdit:!1}))})),a.length>0&&d.h.insertNodes(e,g.a.cloneDeep(a),{at:[].concat(Object(p.a)(v[1]),[n,r.originCol])})},C=y.row,I=N;C<y.row+f;C++,I++)D(I,C);z.deselectAllTd(e),W.resetSelectedTds(e)}else{var L=c[c.length-1];if(!L)return;b.forEach((function(t){var n=t[0].children.length;d.h.insertNodes(e,g.a.cloneDeep(L[0].children),{at:[].concat(Object(p.a)(t[1]),[0])});var r,a=Object(j.a)(d.c.children(e,t[1],{reverse:!0}));try{for(a.s();!(r=a.n()).done;){var o=Object(s.a)(r.value,2)[1];if(0==n--)break;d.h.removeNodes(e,{at:o})}}catch(i){a.e(i)}finally{a.f()}}))}}}}},q=n(112),K=n(326),G=n(79),Q=n(324),Y=n(319),V=n(320),X=n(321),J=n(329),Z=n(330),_=n(322),$=n(331),ee=n(332),te=n(333),ne=n(334),re=n(335),ae=n(336),oe=n(337),ie=n(338),ce=n(339),le=n(340),se=n(341),de=n(342),ue=n(343),he=n(344),fe=n(345),be=n(346),ve=n(347),je=n(348),pe=n(349),Oe=n(350),ge=n(351),me=n(352),ye=n(353),Te=n(354),we=n(355),xe=(n(207),n(182)),Se=n(177),Ee=n.n(Se),Ae=function e(t){if(d.a.isEditor(t)){var n=t.children.map((function(t){return e(t)})).join("");return'<html>\n      <style>\n      body{\n        font-family: "Chinese Quote", "Segoe UI", Roboto, "PingFang SC",\n    "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial,\n    sans-serif;\n    font-size:14px;\n    line-height: 1.5715;\n    }\n    *, *::before, *::after{\n      box-sizing:border-box;\n    }\n    table{\n      border-collapse: collapse;\n    }\n    h1,h2,h3,h4{\n      margin-bottom:0;\n    }\n    ul,ol{\n      margin-bottom:0;\n    }\n    td{\n      overflow:hidden;\n    }\n      </style>\n      <body>'.concat(n,"</body>\n    </html>")}var a=function(e){var t={};if(d.g.isText(e)||d.b.isElement(e)){for(var n=0,a=Object.values(f);n<a.length;n++){var o=a[n];[f.LineThrough,f.Underline].includes(o)&&!0===e[o]?t.textDecoration=(t.textDecoration||"")+"".concat(o," "):o!==f.BOLD||!0!==e[o]?o!==f.ITALIC||!0!==e[o]?[f.FontSize,f.BGColor,f.Color,f.TextAlign].includes(o)&&null!=e[o]&&(t[o]=e[o]):t.fontStyle=o:t.fontWeight=o}e.type===r.LIST_ITEM&&null!=e.liColor&&(t.color=e.liColor),e.type===r.TD&&(null!=e.width&&(t.maxWidth=t.minWidth=t.width=e.width+"px"),null!=e.height&&(t.height=e.height+"px"),t.padding="4px"),e.type===r.TABLE&&(t.borderCollapse="collapse")}return g.a.map(t,(function(e,t){return t.replace(/^([a-z]+)([A-Z])([a-z]+)$/g,"$1-$2$3").toLocaleLowerCase()+":"+e})).join(";")}(t);if(a=""===a?"":'style="'.concat(a,'"'),d.g.isText(t)){var o=Ee()(t.text);return o="<span ".concat(a,">").concat(o,"</span>")}if(!d.b.isElement(t))return"";var i=t.children.map((function(t){return e(t)})).join(""),c=function(e){var t="";return d.b.isElement(e)&&(e.colSpan&&(t+="colspan=".concat(e.colSpan," ")),e.rowSpan&&(t+="rowspan=".concat(e.rowSpan," ")),e.url&&(t+="".concat(e.type===r.LINK?"href":"src","=").concat(e.url," ")),e.width&&(t+='width="'.concat(e.width,'px" ')),e.height&&(t+='height="'.concat(e.height,'px" '))),t.trim()}(t);switch(t.type){case r.NUMBER_LIST:return"<ol ".concat(c," ").concat(a,">").concat(i,"</ol>");case r.NORMAL_LIST:return"<ul ".concat(c," ").concat(a,">").concat(i,"</ul>");case r.LIST_ITEM:return"<li ".concat(c," ").concat(a,">").concat(i,"</li>");case r.DIV:return"<div ".concat(c," ").concat(a,">").concat(i,"</div>");case r.H1:return"<h1 ".concat(c," ").concat(a,">").concat(i,"</h1>");case r.H2:return"<h2 ".concat(c," ").concat(a,">").concat(i,"</h2>");case r.H3:return"<h3 ".concat(c," ").concat(a,">").concat(i,"</h3>");case r.H4:return"<h4 ".concat(c," ").concat(a,">").concat(i,"</h4>");case r.IMG:return"<img ".concat(c,' src="').concat(t.url,'" />');case r.LINK:return"<a ".concat(c,' href="').concat(t.url,'">').concat(i,"</a>");case r.TABLE:return'<table border="1" '.concat(c," ").concat(a,">").concat(i,"</table>");case r.TBODY:return"<tbody ".concat(c," ").concat(a,">").concat(i,"</tbody>");case r.TR:return"<tr ".concat(c," ").concat(a,">").concat(i,"</tr>");case r.TD:return"<td ".concat(c," ").concat(a,">").concat(i,"</td>");default:return i}},Ne=function e(t){var n,a;if(3===t.nodeType)return t.textContent;if(1!==t.nodeType)return null;var o={};null===(n=t.style)||void 0===n||null===(a=n.cssText)||void 0===a||a.split(";").forEach((function(e){var t=e.split(":"),n=Object(s.a)(t,2),r=n[0],a=n[1];if(!r)return null;var i=r.trim().replace(/^([a-z]+)-([a-z])([a-z]+)$/gi,(function(e,t,n,r){return t+n.toUpperCase()+r})),c=a.trim();"textDecoration"===i?(c.includes("underline")&&(o[f.Underline]=!0),c.includes("line-through")&&(o[f.LineThrough]=!0)):"bold"===c?o[f.BOLD]=!0:"italic"===c?o[f.ITALIC]=!0:Object.values(f).includes(i)&&(o[i]=c),"width"===i&&(o.width=parseInt(c)),"height"===i&&(o.height=parseInt(c))}));var i=Array.from(t.childNodes).map(e);switch(0===i.length&&(i=[{text:""}]),t.nodeName){case"BR":return"\n";case"BODY":return Object(m.a)("fragment",{},i);case"P":case"DIV":var c=(Array.from(null===t||void 0===t?void 0:t.childNodes)||[]).every((function(e){return 3===e.nodeType}));return Object(m.a)("element",Object(l.a)({type:c?r.DIV:r.Block},o),i);case"H1":return Object(m.a)("element",Object(l.a)({type:r.H1},o),i);case"H2":return Object(m.a)("element",Object(l.a)({type:r.H2},o),i);case"H3":return Object(m.a)("element",Object(l.a)({type:r.H3},o),i);case"H4":return Object(m.a)("element",Object(l.a)({type:r.H4},o),i);case"A":return Object(m.a)("element",Object(l.a)({type:r.LINK,url:t.getAttribute("href")},o),i);case"IMG":return Object(m.a)("element",Object(l.a)({type:r.IMG,url:t.getAttribute("src")},o),i);case"UL":return Object(m.a)("element",Object(l.a)({type:r.NORMAL_LIST},o),i);case"OL":return Object(m.a)("element",Object(l.a)({type:r.NUMBER_LIST},o),i);case"LI":return Object(m.a)("element",Object(l.a)({type:r.LIST_ITEM},o),i);case"TABLE":return Object(m.a)("element",Object(l.a)({type:r.TABLE},o),i);case"TBODY":return Object(m.a)("element",Object(l.a)({type:r.TBODY},o),i);case"TR":return Object(m.a)("element",Object(l.a)({type:r.TR},o),i);case"TD":return Object(m.a)("element",Object(l.a)(Object(l.a)({type:r.TD},o),{},{rowSpan:t.getAttribute("rowspan")||1,colSpan:t.getAttribute("colspan")||1}),i);default:return t.textContent}},De=function(e){var t=(new DOMParser).parseFromString(e,"text/html");return Ne(t.body)},Ce=50,Ie=function(e){return null==W.getFirstSelectedTd(e)},Le=function(e){var t=Object(u.f)(),n=Object(a.useState)(""),r=Object(s.a)(n,2),o=r[0],i=r[1],c=Object(a.useState)(!1),l=Object(s.a)(c,2),h=l[0],f=l[1],b=Object(a.useRef)({_getColor:g.a.debounce((function(){i(v())}),Ce)}),v=function(){var n=W.getFirstSelectedTd(t);if(n)return d.b.isElement(n[0])&&(n[0][e.mark]||"unset");if(!t.selection)return"unset";if(!e.mark)return"unset";var r=d.a.marks(t);return r&&(null===r||void 0===r?void 0:r[null===e||void 0===e?void 0:e.mark])||window.getComputedStyle(document.body).color};return Object(a.useEffect)((function(){b.current._getColor()})),Object(a.useMemo)((function(){return Object(k.jsx)(q.a,{title:e.title,zIndex:99,mouseLeaveDelay:0,mouseEnterDelay:0,children:Object(k.jsx)("div",{onMouseLeave:function(){f(!1)},children:Object(k.jsx)(K.a,{placement:"bottomCenter",overlayStyle:{zIndex:999},visible:h,overlay:function(){return Object(k.jsx)(Me,{value:o,onChange:function(t){var n;null===e||void 0===e||null===(n=e.onChange)||void 0===n||n.call(e,t),f(!1)}})},trigger:["click"],getPopupContainer:function(e){return e.parentElement||document.body},children:Object(k.jsx)(G.a,{type:"text",style:{color:o},onMouseDown:function(e){e.preventDefault(),f(!0)},children:e.icon})})})})}),[o,h])},Me=function(e){var t=Object(a.useState)({hex:e.value}),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(k.jsxs)("div",{style:{padding:8,display:"flex",justifyContent:"flex-start",backgroundColor:"white",flexDirection:"column"},className:"cyEditor__toolbar__colorPanelWrapper",children:[Object(k.jsx)(xe.a,{color:r.hex,onChange:function(t){var n;o(t),null===e||void 0===e||null===(n=e.onChange)||void 0===n||n.call(e,t.hex)}}),Object(k.jsx)(G.a,{icon:Object(k.jsx)(J.a,{}),size:"small",onClick:function(){var t;null===e||void 0===e||null===(t=e.onChange)||void 0===t||t.call(e,"unset"),o({hex:""})},children:"\u91cd\u7f6e"})]})},ke=function(e){var t=Object(u.f)(),n=Object(a.useState)(!1),r=Object(s.a)(n,2),o=r[0],i=r[1],c=Object(a.useState)(""),l=Object(s.a)(c,2),d=l[0],h=l[1],f=Object(a.useRef)(),b=Object(a.useRef)({getValue:g.a.debounce((function(){h(e.getValue(t))}),Ce)});return Object(a.useEffect)((function(){b.current.getValue()})),Object(a.useMemo)((function(){return Object(k.jsx)(q.a,{title:e.title,zIndex:99,mouseEnterDelay:0,mouseLeaveDelay:0,children:Object(k.jsxs)("div",{ref:f,style:{width:100,position:"relative"},className:"cyEditor__toolbar__button",onMouseLeave:function(){i(!1)},children:[Object(k.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:1,cursor:"pointer"},onMouseDown:function(e){e.preventDefault(),i(!o)}}),Object(k.jsx)(Q.a,{placeholder:e.title,value:d,bordered:!1,style:{width:"100%"},open:o,dropdownClassName:"cyEditor__toolbar__dropdown",getPopupContainer:function(e){return e.parentElement||document.body},onSelect:function(n){var r;u.b.focus(t),null===e||void 0===e||null===(r=e.afterSelect)||void 0===r||r.call(e,n),i(!1)},children:e.options.map((function(t){var n;return Object(k.jsx)(Q.a.Option,{value:String(t),children:(null===e||void 0===e||null===(n=e.optionLabelRender)||void 0===n?void 0:n.call(e,t))||t},t)}))})]})})}),[o,d])},Be=function(e){var t=Object(u.f)(),n=Object(a.useState)("text"),r=Object(s.a)(n,2),o=r[0],i=r[1],l=Object(a.useRef)({getType:g.a.debounce((function(){i(e.mark&&function(e,t){try{var n=W.getFirstSelectedTd(e);if(n&&d.b.isElement(n[0]))return n[0][t];if(!e.selection)return null;var r=d.a.marks(e);return!0===(null===r||void 0===r?void 0:r[t])}catch(a){return console.error(a),!1}}(t,e.mark)?"link":"text")}),Ce)});Object(a.useEffect)((function(){l.current.getType()}));return Object(a.useMemo)((function(){return Object(k.jsx)(q.a,{title:e.title,mouseEnterDelay:0,mouseLeaveDelay:0,children:Object(k.jsx)(G.a,{className:"cyEditor__toolbar__button",type:o,onMouseDown:function(n){n.preventDefault(),e.mark&&function(e){var n=W.getSelectedTds(t);if(n.length>0)return u.b.focus(t),void n.forEach((function(n){d.b.isElement(n[0])&&(n[0][e]?d.h.unsetNodes(t,[e],{at:n[1]}):d.h.setNodes(t,Object(c.a)({},e,!0),{at:n[1]}))}));if(t.selection){var r=d.a.marks(t);(null===r||void 0===r?void 0:r[e])?d.a.removeMark(t,e):d.a.addMark(t,e,!0)}}(e.mark)},children:e.children})})}),[o])},Pe=function(e){return Object(k.jsx)(q.a,{title:e.title,mouseEnterDelay:0,mouseLeaveDelay:0,children:Object(k.jsx)(G.a,{className:"cyEditor__toolbar__button",type:"text",disabled:e.disabled,onMouseDown:function(t){t.preventDefault(),e.mousedownFunc(t)},children:e.children})})},Re=function(e){var t=Object(u.f)(),n=e.mousedownFunc,r=e.title,o=e.disabledCondition,i=void 0===o?function(){return!1}:o,c=Object(a.useState)(!1),l=Object(s.a)(c,2),d=l[0],h=l[1],f=Object(a.useRef)({_isDisabled:g.a.debounce((function(){h(i(t))}),Ce)});return Object(a.useEffect)((function(){f.current._isDisabled()})),Object(k.jsx)(q.a,{title:r,mouseEnterDelay:0,mouseLeaveDelay:0,children:Object(k.jsx)(G.a,{className:"cyEditor__toolbar__button",type:"text",disabled:d,onMouseDown:function(e){e.preventDefault(),n(e)},children:e.children})})},ze=function(e){var t=Object(u.f)(),n=Object(a.useContext)(nt).setSavedMarks,r=Object(a.useState)(!1),o=Object(s.a)(r,2),i=o[0],c=o[1],h=Object(a.useRef)({isDisabled:g.a.debounce((function(){var e=W.getSelectedTdsSize(t)>1,n=W.getFirstSelectedTd(t);c(!(null!=t.selection||n&&!e))}),Ce)});Object(a.useEffect)((function(){h.current.isDisabled()}));return Object(a.useMemo)((function(){return Object(k.jsx)(Pe,{title:"\u683c\u5f0f\u5237",disabled:i,mousedownFunc:function(){!function(){try{var e=W.getSelectedTdsSize(t)>1,r=W.getFirstSelectedTd(t);if(r&&!e&&d.b.isElement(r[0]))return void n(r[0]||null);if(!t.selection)return null;var a=d.a.marks(t),o=d.a.above(t,{mode:"lowest",match:function(e){return T.isTextWrapper(e)}});n(o?Object(l.a)(Object(l.a)({},a),o[0])||null:a||null)}catch(i){console.warn(i)}}()},children:Object(k.jsx)(Z.a,{})})}),[i])},He=function(e){var t=Object(u.f)(),n=Object(a.useState)(!1),o=Object(s.a)(n,2),i=o[0],c=o[1],l=Object(a.useState)(""),h=Object(s.a)(l,2),f=h[0],b=h[1],v=Object(a.useRef)(),j=Object(a.useState)(!1),p=Object(s.a)(j,2),O=p[0],m=p[1],y=Object(a.useRef)({_isDisabled:g.a.debounce((function(){m(null==t.selection)}),Ce)});Object(a.useEffect)((function(){y.current._isDisabled()}));var w=function(e){var t=v.current,n=e.target,r=e.target.parentNode;if(t&&n&&r){Array.from(t.querySelectorAll("td")).forEach((function(e){e.style.backgroundColor="unset"}));for(var a=Array.from(t.querySelectorAll("tr")),o=0;o<=r.rowIndex;o++)for(var i=a[o],c=Array.from(i.querySelectorAll("td")),l=0;l<=n.cellIndex;l++){c[l].style.backgroundColor="rgba(180,215,255,.7)"}b("".concat(n.cellIndex+1,"x").concat(r.rowIndex+1))}},x=function(){var e=Number(f.split("x")[0]),n=Number(f.split("x")[1]);if(Number.isInteger(e)&&Number.isInteger(n)&&(u.b.focus(t),t.selection)){var a=d.a.nodes(t,{mode:"lowest",match:function(e){return T.isTextWrapper(e)}}),o=Object(s.a)(a,1)[0];if(o){var i=u.b.toDOMNode(t,o[0]);if(i.offsetParent){var l=i.offsetWidth-2;d.h.insertNodes(t,{type:r.TABLE,wrapperWidthWhenCreated:l,children:[{type:r.TBODY,children:new Array(n).fill("0").map((function(){return{type:r.TR,children:new Array(e).fill("0").map((function(){return{type:r.TD,width:l/e,height:P,children:[{type:r.DIV,children:[{text:""}]}]}}))}}))}]}),d.h.deselect(t),c(!1)}}}};return Object(a.useMemo)((function(){return Object(k.jsx)("div",{onMouseLeave:function(){c(!1)},children:Object(k.jsx)(K.a,{placement:"bottomCenter",overlayStyle:{zIndex:999},visible:i,overlay:function(){return Object(k.jsxs)("div",{className:"cyEditor__toolbar__tablePanelWrapper",style:{width:200,padding:8,display:"flex",justifyContent:"flex-start",backgroundColor:"white",flexDirection:"column"},children:[i?Object(k.jsx)("table",{border:"1",ref:v,children:Object(k.jsx)("tbody",{children:new Array(10).fill(0).map((function(e,t){return Object(k.jsx)("tr",{children:new Array(10).fill(0).map((function(e,t){return Object(k.jsx)("td",{onMouseEnter:w,onClick:x},t)}))},t)}))})}):null,Object(k.jsx)("div",{style:{textAlign:"right"},children:f})]})},trigger:["click"],getPopupContainer:function(e){return e.parentElement||document.body},children:Object(k.jsx)(q.a,{title:e.title,zIndex:99,mouseLeaveDelay:0,mouseEnterDelay:0,children:Object(k.jsx)(G.a,{type:"text",onMouseDown:function(e){e.preventDefault(),c(!0)},disabled:O,children:e.icon})})})})}),[i,O,f])},Fe=function(e){var t=Object(a.useContext)(nt),n=t.readOnly,r=t.setReadOnly,o=n?"\u7f16\u8f91\u6a21\u5f0f":"\u53ea\u8bfb\u6a21\u5f0f";return Object(k.jsx)(Pe,{title:o,mousedownFunc:function(){r(!n)},children:o})},Ue=function(e){var t=Object(u.g)(),n=function(e){var n=W.getSelectedTds(t);n.length>0?n.forEach((function(n){d.h.setNodes(t,{type:e},{at:n[1],match:function(e){return T.isTextWrapper(e)}})})):d.h.setNodes(t,{type:e},{hanging:!0,mode:"lowest",match:function(e){return T.isTextWrapper(e)}})};return Object(k.jsx)("div",{className:"cyEditor__toolBar",style:{position:"relative",marginBottom:4},children:Object(k.jsxs)(Y.a,{align:"middle",children:[Object(k.jsx)(V.a,{children:Object(k.jsx)(ke,{getValue:function(e){var t=d.a.nodes(e,{match:function(e){return T.isTextWrapper(e)}}),n=Object(s.a)(t,1)[0];if(!n)return"\u6b63\u6587";var r=d.b.isElement(n[0])&&n[0].type;return"div"==r||0==r?"\u6b63\u6587":r.toUpperCase()},options:["H1","H2","H3","H4","\u6b63\u6587"],optionLabelRender:function(e){return Object(k.jsx)("span",{children:e})},title:"\u5b57\u4f53\u6837\u5f0f",afterSelect:function(e){"H1"==e&&n(r.H1),"H2"==e&&n(r.H2),"H3"==e&&n(r.H3),"H4"==e&&n(r.H4),"\u6b63\u6587"==e&&n(r.DIV)}})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(ke,{getValue:function(e){return String(function(e,t){try{var n=W.getFirstSelectedTd(e);if(n&&d.b.isElement(n[0]))return n[0][t];if(!e.selection)return null;var r=d.a.marks(e);return null===r||void 0===r?void 0:r[t]}catch(a){return console.error(a),!1}}(e,f.FontSize)||14)},options:[12,13,14,15,16,19,22,24,29,32,40,48],optionLabelRender:function(e){return"".concat(e,"px")},title:"\u5b57\u4f53\u5927\u5c0f",afterSelect:function(e){var n=W.getSelectedTds(t);if(n.length>0){var r,a=Object(j.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;d.h.setNodes(t,Object(c.a)({},f.FontSize,Number(e)),{at:o[1]})}}catch(i){a.e(i)}finally{a.f()}}else t.selection&&d.a.addMark(t,f.FontSize,Number(e))}})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(ke,{getValue:function(e){var t=W.getFirstSelectedTd(e);if(t&&d.b.isElement(t[0]))return t[0][f.TextAlign]||"\u5de6\u5bf9\u9f50";var n=d.a.nodes(e,{match:function(e){return T.isTextWrapper(e)}}),r=Object(s.a)(n,1)[0];if(!r)return"\u5de6\u5bf9\u9f50";var a=d.b.isElement(r[0])&&r[0].textAlign;return 0==a||null==a?"left":a},options:["left","right","center"],optionLabelRender:function(e){return"left"==e?"\u5de6\u5bf9\u9f50":"right"==e?"\u53f3\u5bf9\u9f50":"center"==e?"\u5c45\u4e2d\u5bf9\u9f50":"".concat(e)},title:"\u5bf9\u9f50\u65b9\u5f0f",afterSelect:function(e){u.b.focus(t);var n=W.getSelectedTds(t);if(n.length>0){var r,a=Object(j.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;d.h.setNodes(t,{textAlign:e},{at:o[1]})}}catch(i){a.e(i)}finally{a.f()}}else t.selection&&d.h.setNodes(t,{textAlign:e},{mode:"lowest",match:function(e){return T.isTextWrapper(e)}})}})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(X.a,{style:{height:20,backgroundColor:"rgb(0 0 0 / 10%)"},type:"vertical"})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(ze,{})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Pe,{title:"\u6e05\u9664\u683c\u5f0f",mousedownFunc:function(){!function(e){var t=W.getSelectedTds(e);if(t.length>0){var n,r=Object(j.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;d.h.unsetNodes(e,Object.values(f),{at:a[1]})}}catch(s){r.e(s)}finally{r.f()}}else{var o,i=d.a.nodes(e,{mode:"lowest",match:function(e){return T.isTextWrapper(e)||d.g.isText(e)}}),c=Object(j.a)(i);try{for(c.s();!(o=c.n()).done;){var l=o.value;d.h.unsetNodes(e,Object.values(f),{at:l[1]})}}catch(s){c.e(s)}finally{c.f()}}}(t)},children:Object(k.jsx)(_.a,{component:function(){return Object(k.jsxs)("svg",{viewBox:"0 0 1084 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"853",width:"14",height:"14",children:[Object(k.jsx)("defs",{children:Object(k.jsx)("style",{type:"text/css"})}),Object(k.jsx)("path",{d:"M719.329882 422.249412l-255.578353 255.578353 234.315295 234.315294 255.518117-255.638588-234.315294-234.255059zM59.151059 315.813647l298.164706-298.164706a60.235294 60.235294 0 0 1 85.172706 0l596.329411 596.329412a60.235294 60.235294 0 0 1 0 85.172706l-298.164706 298.164706a60.235294 60.235294 0 0 1-85.232941 0l-596.329411-596.329412a60.235294 60.235294 0 0 1 0-85.172706z",fill:"#333333","p-id":"854"})]})}})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Le,{title:"\u5b57\u4f53\u989c\u8272",onChange:function(e){u.b.focus(t);var n=W.getSelectedTds(t);if(n.length>0){var r,a=Object(j.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;d.h.setNodes(t,Object(c.a)({},f.Color,e),{at:o[1]})}}catch(i){a.e(i)}finally{a.f()}}else t.selection&&d.a.addMark(t,f.Color,e)},mark:f.Color,icon:Object(k.jsx)($.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Le,{title:"\u80cc\u666f\u8272",onChange:function(e){u.b.focus(t);var n=W.getSelectedTds(t);if(n.length>0){var r,a=Object(j.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;d.h.setNodes(t,Object(c.a)({},f.BGColor,e),{at:o[1]})}}catch(i){a.e(i)}finally{a.f()}}else t.selection&&d.a.addMark(t,f.BGColor,e)},mark:f.BGColor,icon:Object(k.jsx)(ee.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Be,{title:"\u52a0\u7c97",mark:f.BOLD,children:Object(k.jsx)(te.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Be,{title:"\u659c\u4f53",mark:f.ITALIC,children:Object(k.jsx)(ne.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Be,{title:"\u4e0b\u5212\u7ebf",mark:f.Underline,children:Object(k.jsx)(re.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Be,{title:"\u5220\u9664\u7ebf",mark:f.LineThrough,children:Object(k.jsx)(ae.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(X.a,{style:{height:20,backgroundColor:"rgb(0 0 0 / 10%)"},type:"vertical"})}),Object(k.jsxs)(V.a,{children:[Object(k.jsx)(Re,{title:"\u5f85\u529e\u5217\u8868",mousedownFunc:function(){d.h.insertNodes(t,{type:r.TODOLIST,children:[{text:""}]})},disabledCondition:function(e){return null==e.selection},children:Object(k.jsx)(oe.a,{})}),Object(k.jsx)(Re,{title:"\u6709\u5e8f\u5217\u8868",mousedownFunc:function(){y.toggleList(t,r.NUMBER_LIST)},disabledCondition:function(e){return null==e.selection},children:Object(k.jsx)(ie.a,{})})]}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u65e0\u5e8f\u5217\u8868",mousedownFunc:function(){y.toggleList(t,r.NORMAL_LIST)},disabledCondition:function(e){return null==e.selection},children:Object(k.jsx)(ce.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u8bbe\u7f6e\u94fe\u63a5",mousedownFunc:function(){!function(){var e=d.a.nodes(t,{match:function(e){return d.b.isElement(e)&&e.type==r.LINK}});Object(s.a)(e,1)[0]||d.h.wrapNodes(t,{type:r.LINK,url:"http://www.baidu.com",children:[]},{split:!0})}()},disabledCondition:function(e){return null==e.selection},children:Object(k.jsx)(le.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u63d2\u5165\u56fe\u7247",mousedownFunc:function(){t.selection&&d.f.isExpanded(t.selection)&&d.h.collapse(t,{edge:"end"}),d.h.insertNodes(t,{type:r.IMG,children:[{text:""}]}),d.h.move(t)},disabledCondition:function(e){return null==e.selection},children:Object(k.jsx)(se.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u63d2\u5165\u8d44\u6e90\u6587\u4ef6",mousedownFunc:function(){},disabledCondition:function(e){return null==e.selection},children:Object(k.jsx)(de.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(X.a,{style:{height:20,backgroundColor:"rgb(0 0 0 / 10%)"},type:"vertical"})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(He,{title:"\u8868\u683c",icon:Object(k.jsx)(ue.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u5220\u9664\u8868\u683c",mousedownFunc:function(){W.deleteTable(t)},disabledCondition:Ie,children:Object(k.jsx)(J.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u5220\u9664\u5217",mousedownFunc:function(){W.deleteColumn(t)},disabledCondition:Ie,children:Object(k.jsx)(he.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u5220\u9664\u884c",mousedownFunc:function(){W.deleteRow(t)},disabledCondition:Ie,children:Object(k.jsx)(fe.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u8868\u683c\u540e\u63d2\u5165\u6587\u672c",mousedownFunc:function(){W.insertDivAfterTable(t)},disabledCondition:Ie,children:Object(k.jsx)(be.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u8868\u683c\u524d\u63d2\u5165\u6587\u672c",mousedownFunc:function(){W.insertDivBeforeTable(t)},disabledCondition:Ie,children:Object(k.jsx)(ve.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u5de6\u63d2\u5165\u5217",mousedownFunc:function(){W.insertColumn(t,"before")},disabledCondition:Ie,children:Object(k.jsx)(je.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u53f3\u63d2\u5165\u5217",mousedownFunc:function(){W.insertColumn(t,"after")},disabledCondition:Ie,children:Object(k.jsx)(pe.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u4e0a\u63d2\u5165\u884c",mousedownFunc:function(){W.insertRow(t,"before")},disabledCondition:Ie,children:Object(k.jsx)(Oe.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u4e0b\u63d2\u5165\u884c",mousedownFunc:function(){W.insertRow(t,"after")},disabledCondition:Ie,children:Object(k.jsx)(ge.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u5408\u5e76\u5355\u5143\u683c",mousedownFunc:function(){W.mergeTd(t)},disabledCondition:Ie,children:Object(k.jsx)(me.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u62c6\u5206\u5355\u5143\u683c",mousedownFunc:function(){W.splitTd(t)},disabledCondition:Ie,children:Object(k.jsx)(ye.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Re,{title:"\u6e05\u7a7a\u5355\u5143\u683c",mousedownFunc:function(){z.clearTd(t)},disabledCondition:Ie,children:Object(k.jsx)(Te.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(X.a,{style:{height:20,backgroundColor:"rgb(0 0 0 / 10%)"},type:"vertical"})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Pe,{title:"\u8f93\u51fa\u5185\u5bb9",mousedownFunc:function(){console.log(JSON.stringify(t.children)),window.localStorage.setItem("savedContent",JSON.stringify(t.children))},children:Object(k.jsx)(we.a,{})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Pe,{title:"\u8f93\u51fa\u5185\u5bb9HTML",mousedownFunc:function(e){console.log(Ae(t))},children:"slateToHtml"})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Pe,{title:"\u8f93\u5165\u5185\u5bb9",mousedownFunc:function(e){var n=De("<table><tbody><tr><td>123</td></tr></tbody></table>");d.h.insertNodes(t,n)},children:"htmlToSlate"})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Fe,{})})]})})},We=function(e,t){if(D(t).size>0)!function(e,t){var n=W.getSelectedTdsSize(t)>1,r=function(){return W.getFirstSelectedTd(t)};switch(e.key){case"Delete":case"Backspace":z.clearTd(t);break;case"Tab":if(e.preventDefault(),n)break;var a=r();a&&z.findTargetTd(t,a,e.shiftKey?"left":"right");break;case"Escape":e.preventDefault(),z.deselectAllTd(t);break;case" ":case"Enter":if(e.preventDefault(),n)break;var o=r();o&&z.editTd(t,o);break;case"ArrowUp":if(e.preventDefault(),n)break;var i=r();i&&z.findTargetTd(t,i,"up");break;case"ArrowDown":if(e.preventDefault(),n)break;var c=r();c&&z.findTargetTd(t,c,"down");break;case"ArrowLeft":if(e.preventDefault(),n)break;var l=r();l&&z.findTargetTd(t,l,"left");break;case"ArrowRight":if(e.preventDefault(),n)break;var s=r();s&&z.findTargetTd(t,s,"right")}if(!e.ctrlKey&&(1===e.key.length||"Process"===e.key)){if(n)return;var d=r();return z.clearTd(t),void(d&&z.editTd(t,d))}if(e.ctrlKey&&"c"===e.key)return x(null),void W.copyCells(t);e.ctrlKey&&"v"===e.key&&W.pasteCells(t)}(e,t);else{var n=t.selection;if(n)return d.f.isExpanded(n)?function(e,t){var n=t.selection;if(n)switch(e.key){case"Escape":var r=d.a.nodes(t,{at:n,match:function(e){return W.isTd(e)&&!0===e.canTdEdit}}),a=Object(s.a)(r,2),o=a[0],i=a[1];if(!o||i)break;z.chooseTd(t,o);break;case"Tab":e.preventDefault();var c,l=Object(j.a)(d.a.nodes(t,{at:n,reverse:!0,universal:!0,match:function(e){return T.isTextWrapper(e)}}));try{for(l.s();!(c=l.n()).done;){var u=Object(s.a)(c.value,2)[1],h=T.getParent(t,u),f=Object(s.a)(h,2),b=f[0],v=f[1];b&&y.isListItem(b)&&(e.shiftKey?y.liftLi(t,[b,v]):y.indentLi(t,[b,v]))}}catch(p){l.e(p)}finally{l.f()}}}(e,t):d.f.isCollapsed(n)?function(e,t){var n=t.selection;if(n){var a=T.getFirstAboveElementType(t),o=function(){var e;return null===(e=W.getEditingTds(t))||void 0===e?void 0:e[0]};switch(e.key){case"Tab":if(e.preventDefault(),r.LIST_ITEM===a){e.shiftKey?y.shiftTabEvent(t):y.tabEvent(t);break}if(r.TD===a){e.shiftKey?W.shiftTabEvent(t):W.tabEvent(t);break}!e.shiftKey&&d.h.insertText(t,"    ");break;case"Escape":var i=o();if(!i)break;z.chooseTd(t,i);break;case"ArrowUp":var c=o();return c&&d.c.child(c[0],0)==d.a.parent(t,n.anchor)[0]?(z.findTargetTd(t,c,"up"),d.h.deselect(t),void e.preventDefault()):void 0;case"ArrowDown":var l=o();return l&&d.c.child(l[0],l[0].children.length-1)==d.a.parent(t,n.anchor)[0]?(z.findTargetTd(t,l,"down"),d.h.deselect(t),void e.preventDefault()):void 0;case"ArrowLeft":var s=o();return s&&d.a.isStart(t,n.anchor,s[1])?(z.findTargetTd(t,s,"left"),d.h.deselect(t),void e.preventDefault()):void 0;case"ArrowRight":var u=o();return u&&d.a.isEnd(t,n.anchor,u[1])?(z.findTargetTd(t,u,"right"),d.h.deselect(t),void e.preventDefault()):void 0}}}(e,t):void 0}},qe=n(190),Ke="data:image/jpeg;base64,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",Ge=function(e){var t=e.attributes,n=e.children,r=e.element,o=Object(u.e)(),i=Object(u.g)(),c=Object(a.useState)({size:{width:r.width||100,height:r.height||100},showTool:!1}),h=Object(s.a)(c,2),f=h[0],b=h[1];Object(a.useEffect)((function(){return function(){window.onclick=function(){}}}),[]);return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{contentEditable:!1,style:{position:"relative",display:"inline-block",marginRight:5,marginLeft:5,verticalAlign:"bottom",boxShadow:f.showTool||o?"0 0 0 3px rgba(180,215,255,.7)":"none"},onClick:function(){f.showTool||(b((function(e){return Object(l.a)(Object(l.a)({},e),{},{showTool:!0})})),setTimeout((function(){window.onclick=function(e){-1==e.path.findIndex((function(e){var t;return 1==(null===e||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.cyimgcomptool)}))&&(window.onclick=function(){},b((function(e){return Object(l.a)(Object(l.a)({},e),{},{showTool:!1})})))}}),0))},onDoubleClick:function(){window.open(r.url||Ke)},children:Object(k.jsxs)(qe.a,{enable:u.b.isReadOnly(i)?{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1}:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{display:"inline-block"},size:f.size,onResizeStop:function(e,t,n,a){var o=f.size.width+a.width,c=f.size.height+a.height;b((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:{width:o,height:c}})}));var s=u.b.findPath(i,r);d.h.setNodes(i,{children:[],width:o,height:c},{at:s})},children:[Object(k.jsx)("img",{width:"100%",height:"100%",alt:"",src:r.url||Ke}),n]})}))},Qe=n(356),Ye=n(357),Ve=n(323),Xe=n(325),Je=n(328),Ze=function(e){var t=e.attributes,n=e.children,o=e.element,i=Object(u.g)(),c=Object(u.d)(),h=Object(a.useState)(),f=Object(s.a)(h,2),b=f[0],v=f[1],j=Object(a.useState)(),p=Object(s.a)(j,2),O=p[0],g=p[1],m={marginBottom:6},y=Object(k.jsx)(Ve.a,{size:"small",children:Object(k.jsxs)(Y.a,{gutter:8,style:{flexDirection:"column",width:300},children:[Object(k.jsx)(V.a,{flex:"1",children:Object(k.jsxs)(Ve.a.Item,{label:"\u64cd\u4f5c",style:m,children:[Object(k.jsxs)(G.a,{size:"small",onClick:function(){window.open(o.url)},children:[Object(k.jsx)(Qe.a,{title:"\u8bbf\u95ee\u94fe\u63a5"})," \u8bbf\u95ee\u94fe\u63a5"]}),"\xa0",Object(k.jsxs)(G.a,{size:"small",onMouseDown:function(e){e.preventDefault(),u.b.focus(i),i.selection&&d.h.unwrapNodes(i,{match:function(e){return d.b.isElement(e)&&e.type==r.LINK}})},children:[Object(k.jsx)(Ye.a,{title:"\u53d6\u6d88\u94fe\u63a5"})," \u53d6\u6d88\u94fe\u63a5"]})]})}),Object(k.jsx)(V.a,{flex:"1",children:Object(k.jsx)(Ve.a.Item,{label:"\u6587\u5b57",style:m,children:Object(k.jsx)(Xe.a,{value:b,onChange:function(e){v(e.target.value)}})})}),Object(k.jsx)(V.a,{children:Object(k.jsx)(Ve.a.Item,{label:"\u94fe\u63a5",style:m,children:Object(k.jsx)(Xe.a,{value:O,onChange:function(e){g(e.target.value)}})})}),Object(k.jsx)(Y.a,{justify:"end",children:Object(k.jsx)(G.a,{type:"primary",style:{width:100,marginRight:4},onClick:function(){u.b.focus(i);var e=u.b.toSlateNode(i,t.ref.current),n=u.b.findPath(i,e);e&&n&&(d.h.insertText(i,b||"link",{at:d.a.range(i,n)}),d.h.setNodes(i,{url:O},{at:n}))},children:"\u786e\u5b9a"})})]})});return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{style:{display:"inline",position:"relative"},children:Object(k.jsx)(Je.a,{placement:"right",content:y,trigger:c?[]:["hover"],children:Object(k.jsx)("a",{href:o.url,target:"__blank",onMouseEnter:function(){return function(){var e=t.ref.current.querySelector("a");e&&(g(e.href),v(e.innerText))}()},children:n})})}))},_e=n(327),$e=function(e){var t=e.attributes,n=e.children,r=e.element,a=Object(u.g)(),o=Object(u.d)();return Object(k.jsxs)("div",Object(l.a)(Object(l.a)({},t),{},{children:[Object(k.jsx)("span",{contentEditable:!1,style:{marginRight:12},children:Object(k.jsx)(_e.a,{checked:r.checked,onChange:function(e){d.h.setNodes(a,{checked:e.target.checked},{at:u.b.findPath(a,r)})},disabled:o})}),Object(k.jsx)("span",{children:n})]}))},et=function(e){var t=e.attributes,n=e.children,a=e.element,o={};switch(b.includes(a.type)&&a.textAlign&&(o.textAlign=a.textAlign),a.type){case r.TODOLIST:return Object(k.jsx)($e,Object(l.a)({},e));case r.NUMBER_LIST:return Object(k.jsx)("ol",Object(l.a)(Object(l.a)({},t),{},{children:n}));case r.NORMAL_LIST:return Object(k.jsx)("ul",Object(l.a)(Object(l.a)({},t),{},{children:n}));case r.LIST_ITEM:return Object(k.jsx)("li",Object(l.a)(Object(l.a)({},t),{},{style:{color:a.liColor||"unset"},children:n}));case r.DIV:return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{style:o,children:n}));case r.H1:return Object(k.jsx)("h1",Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)({},o),children:n}));case r.H2:return Object(k.jsx)("h2",Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)({},o),children:n}));case r.H3:return Object(k.jsx)("h3",Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)({},o),children:n}));case r.H4:return Object(k.jsx)("h4",Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)({},o),children:n}));case r.IMG:return Object(k.jsx)(Ge,Object(l.a)(Object(l.a)({},e),{},{children:n}));case r.LINK:return Object(k.jsx)(Ze,Object(l.a)({},e));case r.TABLE:return Object(k.jsx)(F,Object(l.a)({},e));case r.TBODY:return Object(k.jsx)("tbody",Object(l.a)(Object(l.a)({},t),{},{children:n}));case r.TR:var i={};return a.shouldEmpty&&(i.contentEditable=!1),Object(k.jsx)("tr",Object(l.a)(Object(l.a)(Object(l.a)({},t),i),{},{children:a.shouldEmpty?null:n}));case r.TD:return Object(k.jsx)(R,Object(l.a)({},e));default:return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{children:n}))}},tt=function(e){var t=e.attributes,n=e.children,r=e.leaf,a={};return r[f.BOLD]&&(a.fontWeight="bold"),r[f.ITALIC]&&(a.fontStyle="italic"),r[f.FontSize]&&(a.fontSize=r.fontSize),(r[f.Underline]||r[f.LineThrough])&&(a.textDecoration="".concat(r[f.Underline]?"underline":""," ").concat(r[f.LineThrough]?"line-through":"")),r[f.Color]&&(a.color=r[f.Color]),r[f.BGColor]&&(a.backgroundColor=r[f.BGColor]),Object(k.jsx)("span",Object(l.a)(Object(l.a)({},t),{},{style:a,children:n}))},nt=(n(314),n(315),Object(a.createContext)({savedMarks:null,setSavedMarks:function(){},readOnly:!1,setReadOnly:function(){}})),rt=function(){var e=Object(a.useState)(function(e){var t=e.deleteForward,n=e.deleteBackward,a=e.deleteFragment,o=e.getFragment,i=e.insertText,c=e.insertData,l=e.insertBreak,u=e.isInline,f=e.isVoid,b=e.normalizeNode,j=e.apply,p=function(){var t=d.a.nodes(e,{match:function(e){return d.b.isElement(e)&&e.type===r.TODOLIST}});return Object(s.a)(t,1)[0]};e.apply=function(t){try{if("set_node"===t.type){var n=d.a.node(e,t.path),r=n&&W.isTd(n[0]),a=n&&W.isTable(n[0]),o=t.newProperties,i=t.properties;r&&(o.selected||o.width||o.start||o.canTdEdit||i.start||i.selected||i.width||i.canTdEdit)||a&&(o.wrapperWidthWhenCreated||i.wrapperWidthWhenCreated)?h.a.withoutSaving(e,(function(){j(t)})):j(t)}else j(t)}catch(c){console.warn(c)}},e.insertBreak=function(){if(e.selection){var t=p();if(t)return t&&""===d.a.string(e,t[1],{voids:!0})?void d.h.setNodes(e,{type:r.DIV},{at:t[1]}):void l();if(d.f.isExpanded(e.selection))T.removeRangeElement(e);else{var n=T.getParent(e,e.selection.anchor.path);if(!n[0])return;var a=d.a.parent(e,n[1]),o=y.isListItem(a[0])&&a;if(o&&""===d.a.string(e,o[1],{voids:!0}))return void d.h.liftNodes(e,{at:o[1]})}l()}},e.deleteFragment=function(t){T.removeRangeElement(e),a(t)},e.deleteForward=function(n){if(e.selection){O();var r=d.a.above(e,{mode:"lowest",match:function(e){return y.isListItem(e)}}),a=d.a.above(e,{mode:"lowest",match:function(e){return W.isTd(e)}}),o=d.a.above(e,{mode:"lowest",match:function(e){return T.isTextWrapper(e)}}),i=r&&(!a||r[1].length>a[1].length);if(o&&""===d.a.string(e,o[1],{voids:!0}))d.h.removeNodes(e,{at:o[1]});else if(i&&r&&""===d.a.string(e,r[1],{voids:!0}))d.h.removeNodes(e,{at:r[1]});else{var c=d.a.after(e,e.selection.anchor),l=c&&d.a.above(e,{at:c,mode:"lowest",match:function(e){return W.isTd(e)}});a&&l&&!d.e.equals(a[1],l[1])||t(n)}}},e.deleteBackward=function(t){if(e.selection){O();var r=p();if(r)return d.a.isStart(e,e.selection.anchor,r[1])?void d.h.removeNodes(e,{at:r[1]}):void n(t);var a=d.a.above(e,{mode:"lowest",match:function(e){return y.isListItem(e)}}),o=d.a.above(e,{mode:"lowest",match:function(e){return W.isTd(e)}}),i=d.a.above(e,{mode:"lowest",match:function(e){return T.isTextWrapper(e)}}),c=a&&(!o||a[1].length>o[1].length);if(i&&""===d.a.string(e,i[1],{voids:!0}))d.h.removeNodes(e,{at:i[1]});else{var l=d.a.before(e,e.selection.anchor);if(c&&a&&""===d.a.string(e,a[1],{voids:!0}))d.h.removeNodes(e,{at:a[1]});else{var s=d.a.above(e,{at:l,mode:"lowest",match:function(e){return W.isTd(e)}});s&&o&&!d.e.equals(s[1],o[1])||n(t)}}}},e.insertText=function(t){p()||e.selection&&d.f.isExpanded(e.selection)&&T.removeRangeElement(e),i(t)},e.getFragment=function(){return S(null),A({copyedAreaHeight:0,copyedAreaWidth:0}),x(o()),o()},e.insertFragment=function(t){T.removeRangeElement(e),d.h.insertNodes(e,t)},e.insertData=function(t){var n=E();if(n){var r=d.a.nodes(e,{at:n[0][1],mode:"lowest",match:function(e){return W.isTable(e)}}),a=Object(s.a)(r,1)[0];if(a){var o=new DataTransfer;return o.setData("application/x-slate-fragment",T.encodeSlateContent([a[0]])),void c(o)}}else if(t.types.includes("application/x-slate-fragment"))c(t);else if(t.types.includes("text/plain")){var i=new DataTransfer,l=De(t.getData("text/plain"));i.setData("application/x-slate-fragment",T.encodeSlateContent(l)),c(i)}};var O=g.a.debounce((function(){var t=d.a.next(e,{match:function(e){return y.isOrderList(e)}});t&&e.normalizeNode(t);var n=d.a.previous(e,{match:function(e){return y.isOrderList(e)}});n&&e.normalizeNode(n)}),0);return e.isInline=function(e){return!![r.IMG,r.LINK].includes(e.type)||u(e)},e.isVoid=function(e){return!![r.IMG].includes(e.type)||f(e)},e.normalizeNode=function(t){var n=Object(s.a)(t,2),a=n[0],o=n[1];if(0!==e.children.length){if(d.b.isElement(a)&&d.a.isBlock(e,a)){var i=T.getParent(e,o),c=Object(s.a)(i,1)[0];if(T.isTextWrapper(c))return void d.h.removeNodes(e,{at:o})}if(d.b.isElement(a)&&v.includes(a.type)){var l=T.getPath(o,"pre"),u=T.getNodeByPath(e,l),h=Object(s.a)(u,1)[0];if(!d.g.isText(h))return void d.h.insertNodes(e,{text:""},{at:l});var f=T.getPath(o,"next"),j=T.getNodeByPath(e,f),p=Object(s.a)(j,1)[0];if(!d.g.isText(p))return void d.h.insertNodes(e,{text:""},{at:f})}d.b.isElement(a)&&a.type===r.LINK&&""===d.a.string(e,o,{voids:!0})?d.h.removeNodes(e,{at:o}):W.normalizeTable(e,t)||y.normalizeList(e,t)||b(t)}else d.h.insertNodes(e,{type:r.DIV,children:[{text:""}]})},e}(Object(h.b)(Object(u.h)(Object(d.i)())))),t=Object(s.a)(e,1)[0],n=Object(a.useState)((function(){var e=window.localStorage.getItem("savedContent")||JSON.stringify([{type:r.DIV,children:[{text:""}]}]);return JSON.parse(e)})),o=Object(s.a)(n,2),i=o[0],b=o[1],j=Object(a.useRef)({preUndos:[],preSelection:null}),p=Object(a.useState)(),O=Object(s.a)(p,2),m=O[0],w=O[1];Object(a.useEffect)((function(){document.body.style.cursor=null!=m?"copy":"auto"}),[m]);var N=Object(a.useState)(!1),D=Object(s.a)(N,2),C=D[0],I=D[1];Object(a.useEffect)((function(){}),[]);var L=Object(a.useCallback)((function(e){return Object(k.jsx)(et,Object(l.a)(Object(l.a)({},e),{},{editorRef:j}))}),[]),M=Object(a.useCallback)((function(e){return Object(k.jsx)(tt,Object(l.a)({},e))}),[]),B=Object(a.useMemo)((function(){return Object(k.jsx)(Ue,{})}),[]);return Object(k.jsx)("div",{className:"cyEditor",style:{position:"relative"},children:Object(k.jsx)(u.c,{editor:t,value:i,onChange:function(e){b(e)},children:Object(k.jsxs)(nt.Provider,{value:{savedMarks:m,setSavedMarks:w,readOnly:C,setReadOnly:I},children:[B,Object(k.jsx)("div",{className:"cyEditor__content",style:{overflow:"auto",height:window.screen.availHeight-200,border:"1px solid",padding:12},children:Object(k.jsx)(u.a,{renderElement:L,renderLeaf:M,autoFocus:!0,readOnly:C,onCompositionStart:function(){T.removeRangeElement(t)},placeholder:"welcome to cyEditor!",onKeyDown:function(e){return We(e,t)},onMouseDown:function(e){z.deselectAllTd(t)},onDragStart:function(e){e.preventDefault()},onBlur:function(){j.current.preSelection=t.selection},onFocus:function(){j.current.preSelection&&d.h.select(t,j.current.preSelection)},onSelect:function(){if(null!=m){if(W.getFirstSelectedTd(t))return;var e=m[f.TextAlign],n=d.a.above(t,{mode:"lowest",match:function(e){return T.isTextWrapper(e)}});if(!n)return;for(var r=0,a=Object.values(f);r<a.length;r++){var o=a[r];d.a.removeMark(t,o)}for(var i in e&&d.h.unsetNodes(t,f.TextAlign,{at:n[1]}),m)d.a.addMark(t,i,m[i]);e&&d.h.setNodes(t,Object(c.a)({},f.TextAlign,m[f.TextAlign]),{at:n[1]}),w(null),document.body.style.cursor="auto",t.selection&&d.h.select(t,d.a.start(t,t.selection))}}})})]})})})};i.a.render(Object(k.jsx)(rt,{}),document.getElementById("root"))}},[[316,1,2]]]);
//# sourceMappingURL=main.505642ba.chunk.js.map