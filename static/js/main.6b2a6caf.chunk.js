(this["webpackJsonpmy-editor"]=this["webpackJsonpmy-editor"]||[]).push([[0],{221:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n(37),o=n.n(a),c=n(29),l=n(12),s=n(4),u=n(1),d=n(7),f=n(121);!function(e){e.EDITOR="editor",e.NUMBER_LIST="ol",e.NORMAL_LIST="ul",e.LIST_ITEM="li",e.DIV="div",e.Block="block",e.P="p",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.IMG="img",e.LINK="link",e.TABLE="table",e.TBODY="tbody",e.TR="tr",e.TD="td",e.TODOLIST="todo",e.CHECKBOX="checkbox",e.CODE="code",e.FILE="file"}(r||(r={}));var b,h=[r.DIV,r.H1,r.H2,r.H3,r.H4,r.P],j=[r.IMG,r.LINK,r.CHECKBOX];!function(e){e.BOLD="bold",e.ITALIC="italic",e.FontSize="fontSize",e.Underline="underline",e.LineThrough="line-through",e.Color="color",e.BGColor="backgroundColor",e.TextAlign="textAlign"}(b||(b={}));var v;!function(e){e.ORDER_LIST="order_list",e.NORMALIZE_LIST="unorder_list",e.TODO_LIST="todo_list",e.SELECTE_TD="select_td"}(v||(v={}));var O=n(10),p=n(16),m=n(26),g=n.n(m),y=n(30),x={selectedTds:new Set,editingTdsPath:new Set,preSelectedTdPos:{row:0,col:0},copyedCellsPath:null,copyedAreaHeight:0,copyedAreaWidth:0,copyedCells:null,copyedContent:null},T=function(){return x.copyedContent},w=function(e){x.copyedContent=e},S=function(e){x.copyedCells=e},E=function(){return x.copyedCells},N=function(e){x.copyedAreaHeight=e.copyedAreaHeight,x.copyedAreaWidth=e.copyedAreaWidth},C=function(e){return I(e,x.selectedTds),x.selectedTds},D=function(e){x.selectedTds=e},I=function e(t,n){var r,i=Object(O.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.split(",").map((function(e){return+e}));if(!u.a.hasPath(t,o))return n.delete(a),void e(t,n)}}catch(c){i.e(c)}finally{i.f()}},L=function(e){return I(e,x.editingTdsPath),x.editingTdsPath},A=function(e){x.editingTdsPath=e},M={insertCypressId:function(e,t){return null!=e[t]?Object(c.a)({},"data-cypress-id",e[t]):{}},findParent:function(e,t){for(var n=e;null!=n&&n!=t;)n=n.offsetParent;return n},isElementEmpty:function(e,t){return!Array.from(u.c.descendants(t[0])).some((function(t){var n=t[0];return u.h.isText(n)&&n.text.length>0||u.a.isVoid(e,n)||u.a.isInline(e,n)}))},removeAllRange:function(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()},encodeSlateContent:function(e){var t;return null===(t=window)||void 0===t?void 0:t.btoa(encodeURIComponent(JSON.stringify(e)))},decodeContentToSlateData:function(e){return JSON.parse(decodeURIComponent(window.atob(e)))},doCopy:function(e){H.getSelectedTds(e).length>0?H.copyCells(e):(S(null),N({copyedAreaHeight:0,copyedAreaWidth:0}),w(e.getFragment()))},doPaste:function(e){M.removeRangeElement(e);var t=E()||[],n=H.getSelectedTdsSize(e)>0,r=t.length>0,i=H.isInTable(e)||n,a=T();if(i)n?H.pasteCells(e):a&&e.insertFragment(M.filterCopyedContent(a));else if(r){var o=M.filterCopyedContent(t.map((function(e){return e[0]})));e.insertFragment(o)}else a&&e.insertFragment(M.filterCopyedContent(a))},filterCopyedContent:function(e){var t=[];return e.forEach((function(e){H.isTable(e)?Array.from(u.c.descendants(e)).forEach((function(e){H.isTd(e[0])&&t.push.apply(t,Object(p.a)(e[0].children))})):H.isTd(e)?t.push.apply(t,Object(p.a)(e.children)):t.push(e)})),t},removeRangeElement:function(e){if(e.selection&&!u.g.isCollapsed(e.selection)){var t=e.selection,n=u.a.range(e,[]),r=u.g.intersection(n,t);if(r&&u.g.equals(r,n))u.a.withoutNormalizing(e,(function(){var t,n=Object(O.a)(u.c.children(e,[],{reverse:!0}));try{for(n.s();!(t=n.n()).done;){var r=Object(s.a)(t.value,2)[1];u.i.removeNodes(e,{at:r,hanging:!0,voids:!0,mode:"highest"})}}catch(i){n.e(i)}finally{n.f()}}));else{var i,a=function(){if(e.selection){for(var t=u.g.start(e.selection),n=u.g.end(e.selection),r=function(e,t){return-1==u.f.compare(e,t)},i=function(e,t){return 0==u.f.compare(e,t)},a=[],o=0,c=Array.from(u.a.nodes(e,{match:function(e){return H.isTable(e)}}));o<c.length;o++){var l=c[o],s=u.a.start(e,l[1]),d=u.a.end(e,l[1]),f=u.a.before(e,s)||s,b=u.a.after(e,d)||d;if(r(t,s)?r(n,d)?(a.push([t,f],[s,n]),t=null):i(n,d)?(a.push([t,f],[s,d]),t=null):(a.push([t,f],[s,d]),t=b):i(t,s)?r(n,d)?(a.push([s,n]),t=null):i(n,d)?(a.push([s,d]),t=null):(a.push([s,d]),t=b):r(n,d)?(a.push([t,n]),t=null):i(n,d)?(a.push([t,d]),t=null):(a.push([t,d]),t=b),null==t)break}return null!=t&&r(t,n)&&a.push([t,n]),a}}()||[],o=Object(O.a)(a.reverse());try{for(o.s();!(i=o.n()).done;){var c=i.value,l={anchor:c[0],focus:c[1]};if(!u.g.isCollapsed(l)){var d=u.a.above(e,{at:l,match:function(e){return H.isTable(e)}});if(d){var f=u.a.range(e,d[1]),b=u.g.intersection(l,f);if(b&&u.g.equals(b,f)){u.i.removeNodes(e,{at:d[1]});continue}for(var h=Array.from(u.a.nodes(e,{at:l,match:function(e){return H.isTd(e)}})),j=0,v=h;j<v.length;j++){var p=v[j],m=u.a.range(e,p[1]),g=u.g.intersection(m,l);if(g&&u.g.isExpanded(g))if(u.g.equals(g,m)){var y,x=Object(O.a)(u.c.children(e,p[1],{reverse:!0}));try{for(x.s();!(y=x.n()).done;){var T=Object(s.a)(y.value,2)[1];u.i.removeNodes(e,{at:T})}}catch(w){x.e(w)}finally{x.f()}}else u.i.setSelection(e,g),u.i.delete(e,{hanging:!0,voids:!0})}}else u.i.setSelection(e,l),u.i.delete(e,{hanging:!0,voids:!0})}}}catch(w){o.e(w)}finally{o.f()}u.i.select(e,u.g.start(t))}}},isTextWrapper:function(e){return u.b.isElement(e)&&h.includes(e.type)},getFirstAboveElementType:function(e){if(e.selection){var t=M.getParent(e,e.selection.anchor.path);if(!t[0])return null;var n=M.getParent(e,t[1]);return n[0]?u.b.isElement(n[0])&&n[0].type||u.a.isEditor(n[0])&&r.EDITOR:null}},getPath:function(e,t){var n=e.slice(0,e.length-1),r=e[e.length-1];return"parent"==t?n:[].concat(Object(p.a)(n),["pre"==t?r-1:r+1])},getNodeByPath:function(e,t){try{return u.a.node(e,t)}catch(n){return[]}},getParent:function(e,t){return this.getNodeByPath(e,this.getPath(t,"parent"))},hasNotSelectedAnyTd:function(e){return null==H.getFirstSelectedTd(e)&&!H.isInTable(e)}},k=n(2),P=100,R=30,z=function(e){var t=e.attributes,n=e.element,a=e.children,o=Object(d.g)(),c=Object(d.d)();Object(i.useEffect)((function(){var e=d.b.findPath(o,n);return null!=n.width&&null!=n.height||u.i.setNodes(o,{width:n.width||P,height:n.height||R},{at:e}),function(){var e=d.b.findPath(o,n).join(","),t=C(o),r=L(o);t.delete(e),r.delete(e)}}),[]),Object(i.useEffect)((function(){var e=d.b.findPath(o,n).join(","),t=C(o),r=L(o),i=n.selected;!0===n.tdIsEditing?r.add(e):r.delete(e),!0===i?t.add(e):t.delete(e)}));return Object(k.jsxs)("td",Object(l.a)(Object(l.a)({},t),{},{colSpan:n.colSpan,rowSpan:n.rowSpan,style:{minWidth:n.width||P,maxWidth:n.width||P,width:n.width||P,height:n.height||R,color:n[b.Color]||"unset",backgroundColor:n.selected&&!c?"rgba(180,215,255,.7)":n[b.BGColor]||"unset",textAlign:n[b.TextAlign]||"unset",fontSize:n[b.FontSize]||"unset",fontWeight:n[b.BOLD]?"bold":"unset",fontStyle:n[b.ITALIC]?"italic":"unset",textDecoration:"".concat(n[b.Underline]?"underline":""," ").concat(n[b.LineThrough]?"line-through":"")},onClick:function(){},onDoubleClick:function(e){if(e.nativeEvent.target==t.ref.current){B.deselectAllTd(o);var r=d.b.findPath(o,n);u.i.setNodes(o,{start:!0,selected:!0},{at:r}),u.i.deselect(o)}},children:[a,c?null:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("span",{className:"resizer",style:{position:"absolute",zIndex:10,width:5,right:0,top:0,height:"100%",cursor:"col-resize",userSelect:"none"},contentEditable:!1,onMouseDown:function(e){for(var t=e.clientX,n=null,i=null,a=0,c=e.nativeEvent.path;a<c.length;a++){var l=c[a];if("TD"==l.tagName&&(n=l),"TABLE"==l.tagName){i=l;break}}if(null!=n&&null!=i){var f=d.b.toSlateNode(o,n),b=d.b.findPath(o,f),h=u.a.above(o,{at:b,match:function(e){return u.b.isElement(e)&&e.type==r.TBODY}});if(h){for(var j=B.getTdMap(h).tdMap,v=b.slice(b.length-2),O=Object(s.a)(v,2),m=O[0],g=O[1],y=-1,x=0;x<j.length;x++){for(var T=0;T<j[x].length;T++){var w=j[x][T];if(w.originCol==g&&w.originRow==m){y=w.col+w.colSpan-1;break}}if(-1!=y)break}if(-1!=y){for(var S=[],E=0;E<j.length;E++){var N=j[E][y],C=u.a.node(o,[].concat(Object(p.a)(h[1]),[N.originRow,N.originCol])),D=d.b.toDOMNode(o,C[0]);D.initX=D.offsetWidth,S.push(D)}var I=function(e){var n=e.clientX-t;S.forEach((function(e){e.style.maxWidth=e.style.width=e.style.minWidth=(e.initX+n<P?P:e.initX+n)+"px"}))};document.addEventListener("mousemove",I),document.addEventListener("mouseup",(function e(){Array.from(i.querySelectorAll(":scope>tbody>tr")).forEach((function(e,t){Array.from(e.querySelectorAll(":scope>td")).forEach((function(e,n){var r=parseInt(e.style.minWidth),i=d.b.toSlateNode(o,e);u.b.isElement(i)&&i.width!=r&&u.i.setNodes(o,{width:r},{at:[].concat(Object(p.a)(h[1]),[t,n])})}))})),document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",e)}))}}}}}),Object(k.jsx)("span",{className:"resizer",style:{position:"absolute",zIndex:10,width:"100%",height:5,left:0,bottom:0,cursor:"row-resize",userSelect:"none"},contentEditable:!1,onMouseDown:function(e){for(var t=e.clientY,n=null,i=null,a=null,c=0,l=e.nativeEvent.path;c<l.length;c++){var f=l[c];if("TD"==f.tagName&&(n=f),"TR"==f.tagName&&(i=f),"TABLE"==f.tagName){a=f;break}}if(null!=n&&null!=i&&null!=a){var b=d.b.toSlateNode(o,n),h=d.b.findPath(o,b),j=u.a.above(o,{at:h,match:function(e){return u.b.isElement(e)&&e.type==r.TBODY}});if(j){for(var v=B.getTdMap(j).tdMap,O=h.slice(h.length-2),m=Object(s.a)(O,2),g=m[0],y=m[1],x=-1,T=0;T<v.length;T++){for(var w=0;w<v[T].length;w++){var S=v[T][w];if(S.originCol==y&&S.originRow==g){x=S.row+S.rowSpan-1;break}}if(-1!=x)break}if(-1!=x){for(var E=[],N=0;N<v[0].length;N++){var C=v[x][N],D=u.a.node(o,[].concat(Object(p.a)(j[1]),[C.originRow,C.originCol])),I=d.b.toDOMNode(o,D[0]);I.initY=I.offsetHeight,E.push(I)}var L=function(e){e.preventDefault();var n=e.clientY-t;E.forEach((function(e){return e.style.minHeight=e.style.height=e.style.maxHeight=(e.initY+n<=R?R:e.initY+n)+"px"}))};document.addEventListener("mousemove",L),document.addEventListener("mouseup",(function e(){Array.from(a.querySelectorAll(":scope>tbody>tr")).forEach((function(e,t){Array.from(e.querySelectorAll(":scope>td")).forEach((function(e,n){var r=parseInt(e.style.height),i=d.b.toSlateNode(o,e);u.b.isElement(i)&&i.height!=r&&u.i.setNodes(o,{height:r},{at:[].concat(Object(p.a)(j[1]),[t,n])})}))})),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",e)}))}}}}})]})]}))},B={getTdMap:function(e){for(var t=e[0].children,n=[],r=new Array(t.length).fill(0).map((function(){return[]})),i=0;i<t.length;i++)for(var a=t[i].children,o=0;o<a.length;o++){var c=a[o];if(H.isTd(c)){var s=r[i].findIndex((function(e){return null==e})),u=(s=-1==s?r[i].length:s)+(c.colSpan||1),d=i,f=d+(c.rowSpan||1),b=Object(l.a)(Object(l.a)({},c),{},{colSpan:c.colSpan||1,rowSpan:c.rowSpan||1,row:i,col:s,originRow:i,originCol:o});(c.start||c.tdIsEditing)&&n.push(b);for(var h=d;h<f;h++)for(var j=s;j<u;j++)r[h][j]=b}}return{tdMap:r,startPoins:n}},getSelectedTdInTdMap:function(e){var t=B.getTdMap(e),n=t.tdMap,r=t.startPoins;if(r.length<1)return null;if(1==r.length&&(r[1]=r[0]),!n)return null;var i=Object(s.a)(r,2),a=i[0],o=i[1],c=new Map([[a,1],[o,1]]);return function e(t,r){for(var i=t.colStart,a=t.colEnd,o=t.rowStart,c=t.rowEnd,l=o;l<c;l++)for(var s=i;s<a;s++){var u=n[l][s];if(!r.has(u))return r.set(u,1),void e({colStart:Math.min(u.col,i),colEnd:Math.max(a,u.col+u.colSpan),rowStart:Math.min(u.row,o),rowEnd:Math.max(u.row+u.rowSpan,c)},r)}}({colStart:Math.min(a.col,o.col),colEnd:Math.max(a.col+a.colSpan,o.col+o.colSpan),rowStart:Math.min(a.row,o.row),rowEnd:Math.max(a.row+a.rowSpan,o.row+o.rowSpan)},c),c},deselectAllTd:function(e){var t,n=H.getSelectedTdsPath(e),r=Object(O.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;u.i.unsetNodes(e,["selected","start","tdIsEditing"],{at:i})}}catch(s){r.e(s)}finally{r.f()}D(new Set);var a,o=H.getEditingTdsPath(e),c=Object(O.a)(o);try{for(c.s();!(a=c.n()).done;){var l=a.value.split(",").map((function(e){return+e}));u.i.unsetNodes(e,["selected","start","tdIsEditing"],{at:l})}}catch(s){c.e(s)}finally{c.f()}A(new Set)},findTargetTd:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t){var a=u.a.above(e,{at:t[1],mode:"lowest",match:function(e){return u.b.isElement(e)&&e.type==r.TBODY}});if(a&&u.b.isElement(a[0])){var o,c,l=B.getTdMap(a),s=l.tdMap;if(s.some((function(e,t){return e.some((function(e,n){return!0===e.tdIsEditing&&(o=t,c=n,!0)}))})),null!=o&&null!=c){var d=s[o][c],f=c,b=o;if("left"==n)f=0==c?0==o?0:(b=o-1,s[0].length-1):c-1;else if("right"==n){var h=c+d.colSpan;f=h>=s[0].length?o==s.length-1?c:(b=o+1,0):h}else"up"==n?b=0==o?0:o-1:"down"==n&&(b=o+d.rowSpan>=s.length?o:o+d.rowSpan);var j=s[b][f],v=[].concat(Object(p.a)(a[1]),[j.originRow,j.originCol]),O=u.a.node(e,v);O&&(u.i.select(e,i?u.a.range(e,O[1]):["down","right"].includes(n)?u.a.start(e,O[1]):u.a.end(e,O[1])),B.setTdIsEditing(e,O[1]))}}}},setTdIsEditing:function(e,t){B.deselectAllTd(e),u.i.setNodes(e,{tdIsEditing:!0,start:!0},{at:t})},clearTd:function(e){var t,n=H.getSelectedTds(e),r=Object(O.a)(n);try{for(r.s();!(t=r.n()).done;){var i,a=Object(s.a)(t.value,2)[1],o=Object(O.a)(u.c.children(e,a,{reverse:!0}));try{for(o.s();!(i=o.n()).done;){var c=Object(s.a)(i.value,2)[1];u.i.removeNodes(e,{at:c})}}catch(l){o.e(l)}finally{o.f()}u.i.unsetNodes(e,["selected","start"],{at:a})}}catch(l){r.e(l)}finally{r.f()}}},F=n(203),_=function(e){var t=e.attributes,n=e.children,a=e.element,o=Object(i.useRef)({isBeginSelectTd:!1,mouseDownStartPoint:null,initX:0,initY:0,lastSelectedPaths:[],preMouseOnTdPath:null,prePath:null}),c=Object(i.useContext)(an),s=c.savedMarks,f=c.setSavedMarks,h=Object(d.g)(),j=Object(d.d)(),v=Object(i.useCallback)((function(){var e=t.ref.current;if(e){var n=e,r=(null===e||void 0===e?void 0:e.offsetWidth)-2,i=a.wrapperWidthWhenCreated;if(n&&null!=r&&null!=i&&i!=r){var o=d.b.toSlateNode(h,e);if(!o)return;var c=d.b.findPath(h,o);if(!c)return;Array.from(n.querySelectorAll(":scope>tbody>tr")).forEach((function(e,t){Array.from(e.querySelectorAll(":scope>td")).forEach((function(e,n){var a=d.b.toSlateNode(h,e);if(u.b.isElement(a)){var o=(a.width||P)/i*r;u.i.setNodes(h,{width:o},{at:[].concat(Object(p.a)(c),[0,t,n])})}}))})),u.i.setNodes(h,{wrapperWidthWhenCreated:r},{at:c})}}}),[t.ref,h,a.wrapperWidthWhenCreated]);Object(i.useEffect)((function(){var e=new ResizeObserver((function(e){window.requestAnimationFrame((function(){Array.isArray(e)&&e.length&&v()}))})),t=document.querySelector(".cyEditor__content");return t&&e.observe(t),function(){t&&e.unobserve(t)}}),[v]),Object(i.useEffect)((function(){var e=d.b.findPath(h,a);null==o.current.prePath||u.e.equals(e,o.current.prePath)||H.resetSelectedTds(h),o.current.prePath=e}));var m=g.a.debounce((function(e,t){var n=u.c.common(h,e.path,t.path);if(n){var i=u.a.above(h,{at:t,mode:"lowest",match:function(e){return H.isTd(e)}});if(i){var a=o.current.preMouseOnTdPath;if(!a||!u.e.equals(a,i[1]))if(o.current.preMouseOnTdPath=i[1],u.a.above(h,{at:e,mode:"lowest",match:function(e){return H.isTd(e)}})){if(o.current.lastSelectedPaths.forEach((function(e){var t=u.a.node(h,e);t&&u.b.isElement(t[0])&&1==t[0].start&&u.i.unsetNodes(h,["start"],{at:e})})),!u.b.isElement(n[0])||n[0].type!=r.TBODY&&n[0].type!=r.TR)return o.current.lastSelectedPaths.forEach((function(e){u.i.unsetNodes(h,["selected","start"],{at:e})})),void(o.current.lastSelectedPaths=[]);var c=u.a.above(h,{at:e,mode:"highest",match:function(e,t){return H.isTd(e)&&t.length>n[1].length}});if(c){u.i.setNodes(h,{start:!0,selected:!0},{at:c[1]});var l=u.a.above(h,{at:t,mode:"highest",match:function(e,t){return H.isTd(e)&&t.length>n[1].length}});if(l){u.i.setNodes(h,{start:!0,selected:!0},{at:l[1]});var s=u.a.above(h,{at:c[1],mode:"lowest",match:function(e){return u.b.isElement(e)&&e.type==r.TBODY}});if(s&&u.b.isElement(s[0])){var d=B.getSelectedTdInTdMap(s);if(null!=d){var f,b=Array.from(d.keys()).map((function(e){return[].concat(Object(p.a)(s[1]),[e.originRow,e.originCol])})),j=function(e,t){var n=new Set(e.map((function(e){return e.slice(e.length-2).join(",")}))),r=new Set(t.map((function(e){return e.slice(e.length-2).join(",")})));return{deselectedPath:t.filter((function(e){return!n.has(e.slice(e.length-2).join(","))})),newSelectedPath:e.filter((function(e){return!r.has(e.slice(e.length-2).join(","))}))}}(b,o.current.lastSelectedPaths),v=j.deselectedPath,m=j.newSelectedPath,g=Object(O.a)(m);try{for(g.s();!(f=g.n()).done;){var y=f.value;u.i.setNodes(h,{selected:!0},{at:y})}}catch(S){g.e(S)}finally{g.f()}var x,T=Object(O.a)(v);try{for(T.s();!(x=T.n()).done;){var w=x.value;u.i.unsetNodes(h,["selected","start"],{at:w})}}catch(S){T.e(S)}finally{T.f()}o.current.lastSelectedPaths=b,u.i.deselect(h)}}}}}}}}),3);return Object(k.jsx)("table",Object(l.a)(Object(l.a)({},t),{},{style:{display:"block",tableLayout:"auto",wordBreak:"break-all",overflowX:"auto",overflowY:"hidden",borderCollapse:"collapse",position:"relative"},onMouseDown:function(e){e.stopPropagation();try{B.deselectAllTd(h);var t=d.b.toSlateNode(h,e.target),n=d.b.findPath(h,t);o.current.initX=e.clientX,o.current.initY=e.clientY,o.current.preMouseOnTdPath=null,o.current.lastSelectedPaths=[];var r=e.nativeEvent.path.find((function(e){return"TD"==e.tagName}));if(!r)return;var i=d.b.findPath(h,d.b.toSlateNode(h,r));if(B.setTdIsEditing(h,i),!j&&!["resizer","columnSelector"].includes(e.target.className)){o.current.isBeginSelectTd=!0,o.current.preMouseOnTdPath=o.current.mouseDownStartPoint=n,o.current.lastSelectedPaths=H.getSelectedTdsPath(h);var a=function(e){try{if(["resizer","columnSelector"].includes(e.target.className))M.removeAllRange(),e.preventDefault();else M.findParent(e.target,r)!=r&&(M.removeAllRange(),e.preventDefault());if(o.current.isBeginSelectTd&&(Math.abs(e.clientX-o.current.initX)>1||Math.abs(e.clientY-o.current.initY)>1)){var t=d.b.toSlateNode(h,e.target),n=d.b.findPath(h,t);m(u.a.point(h,o.current.mouseDownStartPoint),u.a.point(h,n))}}catch(i){console.error(i)}};window.addEventListener("mousemove",a),window.addEventListener("mouseup",(function e(t){o.current.isBeginSelectTd=!1,window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",e)}))}}catch(c){}},onMouseUp:function(){if(s){for(var e={},t=H.getSelectedTdsSize(h),n=0,r=Object.values(b);n<r.length;n++){var i=r[n];e[i]=s[i]}if(t>0){var a,o=H.getSelectedTdsPath(h),c=Object(O.a)(o);try{for(c.s();!(a=c.n()).done;){var l=a.value;u.i.setNodes(h,e,{at:l})}}catch(d){c.e(d)}finally{c.f()}return void f(null)}}},children:n}))},H={model:[{type:r.TABLE,children:[{type:r.TBODY,children:new Array(100).fill(0).map((function(e,t){return{type:r.TR,children:new Array(10).fill(0).map((function(e,n){return{type:r.TD,width:100,height:50,children:[{type:r.DIV,children:[{text:"string".concat(t,"-").concat(n)}]}]}}))}}))}]},{type:r.DIV,children:[{text:"1"}]}],isSelectedTd:function(e){return H.isTd(e)&&1==e.selected},isTable:function(e){return u.b.isElement(e)&&r.TABLE==e.type},isTd:function(e){return u.b.isElement(e)&&[r.TD].includes(e.type)},isInTable:function(e){if(!e.selection)return!1;var t=e.selection,n=t.focus.path,r=t.anchor.path,i=u.a.above(e,{at:n,match:function(e){return H.isTable(e)}});return!!i||!!(i=u.a.above(e,{at:r,match:function(e){return H.isTable(e)}}))},isInTd:function(e){return!(!e.selection||!u.g.isCollapsed(e.selection))&&M.getFirstAboveElementType(e)==r.TD},normalizeTable:function(e,t){var n=Object(s.a)(t,2),i=n[0],a=n[1];if(u.b.isElement(i)&&[r.TABLE].includes(i.type)){var o,c=Object(O.a)(u.c.children(e,a,{reverse:!0}));try{for(c.s();!(o=c.n()).done;){var l=Object(s.a)(o.value,2),d=l[0],f=l[1];if(d.type!=r.TBODY)return void u.i.removeNodes(e,{at:f})}}catch(z){c.e(z)}finally{c.f()}}if(u.b.isElement(i)&&[r.TBODY].includes(i.type)){var b=M.getParent(e,a),h=Object(s.a)(b,1)[0];if(!u.b.isElement(h)||h.type!=r.TABLE)return u.i.removeNodes(e,{at:a}),!0;var j,v=Object(O.a)(u.c.children(e,a,{reverse:!0}));try{for(v.s();!(j=v.n()).done;){var m=Object(s.a)(j.value,2),g=m[0],y=m[1];if(g.type!=r.TR)return void u.i.removeNodes(e,{at:y})}}catch(z){v.e(z)}finally{v.f()}}if(u.b.isElement(i)&&r.TR==i.type){var x=M.getParent(e,a),T=Object(s.a)(x,1)[0];if(!u.b.isElement(T)||![r.TBODY].includes(T.type))return u.i.removeNodes(e,{at:a}),!0;var w,S=Object(O.a)(u.c.children(e,a,{reverse:!0}));try{for(S.s();!(w=S.n()).done;){var E=Object(s.a)(w.value,2),N=E[0],C=E[1];if(!i.shouldEmpty&&N.type!=r.TD)return void u.i.removeNodes(e,{at:C})}}catch(z){S.e(z)}finally{S.f()}if(0===i.children.length)return u.i.insertNodes(e,{text:""},{at:[].concat(Object(p.a)(a),[0])}),u.i.setNodes(e,{shouldEmpty:!0},{at:a}),!0;if(1==i.children.length&&u.c.child(i,0).type!=r.TD)return u.i.setNodes(e,{shouldEmpty:!0},{at:a}),!0;if(i.children.length>1){var D,I=Object(O.a)(u.c.children(e,a,{reverse:!0}));try{for(I.s();!(D=I.n()).done;){var L=Object(s.a)(D.value,2),A=L[0],k=L[1];if(u.h.isText(A))return u.i.removeNodes(e,{at:k}),!0}}catch(z){I.e(z)}finally{I.f()}}return u.i.setNodes(e,{shouldEmpty:!1},{at:a}),!0}if(u.b.isElement(i)&&r.TD==i.type){var P=M.getParent(e,a),R=Object(s.a)(P,1)[0];if(!u.b.isElement(R)||![r.TR].includes(R.type))return u.i.removeNodes(e,{at:a}),!0;if(1==i.children.length&&u.h.isText(u.c.child(i,0))&&""==u.a.string(e,a,{voids:!0}))return u.i.wrapNodes(e,{type:r.DIV,children:[{text:""}]},{at:[].concat(Object(p.a)(a),[0])}),!0}},tabEvent:function(e){var t=H.getEditingTd(e);t&&B.findTargetTd(e,t,"right",!0)},shiftTabEvent:function(e){var t=H.getEditingTd(e);t&&(u.i.deselect(e),B.findTargetTd(e,t,"left",!0))},deleteRow:function(e){var t,n=[1/0,-1/0],i=H.getFirstSelectedTd(e)||H.getEditingTd(e);if(i){var a=u.a.above(e,{at:i[1],match:function(e){return u.b.isElement(e)&&e.type==r.TBODY}});if(a){var o=B.getTdMap(a).tdMap;if(o){var c=Array.from((null===(t=B.getSelectedTdInTdMap(a))||void 0===t?void 0:t.keys())||[]);if(0!=c.length)if(c.forEach((function(e){n[0]=Math.min(n[0],e.row),n[1]=Math.max(n[1],e.row+e.rowSpan)})),n[1]-n[0]!=o.length){for(var l=[],s=n[0];s<n[1];s++){l.unshift([].concat(Object(p.a)(a[1]),[s]));for(var d=0;d<o[s].length;d++){var f=o[s][d];f.rowSpan--;var b=[].concat(Object(p.a)(a[1]),[f.originRow,f.originCol]);0!=f.rowSpan&&u.i.setNodes(e,{rowSpan:f.rowSpan},{at:b}),d+=f.colSpan-1}}for(var h=n[0];h<n[1];h++)for(var j=0;j<o[h].length;j++){var v=o[h][j];if(v.rowSpan>0&&v.row>=n[0]&&v.row==h&&v.col==j){var O=n[1],m=o[O][v.col-1];m?u.i.moveNodes(e,{at:[].concat(Object(p.a)(a[1]),[v.originRow,v.originCol]),to:[].concat(Object(p.a)(a[1]),[O,m.originCol+1])}):u.i.moveNodes(e,{at:[].concat(Object(p.a)(a[1]),[v.originRow,v.originCol]),to:[].concat(Object(p.a)(a[1]),[O,0])})}j+=v.colSpan-1}l.forEach((function(t){u.i.removeNodes(e,{at:t})})),H.resetSelectedTds(e)}else u.i.removeNodes(e,{at:u.e.parent(a[1])})}}}},deleteColumn:function(e){var t,n=[1/0,-1/0],i=H.getFirstSelectedTd(e)||H.getEditingTd(e);if(i){var a=u.a.above(e,{at:i[1],match:function(e){return u.b.isElement(e)&&e.type==r.TBODY}});if(a){var o=B.getTdMap(a).tdMap;if(o){var c=Array.from((null===(t=B.getSelectedTdInTdMap(a))||void 0===t?void 0:t.keys())||[]);if(0!=c.length)if(c.forEach((function(e){n[0]=Math.min(n[0],e.col),n[1]=Math.max(n[1],e.col+e.colSpan)})),n[1]-n[0]!=o[0].length){for(var l=[],s=n[0];s<n[1];s++)for(var d=0;d<o.length;d++){var f=o[d][s];f.colSpan--;var b=[].concat(Object(p.a)(a[1]),[f.originRow,f.originCol]);0==f.colSpan?l.push(b):u.i.setNodes(e,{colSpan:f.colSpan},{at:b}),d+=f.rowSpan-1}l.sort((function(e,t){var n=e[e.length-2],r=t[t.length-2],i=e[e.length-1],a=t[t.length-1];return n>r?-1:n==r?a-i:1})),l.forEach((function(t){u.i.removeNodes(e,{at:t})})),H.resetSelectedTds(e)}else u.i.removeNodes(e,{at:u.e.parent(a[1])})}}}},insertColumn:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=H.getFirstSelectedTd(e)||H.getEditingTd(e);if(i){var a=u.a.parent(e,i[1]);if(a){var o=u.a.parent(e,a[1]);if(o){var c=B.getTdMap(o),l=c.tdMap,f=B.getSelectedTdInTdMap(o);if(u.b.isElement(i[0])&&u.b.isElement(i[0])&&u.b.isElement(o[0])){var b,h=d.b.toDOMNode(e,e),j=function(){return g.a.cloneDeep(new Array(n).fill(0).map((function(){return g.a.cloneDeep({type:r.TD,width:h.offsetWidth/10,height:R,children:[{type:r.DIV,children:[{text:""}]}]})})))},v=i[1].slice(i[1].length-2),m=Object(s.a)(v,2),y=m[0],x=m[1];if(f&&f.size>0){b="after"==t?-1/0:1/0;var T,w=Object(O.a)(f.keys());try{for(w.s();!(T=w.n()).done;){var S=T.value;b="after"==t?Math.max(b,S.col+S.colSpan):Math.min(b,S.col)}}catch(P){w.e(P)}finally{w.f()}}else{b=-1;for(var E=0;E<l[y].length;E++){var N=l[y][E];if(N.originCol==x&&N.originRow==y){b=N.col+("after"==t?N.colSpan:0);break}}}if(null!=b&&Number.isFinite(b)){for(var C=0;C<l.length;C++){var D=l[C][b];if(D){var I=[].concat(Object(p.a)(o[1]),[D.originRow,D.originCol]);D.col==b?u.i.insertNodes(e,j(),{at:[].concat(Object(p.a)(o[1]),[C,D.originCol])}):(u.i.setNodes(e,{colSpan:D.colSpan+1},{at:I}),C+=D.rowSpan-1)}else{var L,A,M,k;u.i.insertNodes(e,j(),{at:[].concat(Object(p.a)(o[1]),[C,(null===(L=o[0])||void 0===L||null===(A=L.children)||void 0===A||null===(M=A[C])||void 0===M||null===(k=M.children)||void 0===k?void 0:k.length)||0])})}}H.resetSelectedTds(e)}}}}}},insertRow:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=H.getFirstSelectedTd(e)||H.getEditingTd(e);if(i){var a=u.a.parent(e,i[1]);if(a){var o=u.a.parent(e,a[1]);if(o){var c=B.getTdMap(o),l=c.tdMap,f=B.getSelectedTdInTdMap(o);if(u.b.isElement(i[0])&&u.b.isElement(i[0])&&u.b.isElement(o[0])){var b,h=d.b.toDOMNode(e,e),j={type:r.TD,width:h.offsetWidth/10,height:R,children:[{type:r.DIV,children:[{text:""}]}]},v=i[1].slice(i[1].length-2),m=Object(s.a)(v,2),y=m[0],x=m[1];if(f&&f.size>0){b="after"==t?-1/0:1/0;var T,w=Object(O.a)(f.keys());try{for(w.s();!(T=w.n()).done;){var S=T.value;b="after"==t?Math.max(b,S.row+S.rowSpan):Math.min(b,S.row)}}catch(A){w.e(A)}finally{w.f()}}else{b=-1;for(var E=0;E<l[y].length;E++){var N=l[y][E];if(N.originCol==x&&N.originRow==y){b=N.row+("after"==t?N.rowSpan:0);break}}}if(-1!=b&&Number.isFinite(b)){var C=function(e){return new Array(n).fill(0).map((function(){return g.a.cloneDeep({type:r.TR,children:new Array(e).fill(0).map((function(){return g.a.cloneDeep(j)}))})}))};if(null!=l[b]){for(var D=0,I=0;I<l[b].length;I++){var L=l[b][I];L.row==b?D++:(u.i.setNodes(e,{rowSpan:L.rowSpan+1},{at:[].concat(Object(p.a)(o[1]),[L.originRow,L.originCol])}),I+=L.colSpan-1)}u.i.insertNodes(e,C(D),{at:[].concat(Object(p.a)(o[1]),[b])}),H.resetSelectedTds(e)}else u.i.insertNodes(e,C(l[0].length),{at:[].concat(Object(p.a)(o[1]),[b])})}}}}}},splitTd:function(e){var t=u.a.nodes(e,{at:[],match:function(e){return H.isSelectedTd(e)||u.b.isElement(e)&&1==e.tdIsEditing}});if(t){var n,i=null,a=Object(O.a)(t);try{var o=function(){var t=Object(s.a)(n.value,2),a=t[0],o=t[1];if(!u.b.isElement(a))return"continue";if(u.i.setNodes(e,{colSpan:1,rowSpan:1},{at:o}),u.i.unsetNodes(e,["selected","start"],{at:o}),(!a.colSpan||a.colSpan<2)&&(!a.rowSpan||a.rowSpan<2))return"continue";if(!i&&!(i=u.a.above(e,{at:o,mode:"lowest",match:function(e){return u.b.isElement(e)&&e.type==r.TBODY}})))return"continue";for(var c=u.a.parent(e,o),l=o[o.length-1],d=o[o.length-2],f=a.colSpan||1,b=a.rowSpan||1,h=0,j=0;j<l;j++){var v,O,m;h+=(null===(v=c[0])||void 0===v||null===(O=v.children)||void 0===O||null===(m=O[j])||void 0===m?void 0:m.colSpan)||1}for(var y=function(e){for(var t=0,n=0;n<e[0].children.length;n++)if((t+=e[0].children[n].colSpan||1)==h)return n+1;return 0},x=d,T=0;T<b;T++,x++){var w=x==d,S=y(u.a.node(e,[].concat(Object(p.a)(i[1]),[x]))),E=f-(w?1:0);u.i.insertNodes(e,new Array(E).fill(0).map((function(){return g.a.cloneDeep({type:r.TD,children:[{type:r.DIV,children:[{text:""}]}]})})),{at:[].concat(Object(p.a)(i[1]),[x,S+(w?1:0)])})}return H.splitTd(e),H.resetSelectedTds(e),{v:void 0}};for(a.s();!(n=a.n()).done;){var c=o();if("continue"!==c&&"object"===typeof c)return c.v}}catch(l){a.e(l)}finally{a.f()}}},mergeTd:function(e){var t=1==H.getSelectedTdsSize(e),n=H.getFirstSelectedTd(e);if(n&&null!=t){var i=u.a.above(e,{at:n[1],mode:"lowest",match:function(e){return u.b.isElement(e)&&e.type==r.TBODY}});if(i){var a=B.getSelectedTdInTdMap(i);if(a){var o=i[1],c=Array.from(null===a||void 0===a?void 0:a.keys());c.sort((function(e,t){return e.row>t.row?1:e.row==t.row?e.col-t.col:-1}));var l=c[0],s=0,d=0;c.forEach((function(e){s=Math.max(s,e.colSpan+e.col-l.col),d=Math.max(d,e.rowSpan+e.row-l.row)}));var f=[].concat(Object(p.a)(o),[l.originRow,l.originCol]);u.i.setNodes(e,{colSpan:s,rowSpan:d},{at:f}),c.forEach((function(t){var n;if(t.col!=l.col||t.row!=l.row){var r=[].concat(Object(p.a)(o),[t.originRow,t.originCol]);if(u.i.setNodes(e,{toBeDeleted:!0},{at:r}),""!==u.a.string(e,r,{voids:!0})){var i=t.children;u.i.insertNodes(e,i,{at:[].concat(Object(p.a)(f),[null===(n=u.a.node(e,f))||void 0===n?void 0:n[0].children.length])})}}})),u.i.removeNodes(e,{at:[],match:function(e){return H.isTd(e)&&1==e.toBeDeleted}}),H.resetSelectedTds(e)}}}},deleteTable:function(e){var t=function(e){var t,n=H.getFirstSelectedTd(e);return n?t=u.a.above(e,{mode:"lowest",at:n[1],match:function(e){return H.isTable(e)}}):e.selection&&(t=u.a.above(e,{mode:"lowest",match:function(e){return H.isTable(e)}})),t}(e);t&&(u.i.removeNodes(e,{at:t[1]}),H.resetSelectedTds(e))},getSelectedTdsPath:function(e){var t,n=C(e),r=[],i=Object(O.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value.split(",").map((function(e){return+e}));r.push(a)}}catch(o){i.e(o)}finally{i.f()}return r},getSelectedTds:function(e){var t,n=C(e),r=[],i=Object(O.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value.split(",").map((function(e){return+e})),o=u.a.node(e,a);r.push(o)}}catch(c){i.e(c)}finally{i.f()}return r},getFirstSelectedTd:function(e){var t=C(e),n=Array.from(t).sort((function(e,t){return e>t?1:e===t?0:-1}));if(0==n.length)return null;var r=n[0].split(",").map((function(e){return+e}));return u.a.node(e,r)},getEditingTd:function(e){var t=u.a.nodes(e,{match:function(e){return H.isTd(e)},mode:"lowest"});return Object(s.a)(t,1)[0]},getEditingTdsPath:function(e){return L(e)},getSelectedTdsSize:function(e){return C(e).size},resetSelectedTds:function(e){var t=Array.from(u.a.nodes(e,{at:[],match:function(e){return H.isSelectedTd(e)}})).map((function(e){return e[1].join(",")}));D(new Set(t));var n=Array.from(u.a.nodes(e,{at:[],match:function(e){return H.isTd(e)&&1==e.start}})).map((function(e){return e[1].join(",")}));A(new Set(n))},copyCells:function(e){var t,n=H.getSelectedTds(e);S(n.sort((function(e,t){var n=e[1].slice(e[1].length-2),r=Object(s.a)(n,2),i=r[0],a=r[1],o=t[1].slice(t[1].length-2),c=Object(s.a)(o,2),l=c[0],u=c[1];return i>l?1:i===l?a-u:-1})));var i=u.a.above(e,{at:n[0][1],mode:"lowest",match:function(e){return u.b.isElement(e)&&e.type===r.TBODY}});if(i){var a=Array.from((null===(t=B.getSelectedTdInTdMap(i))||void 0===t?void 0:t.keys())||[]),o=B.getTdMap(i).startPoins,c=0,l=0;a.forEach((function(e){var t=e.row,n=e.col;c=Math.max(n+(e.colSpan||1)-o[0].col,c),l=Math.max(t+(e.rowSpan||1)-o[0].row,l)})),N({copyedAreaWidth:c,copyedAreaHeight:l})}},isSelectTableAllTd:function(e){var t=H.getSelectedTds(e);if(t.length<=0)return!1;var n=t[0],i=u.a.nodes(e,{at:n[1],match:function(e){return H.isTable(e)}}),a=Object(s.a)(i,1)[0];return!!a&&Array.from(u.c.descendants(a[0])).filter((function(e){return e[0].type===r.TD})).length===t.length},pasteCells:function(e){var t=T(),n=E();if(!t||n){if(n){var i={copyedAreaHeight:x.copyedAreaHeight,copyedAreaWidth:x.copyedAreaWidth},a=i.copyedAreaWidth,o=i.copyedAreaHeight,c=Array.from(H.getSelectedTds(e)),d=u.a.above(e,{at:c[0][1],mode:"lowest",match:function(e){return u.b.isElement(e)&&e.type===r.TBODY}});if(d)if(1!=n.length){var f=B.getTdMap(d),b=f.tdMap,h=f.startPoins[0];if(h.row+o>b.length||h.col+a>b[0].length)return F.b.error("\u65e0\u6cd5\u5b8c\u6574\u8986\u76d6\u76ee\u6807\u533a\u57df"),!1;for(var j=[],v=h.row;v<b.length&&v<h.row+o;v++)for(var m=h.col;m<b[0].length&&m<h.col+a;m++){var y=b[v][m];if(j.unshift([y.originRow,y.originCol]),y.col<h.col||y.col+y.colSpan>h.col+a||y.row<h.row||y.row+y.rowSpan>h.row+o)return F.b.error("\u65e0\u6cd5\u5b8c\u6574\u8986\u76d6\u76ee\u6807\u533a\u57df"),!1}g.a.uniqWith(j,(function(e,t){return e.join(",")===t.join(",")})).forEach((function(t){u.i.removeNodes(e,{at:[].concat(Object(p.a)(d[1]),Object(p.a)(t))})}));for(var w=n.slice().reduce((function(e,t){return Math.min(e,t[1][t[1].length-2])}),1/0),S=function(t,r){var i=b[r][h.col],a=[];n.forEach((function(e){var n=e[1];n[n.length-2]===t&&a.push(Object(l.a)(Object(l.a)({},e[0]),{},{selected:!1,start:!1}))})),a.length>0&&u.i.insertNodes(e,g.a.cloneDeep(a),{at:[].concat(Object(p.a)(d[1]),[r,i.originCol])})},N=h.row,C=w;N<h.row+o;N++,C++)S(C,N);B.deselectAllTd(e),H.resetSelectedTds(e)}else{var D=n[n.length-1];if(!D)return;c.forEach((function(t){var n=t[0].children.length;u.i.insertNodes(e,g.a.cloneDeep(D[0].children),{at:[].concat(Object(p.a)(t[1]),[0])});var r,i=Object(O.a)(u.c.children(e,t[1],{reverse:!0}));try{for(i.s();!(r=i.n()).done;){var a=Object(s.a)(r.value,2)[1];if(0==n--)break;u.i.removeNodes(e,{at:a})}}catch(o){i.e(o)}finally{i.f()}}))}}}else{var I=Array.from(H.getSelectedTdsPath(e));B.clearTd(e);for(var L=0,A=I;L<A.length;L++){var k=A[L];u.i.insertNodes(e,g.a.cloneDeep(M.filterCopyedContent(t)),{at:[].concat(Object(p.a)(k),[0])}),u.i.removeNodes(e,{at:[].concat(Object(p.a)(k),[Array.from(u.c.children(e,k)).length-1])})}}}},W=n(370),V=n(371),Y=n(372),U=n(407),K=(n(221),n(369)),q=n(122),G=n(84),X=function(e){return Object(k.jsx)(q.a,{title:e.title,mouseEnterDelay:0,mouseLeaveDelay:0,children:Object(k.jsx)(G.a,{className:"cyEditor__toolbar__button",type:"text",disabled:e.disabled,onMouseDown:function(t){t.preventDefault(),e.mousedownFunc(t)},children:e.children})})},J=function(){var e=Object(d.g)();return Object(k.jsx)(X,{title:"\u6e05\u9664\u683c\u5f0f",mousedownFunc:function(){!function(e){var t=H.getSelectedTds(e);if(t.length>0){var n,r=Object(O.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;u.i.unsetNodes(e,Object.values(b),{at:i[1]})}}catch(h){r.e(h)}finally{r.f()}}else{var a,o=u.a.nodes(e,{mode:"lowest",match:function(e){return M.isTextWrapper(e)}}),c=Object(O.a)(o);try{for(c.s();!(a=c.n()).done;){var l=a.value;u.i.unsetNodes(e,Object.values(b),{at:l[1]})}}catch(h){c.e(h)}finally{c.f()}for(var s=0,d=Object.values(b);s<d.length;s++){var f=d[s];u.a.removeMark(e,f)}}}(e)},children:Object(k.jsx)(K.a,{component:function(){return Object(k.jsxs)("svg",{viewBox:"0 0 1084 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"853",width:"14",height:"14",children:[Object(k.jsx)("defs",{children:Object(k.jsx)("style",{type:"text/css"})}),Object(k.jsx)("path",{d:"M719.329882 422.249412l-255.578353 255.578353 234.315295 234.315294 255.518117-255.638588-234.315294-234.255059zM59.151059 315.813647l298.164706-298.164706a60.235294 60.235294 0 0 1 85.172706 0l596.329411 596.329412a60.235294 60.235294 0 0 1 0 85.172706l-298.164706 298.164706a60.235294 60.235294 0 0 1-85.232941 0l-596.329411-596.329412a60.235294 60.235294 0 0 1 0-85.172706z",fill:"#333333","p-id":"854"})]})}})})},Z=n(379),$=50,Q=!1,ee=function(e){var t=Object(d.f)(),n=Object(i.useContext)(an).setSavedMarks,r=Object(i.useState)(!1),a=Object(s.a)(r,2),o=a[0],c=a[1],f=Object(i.useRef)({isDisabled:g.a.debounce((function(){var e=1===H.getSelectedTdsSize(t),n=null!=t.selection&&u.g.isExpanded(t.selection);Q&&c(!(e||n))}),$)});Object(i.useEffect)((function(){return Q=!0,function(){Q=!1}}),[]),Object(i.useEffect)((function(){f.current.isDisabled()}));return Object(i.useMemo)((function(){return Object(k.jsx)(X,{title:"\u683c\u5f0f\u5237",disabled:o,mousedownFunc:function(){!function(){try{var e=H.getSelectedTdsSize(t)>1,r=H.getFirstSelectedTd(t);if(r&&!e&&u.b.isElement(r[0]))return void n(r[0]||null);if(!t.selection)return null;var i=u.a.marks(t),a=u.a.above(t,{mode:"lowest",match:function(e){return M.isTextWrapper(e)}});n(a?Object(l.a)(Object(l.a)({},i),a[0])||null:i||null)}catch(o){console.warn(o)}}()},children:Object(k.jsx)(Z.a,{})})}),[o])},te=n(374),ne=!1,re=function(e){var t=Object(d.f)(),n=Object(i.useState)(!1),r=Object(s.a)(n,2),a=r[0],o=r[1],c=Object(i.useState)(""),l=Object(s.a)(c,2),u=l[0],f=l[1],b=Object(i.useRef)(),h=Object(i.useRef)({getValue:g.a.debounce((function(){ne&&f(e.getValue(t))}),$)});return Object(i.useEffect)((function(){return ne=!0,function(){ne=!1}}),[]),Object(i.useEffect)((function(){h.current.getValue()})),Object(i.useMemo)((function(){return Object(k.jsx)(q.a,{title:e.title,zIndex:99,mouseEnterDelay:0,mouseLeaveDelay:0,children:Object(k.jsxs)("div",{ref:b,style:{width:100,position:"relative"},className:"cyEditor__toolbar__button",onMouseLeave:function(){o(!1)},children:[Object(k.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:1,cursor:"pointer"},onMouseDown:function(e){e.preventDefault(),o(!a)}}),Object(k.jsx)(te.a,{placeholder:e.title,value:u,bordered:!1,style:{width:"100%"},open:a,dropdownClassName:"cyEditor__toolbar__dropdown",getPopupContainer:function(e){return e.parentElement||document.body},onSelect:function(n){var r;d.b.focus(t),null===e||void 0===e||null===(r=e.afterSelect)||void 0===r||r.call(e,n),o(!1)},children:e.options.map((function(t){var n;return Object(k.jsx)(te.a.Option,{value:String(t),children:(null===e||void 0===e||null===(n=e.optionLabelRender)||void 0===n?void 0:n.call(e,t))||t},t)}))})]})})}),[a,u])},ie=function(){var e=Object(d.g)();return Object(k.jsx)(re,{getValue:function(e){var t=H.getFirstSelectedTd(e);if(t&&u.b.isElement(t[0]))return t[0][b.TextAlign]||"\u5de6\u5bf9\u9f50";var n=u.a.nodes(e,{match:function(e){return M.isTextWrapper(e)}}),r=Object(s.a)(n,1)[0];if(!r)return"\u5de6\u5bf9\u9f50";var i=u.b.isElement(r[0])&&r[0].textAlign;return!1===i||null==i?"left":i},options:["left","right","center"],optionLabelRender:function(e){return"left"===e?"\u5de6\u5bf9\u9f50":"right"===e?"\u53f3\u5bf9\u9f50":"center"===e?"\u5c45\u4e2d\u5bf9\u9f50":"".concat(e)},title:"\u5bf9\u9f50\u65b9\u5f0f",afterSelect:function(t){d.b.focus(e);var n=H.getSelectedTds(e);if(n.length>0){var r,i=Object(O.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;u.i.setNodes(e,{textAlign:t},{at:a[1]})}}catch(o){i.e(o)}finally{i.f()}}else e.selection&&u.i.setNodes(e,{textAlign:t},{mode:"lowest",match:function(e){return M.isTextWrapper(e)}})}})},ae=function(){var e=Object(d.g)();return Object(k.jsx)(re,{getValue:function(e){return String(function(e,t){try{var n=H.getFirstSelectedTd(e);if(n&&u.b.isElement(n[0]))return n[0][t];if(!e.selection)return null;var r=u.a.marks(e);return null===r||void 0===r?void 0:r[t]}catch(i){return console.error(i),!1}}(e,b.FontSize)||14)},options:[12,13,14,15,16,19,22,24,29,32,40,48],optionLabelRender:function(e){return"".concat(e,"px")},title:"\u5b57\u4f53\u5927\u5c0f",afterSelect:function(t){var n=H.getSelectedTds(e);if(n.length>0){var r,i=Object(O.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;u.i.setNodes(e,Object(c.a)({},b.FontSize,Number(t)),{at:a[1]})}}catch(o){i.e(o)}finally{i.f()}}else e.selection&&u.a.addMark(e,b.FontSize,Number(t))}})},oe=function(){var e=Object(d.g)(),t=function(t){var n=H.getSelectedTds(e);n.length>0?n.forEach((function(n){u.i.setNodes(e,{type:t},{at:n[1],match:function(e){return M.isTextWrapper(e)}})})):u.i.setNodes(e,{type:t},{hanging:!0,mode:"lowest",match:function(e){return M.isTextWrapper(e)}})};return Object(k.jsx)(re,{getValue:function(e){var t=u.a.nodes(e,{match:function(e){return M.isTextWrapper(e)}}),n=Object(s.a)(t,1)[0];if(!n)return"\u6b63\u6587";var r=u.b.isElement(n[0])&&n[0].type;return"div"===r||!1===r?"\u6b63\u6587":r.toUpperCase()},options:["H1","H2","H3","H4","\u6b63\u6587"],optionLabelRender:function(e){return Object(k.jsx)("span",{children:e})},title:"\u5b57\u4f53\u6837\u5f0f",afterSelect:function(e){"H1"===e&&t(r.H1),"H2"===e&&t(r.H2),"H3"===e&&t(r.H3),"H4"===e&&t(r.H4),"\u6b63\u6587"===e&&t(r.DIV)}})},ce=n(381),le=n(376),se=n(380),ue=n(199),de=function(e){var t=Object(i.useState)({hex:e.value}),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(k.jsxs)("div",{style:{padding:8,display:"flex",justifyContent:"flex-start",backgroundColor:"white",flexDirection:"column"},className:"cyEditor__toolbar__colorPanelWrapper",children:[Object(k.jsx)(ue.a,{color:r.hex,onChange:function(t){var n;a(t),null===e||void 0===e||null===(n=e.onChange)||void 0===n||n.call(e,t.hex)}}),Object(k.jsx)(G.a,{icon:Object(k.jsx)(se.a,{}),size:"small",onClick:function(){var t;null===e||void 0===e||null===(t=e.onChange)||void 0===t||t.call(e,"unset"),a({hex:""})},children:"\u91cd\u7f6e"})]})},fe=!1,be=function(e){var t=Object(d.f)(),n=Object(i.useState)(""),r=Object(s.a)(n,2),a=r[0],o=r[1],c=Object(i.useState)(!1),l=Object(s.a)(c,2),f=l[0],b=l[1],h=Object(i.useRef)({_getColor:g.a.debounce((function(){fe&&o(j())}),$)});Object(i.useEffect)((function(){return fe=!0,function(){fe=!1}}),[]);var j=function(){var n=H.getFirstSelectedTd(t);if(n)return u.b.isElement(n[0])&&(n[0][e.mark]||"unset");if(!t.selection)return"unset";if(!e.mark)return"unset";var r=u.a.marks(t);return r&&(null===r||void 0===r?void 0:r[null===e||void 0===e?void 0:e.mark])||window.getComputedStyle(document.body).color};return Object(i.useEffect)((function(){h.current._getColor()})),Object(i.useMemo)((function(){return Object(k.jsx)(q.a,{title:e.title,zIndex:99,mouseLeaveDelay:0,mouseEnterDelay:0,children:Object(k.jsx)("div",{onMouseLeave:function(){b(!1)},children:Object(k.jsx)(le.a,{placement:"bottomCenter",overlayStyle:{zIndex:999},visible:f,overlay:function(){return Object(k.jsx)(de,{value:a,onChange:function(t){var n;null===e||void 0===e||null===(n=e.onChange)||void 0===n||n.call(e,t),b(!1)}})},trigger:["click"],getPopupContainer:function(e){return e.parentElement||document.body},children:Object(k.jsx)(G.a,{type:"text",style:{color:a},onMouseDown:function(e){e.preventDefault(),b(!0)},children:e.icon})})})})}),[a,f])},he=function(){var e=Object(d.g)();return Object(k.jsx)(be,{title:"\u5b57\u4f53\u989c\u8272",onChange:function(t){d.b.focus(e);var n=H.getSelectedTds(e);if(n.length>0){var r,i=Object(O.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;u.i.setNodes(e,Object(c.a)({},b.Color,t),{at:a[1]})}}catch(o){i.e(o)}finally{i.f()}}else e.selection&&u.a.addMark(e,b.Color,t)},mark:b.Color,icon:Object(k.jsx)(ce.a,{})})},je=n(382),ve=function(){var e=Object(d.g)();return Object(k.jsx)(be,{title:"\u80cc\u666f\u8272",onChange:function(t){d.b.focus(e);var n=H.getSelectedTds(e);if(n.length>0){var r,i=Object(O.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;u.i.setNodes(e,Object(c.a)({},b.BGColor,t),{at:a[1]})}}catch(o){i.e(o)}finally{i.f()}}else e.selection&&u.a.addMark(e,b.BGColor,t)},mark:b.BGColor,icon:Object(k.jsx)(je.a,{})})},Oe=n(383),pe=!1,me=function(e){var t=Object(d.f)(),n=Object(i.useState)("text"),r=Object(s.a)(n,2),a=r[0],o=r[1],l=Object(i.useRef)({getType:g.a.debounce((function(){pe&&o(e.mark&&function(e,t){try{var n=H.getFirstSelectedTd(e);if(n&&u.b.isElement(n[0]))return n[0][t];if(!e.selection)return null;var r=u.a.marks(e);return!0===(null===r||void 0===r?void 0:r[t])}catch(i){return console.error(i),!1}}(t,e.mark)?"link":"text")}),$)});Object(i.useEffect)((function(){return pe=!0,function(){pe=!1}}),[]),Object(i.useEffect)((function(){l.current.getType()}));return Object(i.useMemo)((function(){return Object(k.jsx)(q.a,{title:e.title,mouseEnterDelay:0,mouseLeaveDelay:0,children:Object(k.jsx)(G.a,{className:"cyEditor__toolbar__button",type:a,onMouseDown:function(n){n.preventDefault(),e.mark&&function(e){var n=H.getSelectedTds(t);if(n.length>0){d.b.focus(t);var r=n[0][0];if(!u.b.isElement(r))return;n.forEach((function(n){u.b.isElement(n[0])&&(r[e]?u.i.unsetNodes(t,[e],{at:n[1]}):u.i.setNodes(t,Object(c.a)({},e,!0),{at:n[1]}))}))}else if(t.selection){var i=u.a.marks(t);(null===i||void 0===i?void 0:i[e])?u.a.removeMark(t,e):u.a.addMark(t,e,!0)}}(e.mark)},children:e.children})})}),[a])},ge=function(){return Object(k.jsx)(me,{title:"\u52a0\u7c97",mark:b.BOLD,children:Object(k.jsx)(Oe.a,{})})},ye=n(384),xe=function(){return Object(k.jsx)(me,{title:"\u659c\u4f53",mark:b.ITALIC,children:Object(k.jsx)(ye.a,{})})},Te=n(385),we=function(){return Object(k.jsx)(me,{title:"\u4e0b\u5212\u7ebf",mark:b.Underline,children:Object(k.jsx)(Te.a,{})})},Se=n(386),Ee=function(){return Object(k.jsx)(me,{title:"\u5220\u9664\u7ebf",mark:b.LineThrough,children:Object(k.jsx)(Se.a,{})})},Ne=n(387),Ce={toggleList:function(e,t){var n=u.a.nodes(e,{mode:"lowest",match:function(t){return u.h.isText(t)||u.a.isInline(e,t)}}),i=Object(s.a)(n,1)[0];if(i){var a=u.a.parent(e,i[1]);if(a){var o=u.a.parent(e,a[1]),c=Ce.isListItem(o[0])&&o,l=c&&M.getParent(e,c[1]),d=c&&l&&u.b.isElement(l[0])&&(null===l||void 0===l?void 0:l[0].type)==t,f=c&&!d,b=!c;c&&d?u.i.unwrapNodes(e,{match:function(e){return Ce.isListItem(e)}}):f?u.a.withoutNormalizing(e,(function(){var n,r=new Set,i=u.a.nodes(e,{mode:"lowest",match:function(e){return Ce.isListItem(e)}}),a=Object(O.a)(i);try{for(a.s();!(n=a.n()).done;){var o=Object(s.a)(n.value,2)[1],c=M.getParent(e,o);null!=c[0]&&r.add(c[1].join("-"))}}catch(l){a.e(l)}finally{a.f()}r.forEach((function(n){var r=n.split("-").map((function(e){return+e}));u.i.setNodes(e,{type:t},{at:r,hanging:!0})}))})):b&&u.a.withoutNormalizing(e,(function(){for(var n=0,i=Array.from(u.a.nodes(e,{reverse:!0,mode:"lowest",match:function(e){return M.isTextWrapper(e)}}));n<i.length;n++){var a=Object(s.a)(i[n],2)[1];if(0!=a.length){var o=M.getParent(e,a),c=Object(s.a)(o,1)[0];Ce.isListItem(c)||(u.i.wrapNodes(e,{type:r.LIST_ITEM,children:[]},{at:a}),Ce.isOrderList(c)||u.i.wrapNodes(e,{type:t,children:[]},{at:a}))}}}))}}},isInLi:function(e){if(e.selection&&u.g.isCollapsed(e.selection))return M.getFirstAboveElementType(e)==r.LIST_ITEM;if(!e.selection)return!1;var t=e.selection,n=t.focus.path,i=t.anchor.path,a=u.a.above(e,{at:n,match:function(e){return Ce.isListItem(e)}});return!!a||!!(a=u.a.above(e,{at:i,match:function(e){return Ce.isListItem(e)}}))},isInList:function(e){if(!e.selection)return!1;var t=e.selection,n=t.focus.path,r=t.anchor.path,i=u.a.above(e,{at:n,match:function(e){return Ce.isListItem(e)}});return!!i||!!(i=u.a.above(e,{at:r,match:function(e){return Ce.isListItem(e)}}))},isListItem:function(e){return u.b.isElement(e)&&[r.LIST_ITEM].includes(e.type)},isOrderList:function(e){return u.b.isElement(e)&&[r.NUMBER_LIST,r.NORMAL_LIST].includes(e.type)},normalizeList:function(e,t){var n=Object(s.a)(t,2),i=n[0],a=n[1];if(Ce.isListItem(i)){var o;if(i.children.length>1)return u.a.withoutNormalizing(e,(function(){var t=[].concat(Object(p.a)(a),[1]),n=Array.from(u.a.nodes(e,{at:t,match:function(t){return u.h.isText(t)||u.a.isInline(e,t)}}));u.i.wrapNodes(e,{type:r.LIST_ITEM,children:[]},{at:t}),u.i.removeNodes(e,{at:[].concat(Object(p.a)(t),[0])}),u.i.insertNodes(e,{type:r.DIV,children:n.map((function(e){return e[0]}))},{at:[].concat(Object(p.a)(t),[0])}),u.i.liftNodes(e,{at:t}),u.i.select(e,u.a.start(e,u.e.next(a)))})),!0;if(!Ce.isOrderList(null===(o=u.a.parent(e,a))||void 0===o?void 0:o[0]))return u.a.withoutNormalizing(e,(function(){u.i.unwrapNodes(e,{at:a}),u.i.select(e,u.a.start(e,a))})),!0;var c,l=Object(O.a)(u.c.children(e,t[1],{reverse:!0}));try{var d=function(){var t=Object(s.a)(c.value,2),n=t[0],i=t[1];return Ce.isOrderList(n)?(u.i.liftNodes(e,{at:i}),{v:!0}):M.isTextWrapper(n)?void 0:(u.a.withoutNormalizing(e,(function(){var t=Array.from(u.a.nodes(e,{at:u.a.range(e,i),match:function(t){return u.h.isText(t)||u.a.isInline(e,t)}}));u.i.wrapNodes(e,{type:r.DIV,children:[]},{at:i}),u.i.removeNodes(e,{at:[].concat(Object(p.a)(i),[0])}),u.i.insertNodes(e,t.map((function(e){return e[0]})),{at:[].concat(Object(p.a)(i),[0])})})),{v:!0})};for(l.s();!(c=l.n()).done;){var f=d();if("object"===typeof f)return f.v}}catch(F){l.e(F)}finally{l.f()}var h,j=new Set,v=Object(O.a)(u.c.texts(i));try{for(v.s();!(h=v.n()).done;){var m=Object(s.a)(h.value,1)[0];j.add(m[b.Color])}}catch(F){v.e(F)}finally{v.f()}if(1==j.size){var g=Array.from(j).pop();return void(g&&u.i.setNodes(e,{liColor:g},{at:a}))}}if(Ce.isOrderList(i)){var y=M.getPath(a,"pre"),x=M.getNodeByPath(e,y),T=Object(s.a)(x,1)[0];if(Ce.isOrderList(T)&&T.type!=i.type)return u.i.setNodes(e,{type:i.type},{at:y}),!0;if(Ce.isOrderList(T)&&T.type==i.type)return u.i.mergeNodes(e,{at:a}),!0;var w=M.getPath(a,"next"),S=M.getNodeByPath(e,w),E=Object(s.a)(S,1)[0];if(Ce.isOrderList(E)&&E.type!=i.type)return u.i.setNodes(e,{type:E.type},{at:w}),!0;if(Ce.isOrderList(E)&&E.type==i.type)return u.i.mergeNodes(e,{at:w}),!0;if(1==i.children.length){var N=u.c.first(i,[0]),C=Object(s.a)(N,1)[0];if(Ce.isOrderList(C)&&C.type!=i.type)return u.i.setNodes(e,{type:C.type},{at:a}),!0}var D,I=Object(O.a)(u.c.children(e,a,{reverse:!0}));try{for(I.s();!(D=I.n()).done;){var L=Object(s.a)(D.value,2),A=L[0],k=L[1];if(!Ce.isListItem(A)&&!Ce.isOrderList(A))return u.i.liftNodes(e,{at:k}),!0}}catch(F){I.e(F)}finally{I.f()}var P,R=0,z=Object(O.a)(u.c.children(e,a,{reverse:!0}));try{for(z.s();!(P=z.n()).done;){var B=Object(s.a)(P.value,1)[0];(Ce.isOrderList(B)||Ce.isListItem(B))&&R++}}catch(F){z.e(F)}finally{z.f()}if(0==R)return u.i.removeNodes(e,{at:a}),!0}return!1},tabEvent:function(e){u.a.withoutNormalizing(e,(function(){var t,n=u.a.nodes(e,{universal:!0,mode:"lowest",match:function(e){return Ce.isListItem(e)}}),r=Object(O.a)(n);try{for(r.s();!(t=r.n()).done;){var i=Object(s.a)(t.value,2),a=i[0],o=i[1];Ce.indentLi(e,[a,o])}}catch(c){r.e(c)}finally{r.f()}}))},indentLi:function(e,t){u.a.withoutNormalizing(e,(function(){var n=Object(s.a)(t,1)[0],r=d.b.findPath(e,n),i=M.getNodeByPath(e,M.getPath(r,"next")),a=M.getParent(e,r);i.length>0&&Ce.isOrderList(null===i||void 0===i?void 0:i[0])?u.i.wrapNodes(e,{type:i[0].type,children:[]},{at:r}):a.length>0&&Ce.isOrderList(null===a||void 0===a?void 0:a[0])&&u.i.wrapNodes(e,{type:a[0].type,children:[]},{at:r})}))},shiftTabEvent:function(e){u.a.withoutNormalizing(e,(function(){var t,n=u.a.nodes(e,{universal:!0,reverse:!0,mode:"lowest",match:function(e){return Ce.isListItem(e)}}),r=Object(O.a)(n);try{for(r.s();!(t=r.n()).done;){var i=Object(s.a)(t.value,2),a=i[0],o=i[1];Ce.liftLi(e,[a,o])}}catch(c){r.e(c)}finally{r.f()}}))},liftLi:function(e,t){var n=Object(s.a)(t,2)[1],r=M.getParent(e,n),i=Object(s.a)(r,2),a=i[0],o=i[1],c=a&&M.getParent(e,o),l=Object(s.a)(c,1)[0];Ce.isOrderList(l)&&u.i.liftNodes(e,{at:n})}},De=n(377),Ie=function(e){var t=e.attributes,n=e.children,r=e.element,i=Object(d.g)(),a=Object(d.d)();return Object(k.jsxs)("div",Object(l.a)(Object(l.a)({},t),{},{children:[Object(k.jsx)("span",{contentEditable:!1,style:{marginRight:4},children:Object(k.jsx)(De.a,{checked:r.checked,onChange:function(e){u.i.setNodes(i,{checked:e.target.checked},{at:d.b.findPath(i,r)})},disabled:a})}),Object(k.jsx)("span",{children:n})]}))},Le={isTodoList:function(e){return u.b.isElement(e)&&e.type===r.TODOLIST},isInToDoList:function(e){return null!=Le.getToDoList(e)},getToDoList:function(e){return u.a.above(e,{match:function(e){return u.b.isElement(e)&&e.type===r.TODOLIST}})},normalizeToDoList:function(e,t){if(u.b.isElement(t[0])&&t[0].type===r.TODOLIST){var n,i=Object(O.a)(u.c.descendants(t[0],{reverse:!0}));try{var a=function(){var r=Object(s.a)(n.value,2),i=r[0],a=r[1];if(!u.h.isText(i)&&!u.a.isInline(e,i))return u.a.withoutNormalizing(e,(function(){var n=Array.from(u.a.nodes(e,{at:u.a.range(e,a),match:function(t){return u.h.isText(t)||u.a.isInline(e,t)}}));u.i.removeNodes(e,{at:[].concat(Object(p.a)(t[1]),Object(p.a)(a))}),u.i.insertNodes(e,n.map((function(e){return e[0]})),{at:u.a.end(e,t[1])})})),{v:!0}};for(i.s();!(n=i.n()).done;){var o=a();if("object"===typeof o)return o.v}}catch(c){i.e(c)}finally{i.f()}}return!1},handleKeyDown:function(e,t){var n=Le.getToDoList(t);n&&"Home"===e.key&&0==e.shiftKey&&(e.preventDefault(),u.i.select(t,u.a.start(t,n[1])))}},Ae=!1,Me=function(e){var t=Object(d.f)(),n=e.mousedownFunc,r=e.title,a=e.disabledCondition,o=void 0===a?function(){return!1}:a,c=Object(i.useState)(!1),u=Object(s.a)(c,2),f=u[0],b=u[1],h=Object(i.useRef)({_isDisabled:g.a.debounce((function(){Ae&&b(o(t))}),$)}),j=Object(i.useRef)(null);return Object(i.useEffect)((function(){return Ae=!0,function(){h.current._isDisabled=function(){},Ae=!1}}),[]),Object(i.useEffect)((function(){h.current._isDisabled()})),Object(k.jsx)("div",{ref:j,children:Object(k.jsx)(q.a,{title:r,mouseEnterDelay:0,mouseLeaveDelay:0,children:Object(k.jsx)(G.a,Object(l.a)(Object(l.a)({className:"cyEditor__toolbar__button",type:"text",disabled:f,onMouseDown:function(e){e.preventDefault(),n(e)}},M.insertCypressId(e,"cypressId")),{},{children:e.children}))})})},ke=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u5f85\u529e\u5217\u8868",mousedownFunc:function(){!function(){var t=Array.from(u.a.nodes(e,{match:function(e){return Le.isTodoList(e)},reverse:!0}));t.length>0?t.forEach((function(t){u.a.withoutNormalizing(e,(function(){u.i.unwrapNodes(e,{at:t[1]}),u.i.wrapNodes(e,{type:r.DIV,children:[]},{at:t[1],mode:"lowest",match:function(e){return u.h.isText(e)}})}))})):u.a.withoutNormalizing(e,(function(){var t=Array.from(u.a.nodes(e,{mode:"lowest",match:function(e){return M.isTextWrapper(e)},reverse:!0}));t.length>0&&t.forEach((function(t){u.i.wrapNodes(e,{type:r.TODOLIST,children:[]},{at:t[1]}),u.i.unwrapNodes(e,{at:[].concat(Object(p.a)(t[1]),[0])}),M.isElementEmpty(e,t)&&u.i.insertText(e,"todo...",{at:u.a.end(e,Object(p.a)(t[1]))})}))}))}()},disabledCondition:function(e){return null==e.selection||Ce.isInLi(e)},cypressId:v.TODO_LIST,children:Object(k.jsx)(Ne.a,{})})},Pe=n(388),Re=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u6709\u5e8f\u5217\u8868",mousedownFunc:function(){Ce.toggleList(e,r.NUMBER_LIST)},disabledCondition:function(e){return null==e.selection||Le.isInToDoList(e)},cypressId:v.ORDER_LIST,children:Object(k.jsx)(Pe.a,{})})},ze=n(389),Be=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u65e0\u5e8f\u5217\u8868",mousedownFunc:function(){Ce.toggleList(e,r.NORMAL_LIST)},disabledCondition:function(e){return null==e.selection||Le.isInToDoList(e)},cypressId:v.NORMALIZE_LIST,children:Object(k.jsx)(ze.a,{})})},Fe=n(390),_e=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u8bbe\u7f6e\u94fe\u63a5",mousedownFunc:function(){!function(){var t=u.a.nodes(e,{match:function(e){return u.b.isElement(e)&&e.type===r.LINK}});Object(s.a)(t,1)[0]||u.i.wrapNodes(e,{type:r.LINK,url:"http://www.baidu.com",children:[]},{split:!0})}()},disabledCondition:function(e){return null==e.selection},children:Object(k.jsx)(Fe.a,{})})},He=n(21),We=n.n(He),Ve=n(83),Ye=n(391),Ue=n(119),Ke=n.n(Ue),qe=["image/apng","image/avif","image/gif","image/jpeg","image/png","image/svg+xml","image/webp"],Ge=5242880;var Xe=function(){var e=Object(Ve.a)(We.a.mark((function e(t){var n,r,i,a;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(i=new FormData).append("file",t),e.next=5,Ke()({method:"post",url:"http://localhost:3001/uploadFile",data:i,headers:{"Content-Type":"multipart/form-data;charset=UTF-8"}});case 5:return a=e.sent,e.abrupt("return","http://localhost:3001/".concat(null===a||void 0===a||null===(n=a.data)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.filename));case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,new Promise((function(e){setTimeout((function(){e()}),2e3)}));case 13:return e.abrupt("return",URL.createObjectURL(t));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Je=function(e,t){var n=function(e){var t=[],n=[];return Array.isArray(e)&&Array.from(e).forEach((function(e){!qe.includes(e.type)||e.size>Ge?n.push(e):t.push(e)})),{legalFiles:t,illegalFiles:n}}(t=Array.from(t)),i=n.illegalFiles,a=n.legalFiles;i.length>0&&F.b.error(i.map((function(e){return e.name})).join("\uff0c")+"\uff0c\u6587\u4ef6\u683c\u5f0f\u975e\u6cd5\uff08\u6216\u8d85\u8fc7\u6700\u5927\u9650\u5236".concat(5,"M\uff09"));var o,c=Object(O.a)(a);try{var l=function(){var t=o.value;!function(e,t,n,i){e.selection&&u.g.isExpanded(e.selection)&&u.i.collapse(e,{edge:"end"}),u.i.insertNodes(e,{type:r.IMG,url:t,id:n,children:[{text:""}]}),u.i.move(e),i(n)}(e,URL.createObjectURL(t),(new Date).getTime(),function(){var n=Object(Ve.a)(We.a.mark((function n(r){var i;return We.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Xe(t);case 2:i=n.sent,u.i.setNodes(e,{id:null,url:i},{at:[],match:function(e){return u.b.isElement(e)&&e.id===r}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())};for(c.s();!(o=c.n()).done;)l()}catch(s){c.e(s)}finally{c.f()}},Ze=function(){var e=Object(d.g)(),t=Object(i.useRef)();return Object(k.jsxs)(Me,{title:"\u63d2\u5165\u56fe\u7247\uff08\u652f\u6301\u683c\u5f0f\uff1a".concat(qe.join("\uff0c").replace(/image\//gi,"."),"\uff09"),mousedownFunc:function(){t.current&&t.current.click()},disabledCondition:function(e){return null==e.selection},children:[Object(k.jsx)("input",{ref:t,type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:function(t){var n=t.target.files;n&&Je(e,n)}}),Object(k.jsx)(Ye.a,{})]})},$e=n(392),Qe=[".doc",".docx",".xlsx",".xls",".csv",".pdf",".txt",".zip",".7z",".ppt",".pptx"],et=10485760;var tt=function(){var e=Object(Ve.a)(We.a.mark((function e(t){var n,r,i,a;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(i=new FormData).append("file",t),e.next=5,Ke()({method:"post",url:"http://localhost:3001/uploadFile",data:i,headers:{"Content-Type":"multipart/form-data;charset=UTF-8"}});case 5:return a=e.sent,e.abrupt("return","http://localhost:3001/".concat(null===a||void 0===a||null===(n=a.data)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.filename));case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,new Promise((function(e){setTimeout((function(){e()}),2e3)}));case 13:return e.abrupt("return",URL.createObjectURL(t));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),nt=function(e,t){var n=function(e){var t=[],n=[];return Array.isArray(e)&&Array.from(e).forEach((function(e){var r,i=null===(r=e.name.match(/\.\w+$/g))||void 0===r?void 0:r[0];!i||!Qe.includes(i)||e.size>et?n.push(e):t.push(e)})),{legalFiles:t,illegalFiles:n}}(t=Array.from(t)),i=n.illegalFiles,a=n.legalFiles;i.length>0&&F.b.error(i.map((function(e){return e.name})).join("\uff0c")+"\uff0c\u6587\u4ef6\u683c\u5f0f\u975e\u6cd5\uff08\u6216\u8d85\u8fc7\u6700\u5927\u9650\u5236".concat(10,"M\uff09"));var o,c=Object(O.a)(a);try{var l=function(){var t=o.value;!function(e,t,n,i,a){e.selection&&u.g.isExpanded(e.selection)&&u.i.collapse(e,{edge:"end"}),u.i.insertNodes(e,{type:r.FILE,url:t,fileName:n,id:i,children:[{text:""}]}),u.i.move(e),a(i)}(e,URL.createObjectURL(t),t.name,(new Date).getTime(),function(){var n=Object(Ve.a)(We.a.mark((function n(r){var i;return We.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,tt(t);case 2:i=n.sent,u.i.setNodes(e,{id:null,url:i},{at:[],match:function(e){return u.b.isElement(e)&&e.id===r}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())};for(c.s();!(o=c.n()).done;)l()}catch(s){c.e(s)}finally{c.f()}},rt=function(){var e=Object(d.g)(),t=Object(i.useRef)();return Object(k.jsxs)(Me,{title:"\u63d2\u5165\u9644\u4ef6\uff08\u652f\u6301\u683c\u5f0f\uff1a".concat(Qe.join("\uff0c"),"\uff09"),mousedownFunc:function(){t.current&&t.current.click()},disabledCondition:function(e){return null==e.selection},children:[Object(k.jsx)("input",{ref:t,type:"file",multiple:!0,hidden:!0,onChange:function(t){var n=t.target.files;n&&nt(e,n)}}),Object(k.jsx)($e.a,{})]})},it=n(393),at=function(e){var t=Object(d.f)(),n=Object(i.useState)(!1),a=Object(s.a)(n,2),o=a[0],c=a[1],l=Object(i.useState)(""),f=Object(s.a)(l,2),b=f[0],h=f[1],j=Object(i.useRef)(),v=Object(i.useState)(!1),O=Object(s.a)(v,1)[0],p=Object(i.useRef)({_isDisabled:g.a.debounce((function(){}),$)});Object(i.useEffect)((function(){p.current._isDisabled()}));var m=function(e){var t=j.current,n=e.target,r=e.target.parentNode;if(t&&n&&r){Array.from(t.querySelectorAll("td")).forEach((function(e){e.style.backgroundColor="unset"}));for(var i=Array.from(t.querySelectorAll("tr")),a=0;a<=r.rowIndex;a++)for(var o=i[a],c=Array.from(o.querySelectorAll("td")),l=0;l<=n.cellIndex;l++){c[l].style.backgroundColor="rgba(180,215,255,.7)"}h("".concat(n.cellIndex+1,"x").concat(r.rowIndex+1))}},y=function(){var e=Number(b.split("x")[0]),n=Number(b.split("x")[1]);if(Number.isInteger(e)&&Number.isInteger(n)&&(d.b.focus(t),t.selection)){var i=u.a.nodes(t,{mode:"lowest",match:function(e){return M.isTextWrapper(e)}}),a=Object(s.a)(i,1)[0];if(a){var o=d.b.toDOMNode(t,a[0]);if(o.offsetParent){var l=o.offsetWidth-2;u.i.collapse(t);var f=t.selection.anchor.path;u.i.insertNodes(t,{type:r.TABLE,wrapperWidthWhenCreated:l,children:[{type:r.TBODY,children:new Array(n).fill("0").map((function(){return{type:r.TR,children:new Array(e).fill("0").map((function(){return{type:r.TD,width:l/e,height:R,children:[{type:r.DIV,children:[{text:""}]}]}}))}}))}]},{at:[f[0]+1]}),u.i.deselect(t),c(!1)}}}};return Object(i.useMemo)((function(){return Object(k.jsx)("div",{onMouseLeave:function(){c(!1)},children:Object(k.jsx)(le.a,{placement:"bottomCenter",overlayStyle:{zIndex:999},visible:o,overlay:function(){return Object(k.jsxs)("div",{className:"cyEditor__toolbar__tablePanelWrapper",style:{width:200,padding:8,display:"flex",justifyContent:"flex-start",backgroundColor:"white",flexDirection:"column"},children:[o?Object(k.jsx)("table",{border:"1",ref:j,children:Object(k.jsx)("tbody",{children:new Array(10).fill(0).map((function(e,t){return Object(k.jsx)("tr",{children:new Array(10).fill(0).map((function(e,t){return Object(k.jsx)("td",{onMouseEnter:m,onClick:y},t)}))},t)}))})}):null,Object(k.jsx)("div",{style:{textAlign:"right"},children:b})]})},trigger:["click"],getPopupContainer:function(e){return e.parentElement||document.body},children:Object(k.jsx)(q.a,{title:"\u8868\u683c",zIndex:99,mouseLeaveDelay:0,mouseEnterDelay:0,children:Object(k.jsx)(G.a,{type:"text",onMouseDown:function(e){e.preventDefault(),c(!0)},disabled:O,children:Object(k.jsx)(it.a,{})})})})})}),[o,O,b])},ot=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u5220\u9664\u8868\u683c",mousedownFunc:function(){H.deleteTable(e)},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(se.a,{})})},ct=n(394),lt=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u5220\u9664\u5217",mousedownFunc:function(){H.deleteColumn(e)},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(ct.a,{})})},st=n(395),ut=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u5220\u9664\u884c",mousedownFunc:function(){H.deleteRow(e)},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(st.a,{})})},dt=n(396),ft=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u540e\u63d2\u5165\u6587\u672c",mousedownFunc:function(){!function(){if(e.selection){var t=u.a.nodes(e,{mode:"highest",match:function(t){return!u.a.isEditor(t)&&(u.a.isBlock(e,t)||u.a.isVoid(e,t))}}),n=Object(s.a)(t,1)[0];n&&u.i.insertNodes(e,{type:r.DIV,children:[{text:"some text..."}]},{at:u.e.next(n[1])})}}()},disabledCondition:function(e){var t=H.isInTable(e),n=u.a.nodes(e,{mode:"highest",match:function(e){return u.b.isElement(e)&&r.CODE===e.type}});return!(Object(s.a)(n,1)[0]||t)},children:Object(k.jsx)(dt.a,{})})},bt=n(397),ht=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u524d\u63d2\u5165\u6587\u672c",mousedownFunc:function(){!function(){if(e.selection){var t=u.a.nodes(e,{mode:"highest",match:function(t){return!u.a.isEditor(t)&&(u.a.isBlock(e,t)||u.a.isVoid(e,t))}}),n=Object(s.a)(t,1)[0];n&&u.i.insertNodes(e,{type:r.DIV,children:[{text:"some text..."}]},{at:n[1]})}}()},disabledCondition:function(e){var t=H.isInTable(e),n=u.a.nodes(e,{mode:"highest",match:function(e){return u.b.isElement(e)&&r.CODE===e.type}});return!(Object(s.a)(n,1)[0]||t)},children:Object(k.jsx)(bt.a,{})})},jt=n(398),vt=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u5de6\u63d2\u5165\u5217",mousedownFunc:function(){H.insertColumn(e,"before")},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(jt.a,{})})},Ot=n(399),pt=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u53f3\u63d2\u5165\u5217",mousedownFunc:function(){H.insertColumn(e,"after")},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(Ot.a,{})})},mt=n(400),gt=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u4e0a\u63d2\u5165\u884c",mousedownFunc:function(){H.insertRow(e,"before")},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(mt.a,{})})},yt=n(401),xt=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u4e0b\u63d2\u5165\u884c",mousedownFunc:function(){H.insertRow(e,"after")},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(yt.a,{})})},Tt=n(402),wt=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u5408\u5e76\u5355\u5143\u683c",mousedownFunc:function(){H.mergeTd(e)},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(Tt.a,{})})},St=n(403),Et=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u62c6\u5206\u5355\u5143\u683c",mousedownFunc:function(){H.splitTd(e)},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(St.a,{})})},Nt=n(404),Ct=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u6e05\u7a7a\u5355\u5143\u683c",mousedownFunc:function(){B.clearTd(e)},disabledCondition:M.hasNotSelectedAnyTd,children:Object(k.jsx)(Nt.a,{})})},Dt=n(405),It=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u63d2\u5165\u4ee3\u7801\u5757",mousedownFunc:function(){if(e.selection){var t=u.a.nodes(e,{mode:"highest",match:function(e){return!u.a.isEditor(e)}}),n=Object(s.a)(t,1)[0];n&&u.i.insertNodes(e,{type:r.CODE,defaultMode:"javascript",children:[{text:""}]},{at:u.e.next(n[1])})}},disabledCondition:function(e){return null==e.selection},children:Object(k.jsx)(Dt.a,{})})},Lt=n(406),At=function(){var e=Object(d.g)();return Object(k.jsx)(Me,{title:"\u9009\u4e2d\u5355\u5143\u683c\uff08\u9f20\u6807\u79fb\u52a8\u5230\u5355\u5143\u683c\u7684\u8fb9\u7f18\u51fa\u73b0\u5341\u5b57\u6807\u53cc\u51fb\uff09",mousedownFunc:function(){var t=H.getEditingTd(e);t&&(u.i.setNodes(e,{start:!0,selected:!0},{at:t[1]}),u.i.deselect(e))},disabledCondition:M.hasNotSelectedAnyTd,cypressId:v.SELECTE_TD,children:Object(k.jsx)(Lt.a,{})})},Mt=function(e){var t=Object(i.useContext)(an),n=t.readOnly,r=t.setReadOnly,a=n?"\u7f16\u8f91\u6a21\u5f0f":"\u53ea\u8bfb\u6a21\u5f0f";return Object(k.jsx)(X,{title:a,mousedownFunc:function(){r(!n)},children:a})},kt=function(e){var t=Object(d.g)(),n=Object(k.jsx)(W.a,{style:{height:20,backgroundColor:"rgb(0 0 0 / 10%)"},type:"vertical"});return Object(k.jsx)("div",{className:"cyEditor__toolBar",style:{position:"relative",marginBottom:4},children:Object(k.jsxs)(V.a,{align:"middle",children:[Object(k.jsx)(Y.a,{children:Object(k.jsx)(oe,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ae,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ie,{})}),Object(k.jsx)(Y.a,{children:n}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ee,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(J,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(he,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ve,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ge,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(xe,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(we,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(Ee,{})}),Object(k.jsx)(Y.a,{children:n}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(It,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ke,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(Re,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(Be,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ft,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ht,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(_e,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(Ze,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(rt,{})}),Object(k.jsx)(Y.a,{children:n}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(at,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ot,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(At,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(lt,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(ut,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(vt,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(pt,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(gt,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(xt,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(wt,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(Et,{})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(Ct,{})}),Object(k.jsx)(Y.a,{children:n}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(X,{title:"\u8f93\u51fa\u5185\u5bb9",mousedownFunc:function(){console.log(JSON.stringify(t.children)),window.localStorage.setItem("savedContent",JSON.stringify(t.children))},children:Object(k.jsx)(U.a,{})})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(Mt,{})})]})})},Pt=function e(t){var n,i;if(3===t.nodeType)return t.textContent;if(1!==t.nodeType)return null;var a={};null===(n=t.style)||void 0===n||null===(i=n.cssText)||void 0===i||i.split(";").forEach((function(e){var t=e.split(":"),n=Object(s.a)(t,2),r=n[0],i=n[1];if(!r)return null;var o=r.trim().replace(/^([a-z]+)-([a-z])([a-z]+)$/gi,(function(e,t,n,r){return t+n.toUpperCase()+r})),c=i.trim();"textDecoration"===o?(c.includes("underline")&&(a[b.Underline]=!0),c.includes("line-through")&&(a[b.LineThrough]=!0)):"bold"===c?a[b.BOLD]=!0:"italic"===c?a[b.ITALIC]=!0:Object.values(b).includes(o)&&(a[o]=c),"width"===o&&(a.width=parseInt(c)),"height"===o&&(a.height=parseInt(c))}));var o=Array.from(t.childNodes).map(e);switch(0===o.length&&(o=[{text:""}]),t.nodeName){case"BR":return"\n";case"BODY":return Object(y.a)("fragment",{},o);case"P":case"DIV":var c=(Array.from(null===t||void 0===t?void 0:t.childNodes)||[]).every((function(e){return 3===e.nodeType}));return Object(y.a)("element",Object(l.a)({type:c?r.DIV:r.Block},a),o);case"H1":return Object(y.a)("element",Object(l.a)({type:r.H1},a),o);case"H2":return Object(y.a)("element",Object(l.a)({type:r.H2},a),o);case"H3":return Object(y.a)("element",Object(l.a)({type:r.H3},a),o);case"H4":return Object(y.a)("element",Object(l.a)({type:r.H4},a),o);case"A":return Object(y.a)("element",Object(l.a)({type:r.LINK,url:t.getAttribute("href")},a),o);case"IMG":return Object(y.a)("element",Object(l.a)({type:r.IMG,url:t.getAttribute("src")},a),o);case"UL":return Object(y.a)("element",Object(l.a)({type:r.NORMAL_LIST},a),o);case"OL":return Object(y.a)("element",Object(l.a)({type:r.NUMBER_LIST},a),o);case"LI":return Object(y.a)("element",Object(l.a)({type:r.LIST_ITEM},a),o);case"TABLE":return Object(y.a)("element",Object(l.a)({type:r.TABLE},a),o);case"TBODY":return Object(y.a)("element",Object(l.a)({type:r.TBODY},a),o);case"TR":return Object(y.a)("element",Object(l.a)({type:r.TR},a),o);case"TD":return Object(y.a)("element",Object(l.a)(Object(l.a)({type:r.TD},a),{},{rowSpan:t.getAttribute("rowspan")||1,colSpan:t.getAttribute("colspan")||1}),o);default:return t.textContent}},Rt=function(e){var t=(new DOMParser).parseFromString(e,"text/html");return Pt(t.body)},zt=function(e,t){if(C(t).size>0)!function(e,t){switch(e.key){case"Delete":case"Backspace":B.clearTd(t);break;case"Escape":e.preventDefault(),B.deselectAllTd(t)}e.ctrlKey&&"c"===e.key?H.copyCells(t):e.ctrlKey&&"v"===e.key&&H.pasteCells(t)}(e,t);else{var n=t.selection;if(n)return u.g.isExpanded(n)?function(e,t){var n=t.selection;if(n)switch(e.key){case"Home":return void Le.handleKeyDown(e,t);case"Tab":if(e.preventDefault(),Ce.isInLi(t)){var r,i=Object(O.a)(u.a.nodes(t,{at:n,reverse:!0,universal:!0,match:function(e){return M.isTextWrapper(e)}}));try{for(i.s();!(r=i.n()).done;){var a=Object(s.a)(r.value,2)[1],o=M.getParent(t,a),c=Object(s.a)(o,2),l=c[0],d=c[1];l&&Ce.isListItem(l)&&(e.shiftKey?Ce.liftLi(t,[l,d]):Ce.indentLi(t,[l,d]))}}catch(f){i.e(f)}finally{i.f()}break}H.isInTable(t)&&(e.shiftKey?H.shiftTabEvent(t):H.tabEvent(t))}}(e,t):u.g.isCollapsed(n)?function(e,t){var n=t.selection;if(n){var i=M.getFirstAboveElementType(t),a=function(){return H.getEditingTd(t)},o=function(e){return e&&u.a.above(t,{at:e[1],match:function(e){return H.isTable(e)}})};switch(e.key){case"Tab":if(e.preventDefault(),r.LIST_ITEM===i){e.shiftKey?Ce.shiftTabEvent(t):Ce.tabEvent(t);break}if(r.TD===i){e.shiftKey?H.shiftTabEvent(t):H.tabEvent(t);break}!e.shiftKey&&u.i.insertText(t,"    ");break;case"ArrowUp":var c=a();if(c){var l=u.a.nodes(t,{at:c[1],mode:"lowest",match:function(e){return u.a.isBlock(t,e)}}),d=Object(s.a)(l,1)[0],f=0===c[1][c[1].length-2];if(u.e.isDescendant(n.anchor.path,d[1])){if(f){var b=u.a.nodes(t,{at:c[1],match:function(e){return H.isTable(e)}}),h=Object(s.a)(b,1)[0];if(h){var j=u.a.before(t,h[1]);e.preventDefault(),j&&u.i.select(t,j)}return}return B.findTargetTd(t,c,"up"),void e.preventDefault()}return}return;case"ArrowDown":var v=a();if(v){var O=u.a.nodes(t,{at:v[1],mode:"lowest",reverse:!0,match:function(e){return u.a.isBlock(t,e)}}),p=Object(s.a)(O,1)[0],m=u.a.nodes(t,{at:v[1],match:function(e){return u.b.isElement(e)&&e.type===r.TBODY}}),g=Object(s.a)(m,1)[0];if(!g)return;var y=u.e.isDescendant(n.anchor.path,p[1]),x=v[1][v[1].length-2]===g[0].children.length-1;if(y){if(x){var T=u.a.nodes(t,{at:v[1],match:function(e){return H.isTable(e)}}),w=Object(s.a)(T,1)[0];if(w){var S=u.a.after(t,w[1]);e.preventDefault(),S&&u.i.select(t,S)}return}return B.findTargetTd(t,v,"down"),void e.preventDefault()}return}return;case"ArrowLeft":var E=a(),N=o(E);return N&&u.a.isStart(t,n.anchor,N[1])?void B.deselectAllTd(t):E&&u.a.isStart(t,n.anchor,E[1])?(B.findTargetTd(t,E,"left"),void e.preventDefault()):void 0;case"ArrowRight":var C=a(),D=o(C);return D&&u.a.isEnd(t,n.anchor,D[1])?void B.deselectAllTd(t):C&&u.a.isEnd(t,n.anchor,C[1])?(B.findTargetTd(t,C,"right"),void e.preventDefault()):void 0;case"Home":return void Le.handleKeyDown(e,t)}}}(e,t):void 0}},Bt=n(408),Ft=n(409),_t=n(410),Ht=n(378),Wt=n(123),Vt=(n(346),n(153)),Yt=n.n(Vt),Ut=function(e){var t=e.attributes,n=e.children,r=e.element,a=Object(d.d)(),o=Object(d.e)(),c=Object(d.g)(),f=Object(i.useState)({size:{width:r.width||100,height:r.height||100},showTool:!1}),b=Object(s.a)(f,2),h=b[0],j=b[1],v=Object(i.useRef)(),O=Object(i.useCallback)((function(e){e&&!v.current&&a&&(v.current=new Yt.a(e,{}))}),[a]),p=Object(k.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,opacity:.8,color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,backgroundColor:"black",zIndex:9},children:"uploading..."}),m=[{title:"\u8fb9\u6846",icon:Object(k.jsx)(Bt.a,{}),method:function(){var e=d.b.findPath(c,r);u.i.setNodes(c,{border:!0},{at:e})}},{title:"\u53d6\u6d88\u8fb9\u6846",icon:Object(k.jsx)(Ft.a,{}),method:function(){var e=d.b.findPath(c,r);u.i.unsetNodes(c,"border",{at:e})}},{title:"\u67e5\u770b\u5927\u56fe",icon:Object(k.jsx)(_t.a,{}),method:function(){var e=d.b.toDOMNode(c,r).querySelector("img");if(e){var t=new Yt.a(e,{hidden:function(){t.destroy()}});t.show()}}},{title:"\u5220\u9664",icon:Object(k.jsx)(se.a,{}),method:function(){var e=d.b.findPath(c,r);u.i.delete(c,{at:e,voids:!0,reverse:!0}),d.b.focus(c)}}];return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{contentEditable:!1,style:{position:"relative",display:"inline-block",margin:5,verticalAlign:"bottom",boxShadow:o?"0 0 0 3px rgba(180,215,255,.7)":"none",border:r.border?"1px solid #e5e5e5":"none"},onClick:function(){j((function(e){return Object(l.a)(Object(l.a)({},e),{},{showTool:!0})}));var e=t.ref.current;window.addEventListener("click",(function t(n){M.findParent(n.target,e)!=e&&(j((function(e){return Object(l.a)(Object(l.a)({},e),{},{showTool:!1})})),window.removeEventListener("click",t))}))},children:Object(k.jsxs)(Wt.a,{enable:d.b.isReadOnly(c)?{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1}:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{display:"inline-block"},size:h.size,onResizeStop:function(e,t,n,i){var a=h.size.width+i.width,o=h.size.height+i.height;j((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:{width:a,height:o}})}));var s=d.b.findPath(c,r);u.i.setNodes(c,{children:[],width:a,height:o},{at:s})},children:[r.id?p:null,Object(k.jsx)(Ht.a,{content:Object(k.jsx)(V.a,{gutter:8,children:m.map((function(e){return Object(k.jsx)(Y.a,{children:Object(k.jsx)(q.a,{title:e.title,children:Object(k.jsx)(G.a,{onClick:e.method,type:"text",icon:e.icon})})},e.title)}))}),placement:"bottomLeft",visible:!a&&h.showTool,children:Object(k.jsx)("img",{ref:O,width:"100%",height:"100%",alt:"",src:r.url})}),n]})}))},Kt=n(411),qt=function(e){var t=e.attributes,n=e.children,r=e.element,i=Object(d.d)(),a=Object(d.g)(),o=Object(k.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,opacity:.5,color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,backgroundColor:"black",zIndex:9},children:"uploading..."}),c=[{title:"\u4e0b\u8f7d",icon:Object(k.jsx)(Kt.a,{}),method:function(){window.open(r.url)}},{title:"\u5220\u9664",icon:Object(k.jsx)(se.a,{}),method:function(){var e=d.b.findPath(a,r);u.i.delete(a,{at:e,voids:!0,reverse:!0}),d.b.focus(a)}}];return Object(k.jsxs)("div",Object(l.a)(Object(l.a)({},t),{},{contentEditable:!1,style:{position:"relative",display:"inline-block",margin:"0 5px",verticalAlign:"bottom"},children:[r.id?o:null,Object(k.jsx)(Ht.a,{content:Object(k.jsx)(V.a,{gutter:8,children:c.map((function(e){return Object(k.jsx)(Y.a,{children:Object(k.jsx)(q.a,{title:e.title,children:Object(k.jsx)(G.a,{onClick:e.method,type:"text",icon:e.icon})})},e.title)}))}),trigger:i?[]:"click",placement:"bottomLeft",children:Object(k.jsxs)("a",{download:!0,href:r.url,rel:"noopener noreferrer",target:"_blank",children:[Object(k.jsx)($e.a,{style:{marginRight:2}}),r.fileName]})}),n]}))},Gt=n(412),Xt=n(373),Jt=n(375),Zt=function(e){var t=e.attributes,n=e.children,a=e.element,o=Object(d.g)(),c=Object(d.d)(),f=Object(i.useState)(),b=Object(s.a)(f,2),h=b[0],j=b[1],v=Object(i.useState)(),O=Object(s.a)(v,2),p=O[0],m=O[1],g={marginBottom:6},y=Object(k.jsx)(Xt.a,{size:"small",children:Object(k.jsxs)(V.a,{gutter:8,style:{flexDirection:"column",width:300},children:[Object(k.jsx)(Y.a,{flex:"1",children:Object(k.jsxs)(Xt.a.Item,{label:"\u64cd\u4f5c",style:g,children:[Object(k.jsxs)(G.a,{size:"small",onClick:function(){window.open(a.url)},children:[Object(k.jsx)(Lt.a,{title:"\u8bbf\u95ee\u94fe\u63a5"})," \u8bbf\u95ee\u94fe\u63a5"]}),"\xa0",Object(k.jsxs)(G.a,{size:"small",onMouseDown:function(e){e.preventDefault(),d.b.focus(o),o.selection&&u.i.unwrapNodes(o,{match:function(e){return u.b.isElement(e)&&e.type==r.LINK}})},children:[Object(k.jsx)(Gt.a,{title:"\u53d6\u6d88\u94fe\u63a5"})," \u53d6\u6d88\u94fe\u63a5"]})]})}),Object(k.jsx)(Y.a,{flex:"1",children:Object(k.jsx)(Xt.a.Item,{label:"\u6587\u5b57",style:g,children:Object(k.jsx)(Jt.a,{value:h,onChange:function(e){j(e.target.value)}})})}),Object(k.jsx)(Y.a,{children:Object(k.jsx)(Xt.a.Item,{label:"\u94fe\u63a5",style:g,children:Object(k.jsx)(Jt.a,{value:p,onChange:function(e){m(e.target.value)}})})}),Object(k.jsx)(V.a,{justify:"end",children:Object(k.jsx)(G.a,{type:"primary",style:{width:100,marginRight:4},onClick:function(){d.b.focus(o);var e=d.b.toSlateNode(o,t.ref.current),n=d.b.findPath(o,e);e&&n&&(u.i.insertText(o,h||"link",{at:u.a.range(o,n)}),u.i.setNodes(o,{url:p},{at:n}))},children:"\u786e\u5b9a"})})]})});return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{style:{display:"inline",position:"relative"},children:Object(k.jsx)(Ht.a,{placement:"right",content:y,trigger:c?[]:["hover"],children:Object(k.jsx)("a",{href:a.url,target:"__blank",onMouseEnter:function(){return function(){var e=t.ref.current.querySelector("a");e&&(m(e.href),j(e.innerText))}()},children:n})})}))},$t=n(198);n(347),n(348),n(349),n(350),n(351),n(105),n(88),n(352),n(353),n(363);var Qt=[{title:"html",value:"text/html"},{title:"javascript",value:"javascript"},{title:"react",value:"text/jsx"},{title:"react-ts",value:"text/typescript-jsx"},{title:"vue",value:"vue"},{title:"java",value:"text/x-java"},{title:"c++",value:"text/x-c++src"}],en=function(e){var t=e.attributes,n=e.children,r=e.element,a=Object(d.d)(),o=Object(d.g)(),c=Object(i.useState)({size:{width:"100%",height:r.height||300},showTool:!1}),f=Object(s.a)(c,2),b=f[0],h=f[1],j=Object(i.useState)(r.defaultCode||""),v=Object(s.a)(j,2),O=v[0],p=v[1],m=Object(i.useRef)(null),y=Object(i.useRef)(g.a.debounce((function(e){var t=d.b.findPath(o,r);u.i.setNodes(o,{children:[],defaultCode:e},{at:t})}),100)),x=Object(i.useMemo)((function(){return{mode:r.defaultMode,theme:"darcula",lineNumbers:!0,readOnly:!!a&&"nocursor"}}),[r.defaultMode,a]),T=Object(i.useCallback)((function(e){m.current=e,e.setSize("100%",r.height)}),[]),w=Object(i.useCallback)((function(e,t,n){y.current(n)}),[y]);return Object(k.jsxs)("div",Object(l.a)(Object(l.a)({},t),{},{contentEditable:!1,children:[Object(k.jsxs)(Wt.a,{enable:d.b.isReadOnly(o)?{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1}:{top:!1,right:!1,bottom:!0,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},style:{display:"inline-block",position:"relative"},size:b.size,onResizeStop:function(e,t,n,i){h((function(e){return Object(l.a)(Object(l.a)({},e),{},{size:Object(l.a)(Object(l.a)({},e.size),{},{height:n.offsetHeight})})}));var a=d.b.findPath(o,r);u.i.setNodes(o,{children:[],height:n.offsetHeight},{at:a})},onResize:function(e,t,n,r){var i;null===(i=m.current)||void 0===i||i.setSize("100%",n.offsetHeight)},children:[Object(k.jsx)("div",{style:{color:"white",position:"absolute",right:30,top:5,zIndex:7},children:Object(k.jsx)(te.a,{size:"small",defaultValue:r.defaultMode,style:{width:120,color:"white",textAlign:"right"},bordered:!1,showArrow:!1,onChange:function(e){var t=d.b.findPath(o,r);u.i.setNodes(o,{children:[],defaultMode:e},{at:t})},children:Qt.map((function(e){return Object(k.jsx)(te.a.Option,{value:e.value,children:e.title},e.value)}))})}),Object(i.useMemo)((function(){return Object(k.jsx)($t.Controlled,{value:O,onBeforeChange:function(e,t,n){p(n)},options:x,onChange:w,editorDidMount:T})}),[O,x,T,w])]}),n]}))},tn=function(e){var t=e.attributes,n=(e.children,e.element),r=Object(d.g)(),i=Object(d.d)();return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{children:Object(k.jsx)(De.a,{checked:n.checked,onChange:function(e){u.i.setNodes(r,{checked:e.target.checked},{at:d.b.findPath(r,n)})},disabled:i})}))},nn=function(e){var t=e.attributes,n=e.children,i=e.element,a={};switch(h.includes(i.type)&&i.textAlign&&(a.textAlign=i.textAlign),i.type){case r.CHECKBOX:return Object(k.jsx)(tn,Object(l.a)({},e));case r.TODOLIST:return Object(k.jsx)(Ie,Object(l.a)({},e));case r.NUMBER_LIST:return Object(k.jsx)("ol",Object(l.a)(Object(l.a)({},t),{},{children:n}));case r.NORMAL_LIST:return Object(k.jsx)("ul",Object(l.a)(Object(l.a)({},t),{},{children:n}));case r.LIST_ITEM:return Object(k.jsx)("li",Object(l.a)(Object(l.a)({},t),{},{style:{color:i.liColor||"unset"},children:n}));case r.DIV:return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{style:a,children:n}));case r.H1:return Object(k.jsx)("h1",Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)({},a),children:n}));case r.H2:return Object(k.jsx)("h2",Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)({},a),children:n}));case r.H3:return Object(k.jsx)("h3",Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)({},a),children:n}));case r.H4:return Object(k.jsx)("h4",Object(l.a)(Object(l.a)({},t),{},{style:Object(l.a)({},a),children:n}));case r.IMG:return Object(k.jsx)(Ut,Object(l.a)(Object(l.a)({},e),{},{children:n}));case r.LINK:return Object(k.jsx)(Zt,Object(l.a)({},e));case r.TABLE:return Object(k.jsx)(_,Object(l.a)({},e));case r.TBODY:return Object(k.jsx)("tbody",Object(l.a)(Object(l.a)({},t),{},{children:n}));case r.TR:var o={};return i.shouldEmpty&&(o.contentEditable=!1),Object(k.jsx)("tr",Object(l.a)(Object(l.a)(Object(l.a)({},t),o),{},{children:i.shouldEmpty?null:n}));case r.TD:return Object(k.jsx)(z,Object(l.a)({},e));case r.CODE:return Object(k.jsx)(en,Object(l.a)({},e));case r.FILE:return Object(k.jsx)(qt,Object(l.a)({},e));default:return Object(k.jsx)("div",Object(l.a)(Object(l.a)({},t),{},{children:n}))}},rn=function(e){var t=e.attributes,n=e.children,r=e.leaf,i={};return r[b.BOLD]&&(i.fontWeight="bold"),r[b.ITALIC]&&(i.fontStyle="italic"),r[b.FontSize]&&(i.fontSize=r.fontSize),(r[b.Underline]||r[b.LineThrough])&&(i.textDecoration="".concat(r[b.Underline]?"underline":""," ").concat(r[b.LineThrough]?"line-through":"")),r[b.Color]&&(i.color=r[b.Color]),r[b.BGColor]&&(i.backgroundColor=r[b.BGColor]),Object(k.jsx)("span",Object(l.a)(Object(l.a)({},t),{},{style:i,children:n}))},an=(n(364),n(365),Object(i.createContext)({savedMarks:null,setSavedMarks:function(){},readOnly:!1,setReadOnly:function(){}})),on=function(e){var t=Object(i.useState)(function(e){var t=e.deleteForward,n=e.deleteBackward,i=e.insertText,a=e.getFragment,o=e.insertFragment,c=e.insertData,l=e.insertBreak,d=e.isInline,b=e.isVoid,h=e.normalizeNode,v=e.apply;e.apply=function(t){try{if("set_node"===t.type){var n=u.a.node(e,t.path),i=n&&u.b.isElement(n[0])&&n[0].type===r.IMG,a=n&&u.b.isElement(n[0])&&n[0].type===r.FILE,o=n&&H.isTd(n[0]),c=n&&H.isTable(n[0]),l=t.newProperties,s=t.properties;if(o&&(l.selected||l.width||l.start||l.tdIsEditing||s.start||s.selected||s.width||s.tdIsEditing)||c&&(l.wrapperWidthWhenCreated||s.wrapperWidthWhenCreated)||i||a)return void f.a.withoutSaving(e,(function(){v(t)}))}v(t)}catch(d){console.warn(d)}};var O=g.a.throttle((function(){if(e.selection){var t=Le.getToDoList(e);if(t)return t&&""===u.a.string(e,t[1],{voids:!0})?void u.i.setNodes(e,{type:r.DIV},{at:t[1]}):void l();if(u.g.isExpanded(e.selection))M.removeRangeElement(e);else{var n=M.getParent(e,e.selection.anchor.path);if(!n[0])return;var i=u.a.parent(e,n[1]),a=Ce.isListItem(i[0])&&i;if(a&&""===u.a.string(e,a[1],{voids:!0}))return void u.i.liftNodes(e,{at:a[1]})}l()}}),50);e.insertBreak=function(){O()},e.deleteFragment=function(){M.removeRangeElement(e)},e.deleteForward=function(n){if(e.selection){var i=u.a.after(e,e.selection.anchor),a=u.a.above(e,{at:i,mode:"lowest",match:function(e){return H.isTd(e)}}),o=u.a.above(e,{mode:"lowest",match:function(e){return H.isTd(e)}}),c=null!=a&&null!=o&&!u.e.equals(o[1],a[1])||null!=a&&null==o,l=[function(e){if(e.selection)return m(),!(!Ce.isInList(e)||!c)||void 0},function(e){if(e.selection){var t=u.a.after(e,e.selection.anchor);if(t){var n=u.a.above(e,{at:t,match:function(e){return u.b.isElement(e)&&e.type===r.CODE}});if(n)return u.i.removeNodes(e,{at:n[1],hanging:!0}),!0}}},function(e){if(e.selection)return Le.getToDoList(e)?(c||t(n),!0):void 0},function(e){if(e.selection)return H.isInTable(e)&&null!=o?u.a.isEnd(e,e.selection.anchor,o[1]):void 0},function(e){if(e.selection){var r=u.a.above(e,{mode:"lowest",match:function(e){return M.isTextWrapper(e)}});return r&&M.isElementEmpty(e,r)?(c?(u.i.removeNodes(e,{hanging:!0}),u.i.move(e),setTimeout((function(){u.i.move(e,{reverse:!0})}),0)):t(n),!0):!!c||void 0}}].some((function(t){return t(e)}));l||t(n)}},e.deleteBackward=function(t){if(e.selection){var i=H.isInTable(e),a=u.a.before(e,e.selection.anchor),o=u.a.above(e,{at:a,mode:"lowest",match:function(e){return H.isTd(e)}}),c=u.a.above(e,{mode:"lowest",match:function(e){return H.isTd(e)}}),l=null!=o&&null!=c&&!u.e.equals(c[1],o[1])||null!=o&&null==c,s=[function(e){if(e.selection&&Ce.isInList(e)){m();var r=u.a.above(e,{mode:"lowest",match:function(e){return Ce.isListItem(e)}});if(r){var i=M.isElementEmpty(e,r),a=1===u.a.parent(e,r[1])[0].children.length;return u.a.isStart(e,e.selection.anchor,r[1])?i&&a?(u.i.removeNodes(e,{at:r[1]}),u.i.move(e),setTimeout((function(){u.i.move(e,{reverse:!0}),l&&u.i.move(e)}),10),!0):i&&!a?(u.i.removeNodes(e,{at:r[1]}),!0):!i&&a?(!l&&n(t),!0):(i||a||!l&&n(t),!0):void 0}}},function(e){if(e.selection){var t=u.a.before(e,e.selection.anchor);if(t){var n=u.a.above(e,{at:t,match:function(e){return u.b.isElement(e)&&e.type===r.CODE}});if(n)return u.i.removeNodes(e,{at:n[1],hanging:!0}),!0}}},function(e){if(e.selection){var i=Le.getToDoList(e);if(i&&u.a.isStart(e,e.selection.anchor,i[1]))return l?(u.i.removeNodes(e,{at:i[1]}),u.i.move(e)):null==u.a.before(e,e.selection)?u.a.withoutNormalizing(e,(function(){u.i.wrapNodes(e,{type:r.DIV,children:[]},{at:i[1]}),u.i.unwrapNodes(e,{at:[].concat(Object(p.a)(i[1]),[0])})})):n(t),!0}},function(e){if(e.selection)return i&&null!=c?u.a.isStart(e,e.selection.anchor,c[1]):void 0},function(e){if(e.selection){var r=u.a.above(e,{mode:"lowest",match:function(e){return M.isTextWrapper(e)}});return r&&M.isElementEmpty(e,r)?(l?(u.i.removeNodes(e,{hanging:!0}),u.i.move(e),setTimeout((function(){u.i.move(e,{reverse:!0})}),0)):n(t),!0):!!l||void 0}}].some((function(t){return t(e)}));s||n(t)}},e.insertText=function(t){e.selection&&u.g.isExpanded(e.selection)&&M.removeRangeElement(e),i(t)},e.getFragment=function(){return S(null),N({copyedAreaHeight:0,copyedAreaWidth:0}),w(a()),a()},e.insertFragment=function(t){M.removeRangeElement(e);var n=E()||[],r=M.filterCopyedContent(n.map((function(e){return e[0]}))),i=n.length>0,a=H.isInTable(e),c=n.length>0?r:t;a?c&&o(g.a.cloneDeep(M.filterCopyedContent(c))):i?o(g.a.cloneDeep(c)):c&&o(g.a.cloneDeep(M.filterCopyedContent(c)))},e.insertData=function(t){if(t.types.includes("application/x-slate-fragment"))c(t);else if(t.types.includes("text/plain")){var n=new DataTransfer,r=Rt(t.getData("text/plain"));n.setData("application/x-slate-fragment",M.encodeSlateContent(r)),c(n)}else if(t.types.includes("Files")){var i=t.files;Je(e,i),nt(e,i)}};var m=g.a.debounce((function(){var t=u.a.next(e,{match:function(e){return Ce.isOrderList(e)}});t&&e.normalizeNode(t);var n=u.a.previous(e,{match:function(e){return Ce.isOrderList(e)}});n&&e.normalizeNode(n)}),0);return e.isInline=function(e){return!![r.IMG,r.FILE,r.LINK,r.CHECKBOX].includes(e.type)||d(e)},e.isVoid=function(e){return!![r.IMG,r.FILE,r.CODE,r.CHECKBOX].includes(e.type)||b(e)},e.normalizeNode=function(t){var n=Object(s.a)(t,2),i=n[0],a=n[1],o=M.getNodeByPath(e,[e.children.length-1]),c=M.getNodeByPath(e,[e.children.length-2]);if(!M.isTextWrapper(o[0])||""!==u.a.string(e,o[1],{voids:!0}))return u.i.insertNodes(e,{type:r.DIV,children:[{text:""}]},{at:[e.children.length]}),!0;if(M.isTextWrapper(c[0])&&""===u.a.string(e,c[1],{voids:!0}))return u.i.removeNodes(e,{at:c[1]}),!0;if(0!==e.children.length){if(u.b.isElement(i)&&u.a.isBlock(e,i)){var l=M.getParent(e,a),d=Object(s.a)(l,1)[0];if(M.isTextWrapper(d))return void u.i.removeNodes(e,{at:a})}if(u.b.isElement(i)&&j.includes(i.type)){var f=M.getPath(a,"pre"),b=M.getNodeByPath(e,f),v=Object(s.a)(b,1)[0];if(v&&!u.h.isText(v))return void u.i.insertNodes(e,{text:""},{at:f});var O=M.getPath(a,"next"),p=M.getNodeByPath(e,O),m=Object(s.a)(p,1)[0];if(!u.h.isText(m))return void u.i.insertNodes(e,{text:""},{at:O})}u.b.isElement(i)&&i.type===r.LINK&&""===u.a.string(e,a,{voids:!0})?u.i.removeNodes(e,{at:a}):H.normalizeTable(e,t)||Ce.normalizeList(e,t)||Le.normalizeToDoList(e,t)||h(t)}else u.i.insertNodes(e,{type:r.DIV,children:[{text:""}]})},e}(Object(f.b)(Object(d.h)(Object(u.j)())))),n=Object(s.a)(t,1)[0],a=Object(i.useState)((function(){var t=e.content||window.localStorage.getItem("savedContent")||JSON.stringify([{type:r.DIV,children:[{text:""}]}]);return JSON.parse(t)})),o=Object(s.a)(a,2),h=o[0],v=o[1],O=Object(i.useRef)({preUndos:[],preSelection:null}),m=Object(i.useState)(),y=Object(s.a)(m,2),x=y[0],T=y[1];Object(i.useEffect)((function(){document.body.style.cursor=null!=x?"copy":"auto"}),[x]);var C=Object(i.useState)(!1),D=Object(s.a)(C,2),I=D[0],L=D[1];Object(i.useEffect)((function(){var t;null===(t=e.getEditor)||void 0===t||t.call(e,n),n.normalizeNode([n,[]])}),[n]);var A=Object(i.useCallback)((function(e){return Object(k.jsx)(nn,Object(l.a)(Object(l.a)({},e),{},{editorRef:O}))}),[]),P=Object(i.useCallback)((function(e){return Object(k.jsx)(rn,Object(l.a)({},e))}),[]),R=Object(i.useMemo)((function(){return Object(k.jsx)(kt,{})}),[]);return Object(k.jsx)("div",{className:"cyEditor",style:{position:"relative"},children:Object(k.jsx)(d.c,{editor:n,value:h,onChange:function(e){v(e)},children:Object(k.jsxs)(an.Provider,{value:Object(i.useMemo)((function(){return{savedMarks:x,setSavedMarks:T,readOnly:I,setReadOnly:L}}),[I,x]),children:[R,Object(k.jsx)("div",{className:"cyEditor__content",style:{overflow:"auto",height:window.screen.availHeight-200,border:"1px solid",padding:12},children:Object(k.jsx)(d.a,{renderElement:A,renderLeaf:P,autoFocus:!0,readOnly:I,onCompositionStart:function(){M.removeRangeElement(n)},onDOMBeforeInput:function(e){var t,n,r;(E()||[]).length>0&&(null===(t=window)||void 0===t||null===(n=t.navigator)||void 0===n||null===(r=n.clipboard)||void 0===r||r.writeText("selected td paste only"))},placeholder:"welcome to cyEditor!",onKeyDown:function(e){return zt(e,n)},onMouseDown:function(e){B.deselectAllTd(n)},onDragStart:function(e){e.preventDefault()},onBlur:function(){O.current.preSelection=n.selection},onFocus:function(){O.current.preSelection&&u.a.hasPath(n,O.current.preSelection.anchor.path)&&u.a.hasPath(n,O.current.preSelection.focus.path)&&u.i.select(n,O.current.preSelection)},onSelect:function(){if(null!=x){var e;if(H.getFirstSelectedTd(n))return;var t=x[b.TextAlign],r=u.a.above(n,{at:null===(e=n.selection)||void 0===e?void 0:e.anchor,mode:"lowest",match:function(e){return M.isTextWrapper(e)}});if(!r)return;for(var i=0,a=Object.values(b);i<a.length;i++){var o=a[i];u.a.removeMark(n,o)}for(var l in t&&u.i.unsetNodes(n,b.TextAlign,{at:r[1]}),x)"children"!==l&&u.a.addMark(n,l,x[l]);t&&u.i.setNodes(n,Object(c.a)({},b.TextAlign,x[b.TextAlign]),{at:r[1]}),T(null),document.body.style.cursor="auto",n.selection&&u.i.select(n,u.a.start(n,n.selection))}}})})]})})})};o.a.render(Object(k.jsx)(on,{}),document.getElementById("root"))}},[[366,1,2]]]);
//# sourceMappingURL=main.6b2a6caf.chunk.js.map